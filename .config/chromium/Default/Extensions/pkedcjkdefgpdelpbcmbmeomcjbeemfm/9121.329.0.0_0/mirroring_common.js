'use strict';var rj;var sj=chrome.i18n.getMessage("545449835455981095");w("mr.IssueSeverity",{kH:"fatal",tS:"warning",xL:"notification"});w("mr.IssueAction",{XG:"dismiss",NJ:"learn_more"});var tj=function(a,b){this.sinkId=this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction="dismiss";this.helpPageId=this.secondaryActions=null},vj=function(){var a=new tj(uj,"notification");a.helpPageId=6320939;a.defaultAction="learn_more";a.secondaryActions=["dismiss"];return a},wj=function(a,b){a.sinkId=b;return a};var xj=function(a,b){var c=this;this.g=void 0===b?null:b;this.promise=new Promise(function(d,e){var f=function(g){c.g=null;e(g)};c.h=f;a(function(g){c.g=null;d(g)},f)})};xj.prototype.cancel=function(a){this.h(a);if(this.g){var b=this.g;this.g=null;setTimeout(function(){return b(a)},0)}};var yj=function(a,b,c){c=void 0===c?null:c;return new xj(function(d,e){a.promise.then(function(f){if(b)try{d(b(f))}catch(g){e(g)}else d(f)},function(f){if(c)try{d(c(f))}catch(g){e(g)}else e(f)})},function(d){a.cancel(d)})};
xj.prototype.then=function(a,b){return yj(this,a,void 0===b?null:b)};xj.prototype.catch=function(a){return yj(this,null,a)};var zj=function(a){return new xj(function(b){b(a)})},Aj=function(a){return new xj(function(b,c){c(a)})},Bj=function(a){return new xj(function(b,c){a.then(b,c)})},Cj=function(a,b){var c=!1,d=null;return new xj(function(e,f){a.then(function(g){c||(d=b(g),d.promise.then(e,f))},f)},function(e){d?d.cancel(e):c=!0})};var Dj={wF:0,uF:1,yF:2,vF:3,RD:4,xF:5,QI:6,EQ:7,SG:8,UNKNOWN:9},Ej=function(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.reason=0<=b&&9>=b?b:9};t(Ej,Error);var Fj=function(){var a=m(navigator.userAgent.match(/Windows NT (\d+.\d+)/)||[]);a.next();a=a.next().value;return 6.2<=parseFloat(a)},Gj=function(){var a=navigator.userAgent;return a.includes("CrOS")?"ChromeOS":a.includes("Windows")?"Windows":a.includes("Macintosh")?"Mac":a.includes("Linux")?"Linux":"Other"};var Hj=["ChromeOS","Windows"].includes(Gj());var Ij=function(a,b,c,d){this.h=a;this.g=b;this.j=c||null;this.presentationId=d||null},Lj=function(a,b){if("tab"==a.h)a=Jj(a);else if("offscreen_tab"==a.h)b=Jj(a),b.presentationId=a.presentationId,a=b;else{var c={audio:!1,video:!1};a.g.shouldCaptureVideo?(c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:b}},Kj(a,c.video.mandatory),Hj&&a.g.shouldCaptureAudio&&(c.audio={mandatory:{chromeMediaSource:"system",chromeMediaSourceId:b}})):a.g.shouldCaptureAudio&&(c.audio={mandatory:{chromeMediaSource:"system"}});
a=c}return a},Jj=function(a){var b={audio:a.g.shouldCaptureAudio,video:a.g.shouldCaptureVideo};a.g.shouldCaptureVideo&&(b.videoConstraints={mandatory:{enableAutoThrottling:!0}},Kj(a,b.videoConstraints.mandatory));return b},Kj=function(a,b){var c=a.g.minWidth,d=a.g.minHeight;if(a.g.senderSideLetterboxing){c=a.g;if(0==c.minHeight||0==c.maxHeight?0:Math.floor(100*c.minWidth/c.minHeight)==Math.floor(100*c.maxWidth/c.maxHeight))c={width:c.minWidth,height:c.minHeight};else{d=c.maxWidth;for(var e=c.maxHeight;0!=
e;){var f=d%e;d=e;e=f}e=c.maxWidth/d;d=c.maxHeight/d;if(e<c.minWidth||d<c.minHeight)if(f=Math.max(c.minWidth/e,c.minHeight/d),e*=f,d*=f,e>c.maxWidth||d>c.maxHeight)e=c.maxWidth,d=c.maxHeight;e=Math.round(e);d=Math.round(d);c={width:e,height:d}}d=c;c=d.width;d=d.height}Object.assign(b,{minWidth:c,minHeight:d,maxWidth:a.g.maxWidth,maxHeight:a.g.maxHeight,minFrameRate:a.g.minFrameRate,maxFrameRate:a.g.maxFrameRate})};var Mj=function(a){this.g=a;this.h=this.Og=null;this.s=hb("mr.mirror.MirrorMediaStream")};Mj.prototype.start=function(){return"tab"==this.g.h?Nj(this):"offscreen_tab"==this.g.h?Oj(this):Pj(this)};var Nj=function(a){var b=Lj(a.g);a.s.info("Starting tab capture with constraints "+JSON.stringify(b));return new Promise(function(c,d){chrome.tabCapture.capture(b,function(e){e?(Qj(a,e),c(a)):d(Rj())});window.setTimeout(function(){d(new Ej("chrome.tabCapture.capture failed to call its callback",2))},5E3)})};
Mj.prototype.j=function(a){a&&this.s.info(function(){return"Track "+JSON.stringify(a.target)+" ended"});this.stop()};
var Rj=function(){return chrome.runtime.lastError&&chrome.runtime.lastError.message?new Ej(chrome.runtime.lastError.message,7):new Ej("empty_stream",0)},Sj=function(a){a=void 0===a?!0:a;return new Promise(function(b,c){var d=["screen"];a&&d.push("audio");"Linux"==Gj()&&d.push("window");var e=window.setTimeout(function(){f&&chrome.desktopCapture.cancelChooseDesktopMedia(f);c(new Ej("timeout",1))},6E4);var f=chrome.desktopCapture.chooseDesktopMedia(d,null,function(g){window.clearTimeout(e);g?b(g):c(new Ej("User cancelled capture dialog",
3))})})},Tj=function(a,b){return new Promise(function(c,d){a.s.info(function(){return"Starting desktop capture with constraints "+JSON.stringify(b)});navigator.mediaDevices.getUserMedia(b).then(function(e){e?(Qj(a,e),c(e)):d(new Ej("empty_stream",8))},function(e){var f=8;"NotAllowedError"==e.name&&(f=3);d(new Ej(e.name+" "+e.constraintName+": "+e.message,f))})})},Pj=function(a){return Hj&&a.g.g.shouldCaptureAudio&&!a.g.g.shouldCaptureVideo?Tj(a,Lj(a.g)).then(function(){return a}):Sj().then(function(b){b=
Lj(a.g,b);return Tj(a,b).then(function(){return a})})},Oj=function(a){var b=Lj(a.g);a.s.info(function(){return"Starting offscreen tab capture with constraints "+JSON.stringify(b)});return new Promise(function(c,d){chrome.tabCapture.captureOffscreenTab(a.g.j.toString(),b,function(e){e?(Qj(a,e),c(a)):d(Rj())})})},Qj=function(a,b){a.h=b;b.getAudioTracks().length||b.getVideoTracks();b.getTracks().forEach(function(c){c.onended=a.j.bind(a)})};
Mj.prototype.stop=function(){this.h&&(this.h.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.h=null,this.Og&&this.Og())};var Uj=function(){},Yj=function(a){var b=Vj.get(a)||null;if(b)return Promise.resolve(b);b=Wj.get(a);b||(b=new rb,Wj.set(a,b),Xj(a,b));return b.promise},Xj=function(a,b){var c=Zj.get(a)||null;if(!c)b.reject(Error("No corresponding bundle for "+a));else if(!ak.has(c)){var d=bk.get(c);d||(ck.info("Loading bundle "+c+" for module "+a),d=dk(c),bk.set(c,d));d.catch(function(e){b.reject(e)})}},dk=function(a){var b=new rb;b.promise.then(function(){ck.info("Bundle "+a+" loaded")},function(d){ck.error("Failed to load bundle "+
a);throw d;});var c=$f(document,"SCRIPT");Xe(c,fg(chrome.extension.getURL(a)));c.setAttribute("type","text/javascript");c.async=!0;c.onload=function(){return b.resolve(void 0)};c.onerror=function(){return b.reject(Error("Failed to load bundle "+a))};document.head.appendChild(c);return b.promise},ek=function(a,b){if(Vj.has(a))throw Error("Duplicate module "+a);Vj.set(a,b);(a=Wj.get(a))&&a.resolve(b)};
Uj.prototype.handleEvent=function(a,b){for(var c=1;c<arguments.length;++c);throw Error("Not implemented");};
var Zj=new Map([["mr.cast.ChannelService","background_script.js"],["mr.cast.SinkDiscoveryService","background_script.js"],["mr.mirror.cast.Service","mirroring_cast_streaming.js"],["mr.cloud.slarti.SinkDiscoveryService","background_script.js"],["mr.mirror.hangouts.HangoutsService","mirroring_hangouts.js"],["mr.mirror.hangouts.MeetingsService","mirroring_hangouts.js"],["mr.ProviderManager","background_script.js"],["mr.mirror.webrtc.WebRtcService","mirroring_webrtc.js"]]),ak=new Set(["background_script.js"]),
ck=hb("mr.Module"),Vj=new Map,Wj=new Map,bk=new Map;var fk,gk={kK:0,zF:1,AF:2,TG:3,UG:4,VH:5,SI:6,iK:7,lL:8,mL:9,fN:10,XO:11,YO:12,HP:13,DQ:14},hk=function(a){void 0==fk&&(Ob("MediaRouter.Provider.WakeEvent",a,gk),fk=a)};var ik=function(a){try{var b=new URL(a);return"http:"!=b.protocol&&"https:"!=b.protocol?!1:-1==b.hash.indexOf("__castAppId__")}catch(c){return!1}},jk=["https://docs.google.com","https://meet.google.com"],kk=function(a){return a.startsWith("urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")},lk=function(a){return"urn:x-org.chromium.media:source:desktop"==a},mk=function(a){var b=a.search("urn:x-org.chromium.media:source:tab:");return-1==b?null:parseInt(a.substr(b+36),10)||null};var nk=function(a,b){this.wa=a;this.j=b||null;this.h=this.g=null;this.M=hb("mr.mirror.Service."+a);this.wc=this.Da.bind(this);this.G=!1};t(nk,Uj);k=nk.prototype;k.initialize=function(a,b){this.G||(this.j=a,this.G=!0,this.xh(b))};k.xh=function(){};k.getName=function(){return this.wa};
k.Ug=function(a,b,c,d,e){var f=this;this.M.info("Start mirroring on route "+a.id);if(!this.G)return Aj(Error("Not initialized"));var g=new Promise(function(h,n){f.C().then(function(){var p=ok(b,c,d);return(new Mj(p)).start()}).then(function(p){if(f.h)throw p.stop(),new Ej("Cannot start multiple streams");f.h=p;p=f.D.bind(f);f.h.Og=p;return e?e(a).promise:a}).then(function(p){if(f.g)throw new Ej("Cannot start multiple sessions");if(!f.h)throw new Ej("Media stream ended before session could start.");
f.g=f.Vi(c,p);p.Qb.Zc=f.g.Zc;p=f.j.Qp.bind(f.j);f.g.J=p;pk(f.g);return f.g.start(f.h.h)}).then(function(){kk(b)&&!chrome.tabs.onUpdated.hasListener(f.wc)&&chrome.tabs.onUpdated.addListener(f.wc);return f.ta(a,b,c)}).then(function(){h(a)}).catch(function(p){qk(f,p);return f.D().then(function(){n(p)})})});return Bj(g)};k.li=function(a,b,c,d,e,f){this.M.info("Update mirroring on route "+a.id);return this.G?Bj(rk(this,a,b,c,d,f)):Aj(Error("Not initialized"))};
var rk=function(a,b,c,d,e,f){if(!a.g)return Promise.reject(new Ej("No session to update streams on",7));if(!a.g.Fs())return Promise.reject(new Ej("Session does not support updating stream",7));var g=!1;return new Promise(function(h,n){var p=ok(c,d,e);(new Mj(p)).start().then(function(r){a.h&&(a.h.Og=null,a.h.stop(),a.ai());a.h=r;r=a.D.bind(a);a.h.Og=r;g=!0;return f?f(b).promise:b}).then(function(){if(!a.g)throw new Ej("Session ended while updating stream");if(!a.h)throw new Ej("Media stream ended before session could be updated.");
return a.g.Ms(a.h.h)}).then(a.ta.bind(a,b,c,d)).then(function(){return h(b)}).catch(function(r){qk(a,r);if(g)return a.D().then(function(){n(r)});n(r)})})};
nk.prototype.ta=function(a,b,c){var d=this;return new Promise(function(e,f){if(d.g){kk(b)?(sk(d.g,a.Qb.tabId),d.bi()):ik(b)?(sk(d.g,a.Qb.tabId),d.Aj()):d.Yh();f=d.h;var g=a.sinkId;c.shouldCaptureAudio&&f.h&&!f.h.getAudioTracks().length&&d.j.Rg(wj(new tj(sj,"notification"),g));pk(d.g);e()}else f(new Ej("Session gone before executing post-startup steps",7))})};
var qk=function(a,b){b.reason=null!=b.reason?b.reason:9;a.M.error("Failed to start mirroring: "+b.message+(",  reason = "+b.reason+": "+b.stack));a.Qg(b.reason)};nk.prototype.C=function(){var a=this;return this.G?this.D().then(function(b){b&&a.Zh();return b}):Promise.reject("Not initialized")};
nk.prototype.D=function(){var a=this;chrome.tabs.onUpdated.removeListener(this.wc);var b=this.h;this.h=null;b&&(b.Og=null);var c=this.g;this.g=null;var d=c?this.Qk(c).catch(function(e){return a.M.error("Error in before-cleanup steps",e)}).then(function(){return c.stop()}).catch(function(e){return a.M.error("Error stopping session",e)}).then(function(){tk(a.j,c.h.id)}).catch(function(e){return a.M.error("Error in ended callbacks",e)}).then(function(){return!0}):Promise.resolve(!1);b&&(d=d.then(function(e){b.stop();
a.ai();return e}));return d};nk.prototype.Qk=function(){return Promise.resolve()};nk.prototype.Da=function(a,b,c){hk(14);this.g&&uk(this.g,a,b,c)};var ok=function(a,b,c){if(kk(a))return new Ij("tab",b);if(lk(a))return new Ij("desktop",b);if(ik(a)){if(!c)throw new Ej("Missing offscreen tab presentation id");return new Ij("offscreen_tab",b,a,c)}throw new Ej("Source URN does not suggest a known capture type.");};k=nk.prototype;k.Vi=function(){};k.bi=function(){};k.Yh=function(){};k.Aj=function(){};
k.Zh=function(){};k.Qg=function(){};k.ai=function(){};k.Xj=function(){return db()};k.createMediaRouteController=function(){return db()};var vk=function(a,b,c){this.h=a;this.l=b;this.g=void 0===c?null:c;this.j=null},wk=function(a){switch(a.h){case "mirror_tab":return a.g?"Casting tab ("+a.g+")":"Casting tab";case "mirror_desktop":return"Casting desktop";case "mirror_file":return"Casting local content";case "media_remoting":return a.g?"Casting media ("+a.g+")":"Casting media";case "presentation":return"Casting "+(a.g||"site");default:return""}},xk=function(a){if(a.l)return"Casting active";switch(a.h){case "mirror_tab":return"Casting tab";
case "mirror_desktop":return"Casting desktop";case "mirror_file":return"Casting local content";case "media_remoting":return"Casting media";case "presentation":return"Casting site";default:return""}};var yk=function(a){return(new Promise(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var zk=function(a,b){this.h=a;this.J=void 0===b?null:b;b=null;var c=a.mediaSource;if(ik(c)){var d="presentation";b=(new URL(c)).origin}else kk(c)?d="mirror_tab":lk(c)&&(d="mirror_desktop");this.Zc=new vk(d,a.offTheRecord,b);this.j=this.tabId=null;this.H=!1},sk=function(a,b){a.tabId!=b?(a.tabId=b,yk(b).then(function(c){a.j=c;pk(a)})):Promise.resolve()},uk=function(a,b,c,d){b==a.tabId&&("complete"==c.status||c.favIconUrl&&"complete"==d.status)&&(a.j=d,pk(a))},pk=function(a){if(a.j){a.Zc.j=a.j.title;
a.Zc.l=a.j.incognito;var b=new URL(a.j.url);"file:"==b.protocol?(a.Zc.h="mirror_file",a.Zc.g=null):(a.Zc.h=a.H?"media_remoting":"mirror_tab",a.Zc.g="https:"==b.protocol?b.origin.substr(8):b.origin)}a.h.description=wk(a.Zc);a.J&&a.J(a.h,a.Zc);a.fr()};k=zk.prototype;k.start=function(){};k.Fs=function(){return!1};k.Ms=function(){};k.stop=function(){return Promise.resolve()};k.fr=function(){};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var Ak=function(){var a=window.crypto.getRandomValues(new Uint8Array(16));return dc(a,function(b){b=b.toString(16);return 1<b.length?b:"0"+b}).join("")},Bk=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(55296==(e&64512)&&d+1<a.length&&56320==(a.charCodeAt(d+1)&64512)?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b},Ck=function(a){for(var b=
[],c=0,d=0;c<a.length;){var e=a[c++];if(128>e)b[d++]=String.fromCharCode(e);else if(191<e&&224>e){var f=a[c++];b[d++]=String.fromCharCode((e&31)<<6|f&63)}else if(239<e&&365>e){f=a[c++];var g=a[c++],h=a[c++];e=((e&7)<<18|(f&63)<<12|(g&63)<<6|h&63)-65536;b[d++]=String.fromCharCode(55296+(e>>10));b[d++]=String.fromCharCode(56320+(e&1023))}else f=a[c++],g=a[c++],b[d++]=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63)}return b.join("")};var Dk=0,Ek=0;function Fk(a){var b=0>a;a=Math.abs(a);var c=a>>>0;a=Math.floor((a-c)/4294967296);a>>>=0;b&&(a=~a>>>0,c=(~c>>>0)+1,4294967295<c&&(c=0,a++,4294967295<a&&(a=0)));Dk=c;Ek=a}
function Gk(a){var b=0>a?1:0;a=b?-a:a;if(0===a)0<1/a?Dk=Ek=0:(Ek=0,Dk=2147483648);else if(isNaN(a))Ek=0,Dk=2147483647;else if(3.4028234663852886E38<a)Ek=0,Dk=(b<<31|2139095040)>>>0;else if(1.1754943508222875E-38>a)a=Math.round(a/Math.pow(2,-149)),Ek=0,Dk=(b<<31|a)>>>0;else{var c=Math.floor(Math.log(a)/Math.LN2);a*=Math.pow(2,-c);a=Math.round(8388608*a)&8388607;Ek=0;Dk=(b<<31|c+127<<23|a)>>>0}}function Hk(a,b){return 4294967296*b+(a>>>0)}
function Ik(a,b){var c=b&2147483648;c&&(a=~a+1>>>0,b=~b>>>0,0==a&&(b=b+1>>>0));a=Hk(a,b);return c?-a:a}function Jk(a,b){function c(e,f){e=e?String(e):"";return f?"0000000".slice(e.length)+e:e}if(2097151>=b)return""+(4294967296*b+a);var d=(a>>>24|b<<8)>>>0&16777215;b=b>>16&65535;a=(a&16777215)+6777216*d+6710656*b;d+=8147497*b;b*=2;1E7<=a&&(d+=Math.floor(a/1E7),a%=1E7);1E7<=d&&(b+=Math.floor(d/1E7),d%=1E7);return c(b,0)+c(d,b)+c(a,1)}
function Kk(a,b){var c=b&2147483648;c&&(a=~a+1>>>0,b=~b+(0==a?1:0)>>>0);a=Jk(a,b);return c?"-"+a:a}function Lk(a){if(a.constructor===Uint8Array)return a;if(a.constructor===ArrayBuffer)return new Uint8Array(a);if(a.constructor===Array)return new Uint8Array(a);if(a.constructor===String)return Mk(a);if(a instanceof Uint8Array)return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);Wb("Type not convertible to Uint8Array.");return new Uint8Array(0)};var Ok=function(a,b,c){this.h=null;this.g=this.l=this.m=0;this.o=!1;a&&Nk(this,a,b,c)},Qk=function(a,b,c){if(Pk.length){var d=Pk.pop();a&&Nk(d,a,b,c);return d}return new Ok(a,b,c)};Ok.prototype.clone=function(){return Qk(this.h,this.m,this.l-this.m)};Ok.prototype.clear=function(){this.h=null;this.g=this.l=this.m=0;this.o=!1};var Nk=function(a,b,c,d){a.h=Lk(b);a.m=void 0!==c?c:0;a.l=void 0!==d?a.m+d:a.h.length;a.g=a.m};Ok.prototype.reset=function(){this.g=this.m};
var Rk=function(a,b){for(var c=128,d=0,e=0,f=0;4>f&&128<=c;f++)c=a.h[a.g++],d|=(c&127)<<7*f;128<=c&&(c=a.h[a.g++],d|=(c&127)<<28,e|=(c&127)>>4);if(128<=c)for(f=0;5>f&&128<=c;f++)c=a.h[a.g++],e|=(c&127)<<7*f+3;if(128>c)return b(d>>>0,e>>>0);Wb("Failed to read varint, encoding is invalid.");a.o=!0};
Ok.prototype.j=function(){var a=this.h;var b=a[this.g+0];var c=b&127;if(128>b)return this.g+=1,c;b=a[this.g+1];c|=(b&127)<<7;if(128>b)return this.g+=2,c;b=a[this.g+2];c|=(b&127)<<14;if(128>b)return this.g+=3,c;b=a[this.g+3];c|=(b&127)<<21;if(128>b)return this.g+=4,c;b=a[this.g+4];c|=(b&15)<<28;if(128>b)return this.g+=5,c>>>0;this.g+=5;128<=a[this.g++]&&128<=a[this.g++]&&128<=a[this.g++]&&128<=a[this.g++]&&this.g++;return c};Ok.prototype.C=function(){return this.j()};
var Sk=function(a){var b=a.h[a.g+0],c=a.h[a.g+1],d=a.h[a.g+2],e=a.h[a.g+3];a.g+=4;return(b<<0|c<<8|d<<16|e<<24)>>>0},Tk=function(a){var b=Sk(a);a=2*(b>>31)+1;var c=b>>>23&255;b&=8388607;return 255==c?b?NaN:Infinity*a:0==c?a*Math.pow(2,-149)*b:a*Math.pow(2,c-150)*(b+Math.pow(2,23))};Ok.prototype.u=function(){return this.C()};var Pk=[];var Uk=function(a){this.l=Qk(a,void 0,void 0);this.C=this.l.g;this.m=this.j=-1;this.o=!1},z=function(a){return 4==a.m};Uk.prototype.reset=function(){this.l.reset();this.m=this.j=-1};
var C=function(a){var b=a.l;if(b.g==b.l)return!1;(b=a.o)||(b=a.l,b=b.o||0>b.g||b.g>b.l);if(b)return Wb("Decoder hit an error"),!1;a.C=a.l.g;var c=a.l.j();b=c>>>3;c&=7;if(0!=c&&5!=c&&1!=c&&2!=c&&3!=c&&4!=c)return Wb("Invalid wire type: %s (at position %s)",c,a.C),a.o=!0,!1;a.j=b;a.m=c;return!0},D=function(a){switch(a.m){case 0:if(0!=a.m)Wb("Invalid wire type for skipVarintField"),D(a);else{for(a=a.l;a.h[a.g]&128;)a.g++;a.g++}break;case 1:1!=a.m?(Wb("Invalid wire type for skipFixed64Field"),D(a)):(a=
a.l,a.g+=8);break;case 2:if(2!=a.m)Wb("Invalid wire type for skipDelimitedField"),D(a);else{var b=a.l.j();a=a.l;a.g+=b}break;case 5:5!=a.m?(Wb("Invalid wire type for skipFixed32Field"),D(a)):(a=a.l,a.g+=4);break;case 3:b=a.j;do{if(!C(a)){Wb("Unmatched start-group tag: stream EOF");a.o=!0;break}if(4==a.m){a.j!=b&&(Wb("Unmatched end-group tag"),a.o=!0);break}D(a)}while(1);break;default:a.o=!0,Wb("Invalid wire encoding for field.")}};
Uk.prototype.h=function(a,b){var c=this.l.l,d=this.l.j();d=this.l.g+d;this.l.l=d;b(a,this);this.l.g=d;this.l.l=c};var Vk=function(a){return a.l.C()},Wk=function(a){return Rk(a.l,Ik)},Xk=function(a){return a.l.j()},Yk=function(a){return!!a.l.j()},E=function(a){return Rk(a.l,Ik)};
Uk.prototype.g=function(){var a=this.l.j(),b=this.l,c=b.h,d=b.g,e=d+a,f=[];for(a="";d<e;){var g=c[d++];if(128>g)f.push(g);else if(192>g)continue;else if(224>g){var h=c[d++];f.push((g&31)<<6|h&63)}else if(240>g){h=c[d++];var n=c[d++];f.push((g&15)<<12|(h&63)<<6|n&63)}else if(248>g){h=c[d++];n=c[d++];var p=c[d++];g=(g&7)<<18|(h&63)<<12|(n&63)<<6|p&63;g-=65536;f.push((g>>10&1023)+55296,(g&1023)+56320)}8192<=f.length&&(a+=String.fromCharCode.apply(null,f),f.length=0)}if(8192>=f.length)f=String.fromCharCode.apply(null,
f);else{c="";for(e=0;e<f.length;e+=8192)c+=String.fromCharCode.apply(null,Ac(f,e,e+8192));f=c}b.g=d;return a+f};var Zk=function(a){var b=a.l.j();a=a.l;if(0>b||a.g+b>a.h.length)a.o=!0,Wb("Invalid byte length!"),b=new Uint8Array(0);else{var c=a.h.subarray(a.g,a.g+b);a.g+=b;b=c}return b},$k=function(a,b){var c=a.l.j();c=a.l.g+c;for(var d=[];a.l.g<c;)d.push(b.call(a.l));return d},al=function(a){return $k(a,a.l.u)};var bl=function(){this.g=[]};bl.prototype.length=function(){return this.g.length};bl.prototype.end=function(){var a=this.g;this.g=[];return a};
var cl=function(a){for(var b=Dk,c=Ek;0<c||127<b;)a.g.push(b&127|128),b=(b>>>7|c<<25)>>>0,c>>>=7;a.g.push(b)},dl=function(a,b){for(;127<b;)a.g.push(b&127|128),b>>>=7;a.g.push(b)},el=function(a,b){if(0<=b)dl(a,b);else{for(var c=0;9>c;c++)a.g.push(b&127|128),b>>=7;a.g.push(1)}},fl=function(a,b){a.g.push(b>>>0&255);a.g.push(b>>>8&255);a.g.push(b>>>16&255);a.g.push(b>>>24&255)};var gl={},hl=null,jl=function(a){var b;void 0===b&&(b=0);il();b=gl[b];for(var c=[],d=0;d<a.length;d+=3){var e=a[d],f=d+1<a.length,g=f?a[d+1]:0,h=d+2<a.length,n=h?a[d+2]:0,p=e>>2;e=(e&3)<<4|g>>4;g=(g&15)<<2|n>>6;n&=63;h||(n=64,f||(g=64));c.push(b[p],b[e],b[g]||"",b[n]||"")}return c.join("")},Mk=function(a){var b=a.length,c=3*b/4;c%3?c=Math.floor(c):-1!="=.".indexOf(a[b-1])&&(c=-1!="=.".indexOf(a[b-2])?c-2:c-1);var d=new Uint8Array(c),e=0;kl(a,function(f){d[e++]=f});return d.subarray(0,e)},kl=function(a,
b){function c(n){for(;d<a.length;){var p=a.charAt(d++),r=hl[p];if(null!=r)return r;if(!Sc(p))throw Error("Unknown base64 encoding at char: "+p);}return n}il();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),h=c(64);if(64===h&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=h&&b(g<<6&192|h))}},il=function(){if(!hl){hl={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],c=0;5>c;c++){var d=a.concat(b[c].split(""));gl[c]=d;for(var e=
0;e<d.length;e++){var f=d[e];void 0===hl[f]&&(hl[f]=e)}}}};var ll=function(){this.m=[];this.j=0;this.h=new bl;this.o=[]},nl=function(a,b){ml(a,b,2);b=a.h.end();a.m.push(b);a.j+=b.length;b.push(a.j);return b},ol=function(a,b){var c=b.pop();for(c=a.j+a.h.length()-c;127<c;)b.push(c&127|128),c>>>=7,a.j++;b.push(c);a.j++};ll.prototype.reset=function(){this.m=[];this.h.end();this.j=0;this.o=[]};
var pl=function(a){for(var b=new Uint8Array(a.j+a.h.length()),c=a.m,d=c.length,e=0,f=0;f<d;f++){var g=c[f];b.set(g,e);e+=g.length}c=a.h.end();b.set(c,e);a.m=[b];return b},ml=function(a,b,c){dl(a.h,8*b+c)};ll.prototype.g=function(a,b){null!=b&&(ql(a,b,-2147483648<=b&&2147483648>b),null!=b&&(rl(a,b),ml(this,a,0),el(this.h,b)))};var sl=function(a,b,c){null!=c&&(ql(b,c,-9223372036854775808<=c&&0x7fffffffffffffff>c),null!=c&&(ml(a,b,0),a=a.h,Fk(c),cl(a)))};
ll.prototype.l=function(a,b){null!=b&&(ql(a,b,0<=b&&4294967296>b),null!=b&&(ml(this,a,0),dl(this.h,b)))};
var tl=function(a,b,c){null!=c&&(ql(b,c,0<=c&&1.8446744073709552E19>c),null!=c&&(ml(a,b,0),a=a.h,Fk(c),cl(a)))},ul=function(a,b,c){null!=c&&(ql(b,c,0<=c&&4294967296>c),ml(a,b,5),fl(a.h,c))},vl=function(a,b,c){null!=c&&(ml(a,b,5),a=a.h,Gk(c),fl(a,Dk))},wl=function(a,b,c){if(null!=c){ml(a,b,1);a=a.h;var d=c;d=(c=0>d?1:0)?-d:d;if(0===d)Ek=0<1/d?0:2147483648,Dk=0;else if(isNaN(d))Ek=2147483647,Dk=4294967295;else if(1.7976931348623157E308<d)Ek=(c<<31|2146435072)>>>0,Dk=0;else if(2.2250738585072014E-308>
d)d/=Math.pow(2,-1074),Ek=(c<<31|d/4294967296)>>>0,Dk=d>>>0;else{var e=d;b=0;if(2<=e)for(;2<=e&&1023>b;)b++,e/=2;else for(;1>e&&-1022<b;)e*=2,b--;d*=Math.pow(2,-b);Ek=(c<<31|b+1023<<20|1048576*d&1048575)>>>0;Dk=4503599627370496*d>>>0}fl(a,Dk);fl(a,Ek)}},F=function(a,b,c){null!=c&&(ql(b,c,"boolean"===typeof c||"number"===typeof c),ml(a,b,0),a.h.g.push(c?1:0))},G=function(a,b,c){null!=c&&(c=parseInt(c,10),rl(b,c),ml(a,b,0),el(a.h,c))},H=function(a,b,c){if(null!=c){b=nl(a,b);for(var d=a.h,e=0;e<c.length;e++){var f=
c.charCodeAt(e);if(128>f)d.g.push(f);else if(2048>f)d.g.push(f>>6|192),d.g.push(f&63|128);else if(65536>f)if(55296<=f&&56319>=f&&e+1<c.length){var g=c.charCodeAt(e+1);56320<=g&&57343>=g&&(f=1024*(f-55296)+g-56320+65536,d.g.push(f>>18|240),d.g.push(f>>12&63|128),d.g.push(f>>6&63|128),d.g.push(f&63|128),e++)}else d.g.push(f>>12|224),d.g.push(f>>6&63|128),d.g.push(f&63|128)}ol(a,b)}},xl=function(a,b){if(null!=b){b=Lk(b);ml(a,1,2);dl(a.h,b.length);var c=a.h.end();a.m.push(c);a.m.push(b);a.j+=c.length+
b.length}},I=function(a,b,c,d){null!=c&&(b=nl(a,b),d(c,a),ol(a,b))};ll.prototype.C=function(a,b,c){null!=b&&(ml(this,1,3),ml(this,2,0),el(this.h,a),a=nl(this,3),c(b,this),ol(this,a),ml(this,1,4))};
var yl=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=b,g=c[d];null!=g&&(rl(f,g),ml(e,f,0),el(e.h,g))}},zl=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)ul(a,b,c[d])},Al=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)G(a,b,c[d])},Bl=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)H(a,b,c[d])},Cl=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++){var f=nl(a,b);d(c[e],a);ol(a,f)}},Dl=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++)ml(a,b,3),d(c[e],
a),ml(a,b,4)},El=function(a,b,c){if(null!=c&&c.length){for(var d=nl(a,b),e=0;e<c.length;e++)rl(b,c[e]),el(a.h,c[e]);ol(a,d)}},Fl=function(a,b,c){if(null!=c&&c.length)for(ml(a,b,2),dl(a.h,4*c.length),b=0;b<c.length;b++){var d=a.h;Gk(c[b]);fl(d,Dk)}},Gl=function(a,b,c){if(null!=c&&c.length){b=nl(a,b);for(var d=0;d<c.length;d++)el(a.h,c[d]);ol(a,b)}};function rl(a,b){ql(a,b,b===Math.floor(b));ql(a,b,-2147483648<=b&&2147483648>b)}function ql(a,b,c){c||Wb("for ["+b+"] at ["+a+"]")};var Hl=function(a,b,c,d){this.fj=a;this.qp=b;this.Sc=c;this.Im=d;this.iq=0};var Il=function(a,b,c){var d=Uk.prototype.h,e=ll.prototype.C;this.ll=a;this.Sk=d;this.Tk=e;this.Ro=b;this.Qo=c;this.pA=!1};var Kl=function(a){this.g=a;this.map={};this.h=!0;if(0<this.g.length){for(a=0;a<this.g.length;a++){var b=this.g[a],c=b[0];this.map[c.toString()]=new Jl(c,b[1])}this.h=!0}};k=Kl.prototype;k.isFrozen=function(){return!1};k.Gc=function(){var a;if(!this.h){this.g.length=0;var b=Ll(this);b.sort();for(var c=0;c<b.length;c++){var d=this.map[b[c]];(a=d.g)&&a.Gc();this.g.push([d.key,d.value])}this.h=!0}return this.g};k.clear=function(){this.map={};this.h=!1};
k.entries=function(){var a=[],b=Ll(this);b.sort();for(var c=0;c<b.length;c++){var d=this.map[b[c]];a.push([d.key,d.value])}return new Ml(a)};k.keys=function(){var a=[],b=Ll(this);b.sort();for(var c=0;c<b.length;c++)a.push(this.map[b[c]].key);return new Ml(a)};k.values=function(){var a=[],b=Ll(this);b.sort();for(var c=0;c<b.length;c++)a.push(this.map[b[c]].value);return new Ml(a)};
k.forEach=function(a,b){var c=Ll(this);c.sort();for(var d=0;d<c.length;d++){var e=this.map[c[d]];a.call(b,e.value,e.key,this)}};k.set=function(a,b){var c=new Jl(a);c.value=b;this.map[a.toString()]=c;this.h=!1;return this};k.get=function(a){if(a=this.map[a.toString()])return a.value};k.has=function(a){return a.toString()in this.map};
var Ll=function(a){a=a.map;var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},Jl=function(a,b){this.key=a;this.value=b;this.g=void 0},Ml=function(a){this.h=0;this.g=a};Ml.prototype.next=function(){return this.h<this.g.length?{done:!1,value:this.g[this.h++]}:{done:!0,value:void 0}};"undefined"!=typeof Symbol&&"undefined"!=typeof Symbol.iterator&&(Ml.prototype[Symbol.iterator]=function(){return this});var J=function(){},Nl="function"==typeof Uint8Array,L=function(a,b,c,d,e,f){a.g=null;b||(b=c?[c]:[]);a.G=c?String(c):void 0;a.m=0===c?-1:0;a.j=b;a:{c=a.j.length;b=-1;if(c&&(b=c-1,c=a.j[b],!(null===c||"object"!=typeof c||Array.isArray(c)||Nl&&c instanceof Uint8Array))){a.l=b-a.m;a.h=c;break a}-1<d?(a.l=Math.max(d,b+1-a.m),a.h=null):a.l=Number.MAX_VALUE}a.C={};if(e)for(d=0;d<e.length;d++)b=e[d],b<a.l?(b+=a.m,a.j[b]=a.j[b]||Ol):(Pl(a),a.h[b]=a.h[b]||Ol);if(f&&f.length)for(d=0;d<f.length;d++)Ql(a,f[d])},
Ol=Object.freeze?Object.freeze([]):[],Pl=function(a){var b=a.l+a.m;a.j[b]||(a.h=a.j[b]={})},Rl=function(a,b,c,d,e){for(var f in c){var g=c[f],h=d.call(a,g);if(null!=h){for(var n in g.qp)if(g.qp.hasOwnProperty(n))break;var p=n;if(g.Im)if(g.iq){g=g.Im;for(var r=e,y=[],A=0;A<h.length;A++)y[A]=g.call(h[A],r,h[A]);h=y}else h=g.Im(e,h);b[p]=h}}},Sl=function(a,b,c,d){for(var e in c){var f=c[e],g=f.ll;if(!f.Tk)throw Error("Message extension present that was generated without binary serialization support");
var h=d.call(a,g);if(null!=h)if(g.Sc)if(f.Ro)f.Tk.call(b,g.fj,h,f.Ro);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else f.Tk.call(b,g.fj,h)}},Tl=function(a,b,c,d,e){var f=c[b.j];if(f){c=f.ll;if(!f.Sk)throw Error("Deserializing extension whose generated code does not support binary format");if(c.Sc){var g=new c.Sc;f.Sk.call(b,g,f.Qo)}else g=f.Sk.call(b);c.iq&&!f.pA?(b=d.call(a,c))?b.push(g):e.call(a,
c,[g]):e.call(a,c,g)}else D(b)},M=function(a,b){if(b<a.l){b+=a.m;var c=a.j[b];return c!==Ol?c:a.j[b]=[]}if(a.h)return c=a.h[b],c===Ol?a.h[b]=[]:c},N=function(a,b){return null!=M(a,b)},Ul=function(a,b){a=M(a,b);return null==a?a:+a},Vl=function(a,b){a=M(a,b);return null==a?a:!!a},Wl=function(a,b){var c=M(a,b);a.C||(a.C={});if(!a.C[b]){for(var d=0;d<c.length;d++)c[d]=+c[d];a.C[b]=!0}return c},Xl=function(a){if(null==a||a instanceof Uint8Array)return a;if("string"===typeof a)return Mk(a);Wb("Cannot coerce to Uint8Array: "+
Qa(a));return null},Yl=function(a,b,c){a=M(a,b);return null==a?c:a},Zl=function(a,b,c){return Yl(a,b,void 0===c?0:c)},O=function(a,b,c){return Yl(a,b,void 0===c?"":c)},P=function(a,b,c){c=void 0===c?!1:c;a=Vl(a,b);return null==a?c:a},$l=function(a,b,c){c=void 0===c?0:c;a=Ul(a,b);return null==a?c:a},am=function(a,b,c){a.g||(a.g={});if(b in a.g)return a.g[b];var d=M(a,b);if(!d){if(c)return;d=[];Q(a,b,d)}c=new Kl(d);return a.g[b]=c},Q=function(a,b,c){b<a.l?a.j[b+a.m]=c:(Pl(a),a.h[b]=c);return a},bm=
function(a,b){return Q(a,b,void 0)},cm=function(a,b){R(a,b,void 0)},em=function(a,b,c){return dm(a,b,c,0)},fm=function(a,b,c){return dm(a,b,c,!1)},T=function(a,b,c){return dm(a,b,c,"")},gm=function(a,b,c){return dm(a,b,c,0)},dm=function(a,b,c,d){c!==d?Q(a,b,c):b<a.l?a.j[b+a.m]=null:(Pl(a),delete a.h[b]);return a},hm=function(a,b,c){M(a,b).push(c)},im=function(a,b,c,d){(c=Ql(a,c))&&c!==b&&void 0!==d&&(a.g&&c in a.g&&(a.g[c]=void 0),Q(a,c,void 0));Q(a,b,d)},Ql=function(a,b){for(var c,d,e=0;e<b.length;e++){var f=
b[e],g=M(a,f);null!=g&&(c=f,d=g,Q(a,f,void 0))}return c?(Q(a,c,d),c):0},U=function(a,b,c,d){a.g||(a.g={});if(!a.g[c]){var e=M(a,c);if(d||e)a.g[c]=new b(e)}return a.g[c]},V=function(a,b,c){a.g||(a.g={});if(!a.g[c]){for(var d=M(a,c),e=[],f=0;f<d.length;f++)e[f]=new b(d[f]);a.g[c]=e}b=a.g[c];b==Ol&&(b=a.g[c]=[]);return b},R=function(a,b,c){a.g||(a.g={});var d=c?c.Gc():c;a.g[b]=c;return Q(a,b,d)},jm=function(a,b,c,d){a.g||(a.g={});var e=d?d.Gc():d;a.g[b]=d;im(a,b,c,e)},km=function(a,b,c){a.g||(a.g={});
c=c||[];for(var d=[],e=0;e<c.length;e++)d[e]=c[e].Gc();a.g[b]=c;return Q(a,b,d)},lm=function(a,b,c,d){var e=V(a,d,b);c=c?c:new d;a=M(a,b);e.push(c);a.push(c.Gc());return c};J.prototype.Gc=function(){if(this.g)for(var a in this.g){var b=this.g[a];if(Array.isArray(b))for(var c=0;c<b.length;c++)b[c]&&b[c].Gc();else b&&b.Gc()}return this.j};
J.prototype.ra=Nl?function(){var a=Uint8Array.prototype.toJSON;Uint8Array.prototype.toJSON=function(){return jl(this)};try{return JSON.stringify(this.j&&this.Gc(),mm)}finally{Uint8Array.prototype.toJSON=a}}:function(){return JSON.stringify(this.j&&this.Gc(),mm)};var mm=function(a,b){return"number"!==typeof b||!isNaN(b)&&Infinity!==b&&-Infinity!==b?b:String(b)},nm=function(a,b){return new a(b?JSON.parse(b):null)};J.prototype.toString=function(){return this.Gc().toString()};
J.prototype.getExtension=function(a){Pl(this);this.g||(this.g={});var b=a.fj;return a.Sc?(!this.g[b]&&this.h[b]&&(this.g[b]=new a.Sc(this.h[b])),this.g[b]):this.h[b]};J.prototype.D=function(a,b){this.g||(this.g={});Pl(this);var c=a.fj;a.Sc?(this.g[c]=b,this.h[c]=b?b.Gc():b):this.h[c]=b;return this};
var pm=function(a,b){return a==b||!(!a||!b)&&a instanceof b.constructor&&om(a.Gc(),b.Gc())},qm=function(a,b){a=a||{};b=b||{};var c={},d;for(d in a)c[d]=0;for(d in b)c[d]=0;for(d in c)if(!om(a[d],b[d]))return!1;return!0},om=function(a,b){if(a==b)return!0;if(!Sa(a)||!Sa(b))return"number"===typeof a&&isNaN(a)||"number"===typeof b&&isNaN(b)?String(a)==String(b):!1;if(a.constructor!=b.constructor)return!1;if(Nl&&a.constructor===Uint8Array){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=
b[c])return!1;return!0}if(a.constructor===Array){var d=void 0,e=void 0,f=Math.max(a.length,b.length);for(c=0;c<f;c++){var g=a[c],h=b[c];g&&g.constructor==Object&&(d=g,g=void 0);h&&h.constructor==Object&&(e=h,h=void 0);if(!om(g,h))return!1}return d||e?(d=d||{},e=e||{},qm(d,e)):!0}if(a.constructor===Object)return qm(a,b);throw Error("Invalid type in JSPB array");};J.prototype.clone=function(){return rm(this)};
var rm=function(a){var b=sm(a.Gc()),c=L;L=function(d,e,f,g,h,n){c(d,b,f,g,h,n);L=c};a=new a.constructor(b);L!==c&&(L=c);return a},sm=function(a){if(Array.isArray(a)){for(var b=Array(a.length),c=0;c<a.length;c++){var d=a[c];null!=d&&(b[c]="object"==typeof d?sm(d):d)}return b}if(Nl&&a instanceof Uint8Array)return new Uint8Array(a);b={};for(c in a)d=a[c],null!=d&&(b[c]="object"==typeof d?sm(d):d);return b},tm={},um={};var vm=function(a){L(this,a,0,-1,null,null)};x(vm,J);var wm=function(a){L(this,a,0,-1,null,null)};x(wm,J);
var zm=function(a,b){for(;C(b)&&!z(b);)switch(b.j){case 1:var c=Wk(b);xm(a,c);break;case 2:c=b.g();Q(a,2,c);break;case 3:c=new wm;b.h(c,ym);R(a,3,c);break;default:D(b)}return a},Bm=function(a,b){var c=M(a,1);null!=c&&sl(b,1,c);c=M(a,2);null!=c&&H(b,2,c);c=U(a,wm,3);null!=c&&I(b,3,c,Am)},ym=function(a,b){for(;C(b)&&!z(b);)switch(b.j){case 1:var c=b.g();Q(a,1,c);break;case 2:c=Wk(b);Q(a,2,c);break;default:D(b)}return a},Am=function(a,b){var c=M(a,1);null!=c&&H(b,1,c);c=M(a,2);null!=c&&sl(b,2,c)};
vm.prototype.ab=function(){return M(this,1)};var xm=function(a,b){return Q(a,1,b)};var Cm=function(a,b){this.type="cast_app";this.originId=window["castApp.eventPage.Message.OriginID"]||void 0;this.subtype=a;this.devices=b;this.logRecord=this.deviceJustSetUp=void 0};w("castApp.eventPage.Message",Cm);var Dm=function(a,b,c){this.ipAddress=a;this.appId=b;this.sessionId=c};Cm.DeviceData=Dm;Cm.DeviceJustSetUp=function(a,b,c,d){this.ipAddress=a;this.name=b;this.udn=c;this.modelName=d};Cm.DeviceCapabilities=function(){};
Cm.LogRecord=function(a,b,c,d){this.levelValue=a;this.msg=b;this.loggerName=c;this.time=d};var Em=function(a,b){this.type=a;this.entryPoint=b};w("castApp.frontEnd.ExtensionMessage",Em);var Fm=function(a){return"urn:x-cast:com.google.cast."+a},Gm=Fm("tp.connection"),Hm=Fm("receiver"),Im=Fm("remoting"),Jm=Fm("media"),Km=Fm("webrtc"),Lm=Fm("broadcast"),Mm=yd({oR:Gm,pR:Fm("tp.heartbeat"),vN:Hm,QN:Im,jK:Jm,qK:Fm("media.universalRemote.optIn"),vS:Km,AE:Lm});var Nm=function(a){return"available"==a||"available_rescan"==a};var Om=function(a,b,c,d,e){this.id=a;this.friendlyName=b;this.iconType=c||"generic";this.description=void 0===d?null:d;this.domain=void 0===e?null:e};var Pm=window.localStorage,Qm=0,Sm=function(a){return(a=window.localStorage.getItem(Rm(a,!1)))?JSON.parse(a):null},Tm=function(a){return(a=window.localStorage.getItem(Rm(a,!0)))?JSON.parse(a):null},Vm=function(a){if(Um.has(a.fb()))throw Error("Duplicate instance name "+a.fb());Um.set(a.fb(),a);a.hc()},an=function(a){for(var b=0,c=m(Object.keys(Pm)),d=c.next();!d.done;d=c.next()){d=d.value;var e=d.length+window.localStorage.getItem(d).length;d.startsWith("mr.")?Qm+=e:b+=e}Wm=a;(window.localStorage.getItem("version")&&
window.localStorage.getItem("version")!==chrome.runtime.getManifest().version||Xm(a))&&Ym();Zm.info("initialize: "+Qm+" chars used, "+b+" other chars");chrome.runtime.onSuspend.addListener($m)},Wm=null,Zm=hb("mr.PersistentDataManager"),Um=new Map,Rm=function(a,b){return"mr."+(b?"persistent.":"temp.")+a.fb()},Xm=function(a){return!!window.localStorage.getItem("mrInstanceId")&&window.localStorage.getItem("mrInstanceId")!==a},$m=function(){Zm.info("onSuspend");bn("version",chrome.runtime.getManifest().version);
Wm&&bn("mrInstanceId",Wm);for(var a=Um.get("LogManager"),b=m(Um),c=b.next();!c.done;c=b.next())c=m(c.value),c.next(),c=c.next().value,c!=a&&cn(c);a&&cn(a)},cn=function(a){try{var b=a.bc();b&&void 0!=b[0]&&bn(Rm(a,!1),JSON.stringify(b[0]));b&&void 0!=b[1]&&bn(Rm(a,!0),JSON.stringify(b[1]))}catch(c){Zm.error("Error while saving data for "+a.fb()+": "+c.message)}},bn=function(a,b){var c=window.localStorage.getItem(a);c=null!=c?b.length-c.length:a.length+b.length;52E5<Qm+c&&(Zm.K("Unable to write "+c+
" chars"),Ym());if(52E5<Qm+c)throw Zm.error("Unable to write "+c+" chars after clearing temporary"),Error("Setting the value of '"+a+"' would exceed the quota, according to accounting.");try{window.localStorage.setItem(a,b)}catch(d){throw Error("Setting the value of '"+a+"' would exceed the quota, according to the browser.");}Qm+=c},dn=function(a){a=0==a.size%2?new Blob([a,new Uint8Array([0,0])]):new Blob([a,new Uint8Array([1])]);return new Promise(function(b,c){var d=new FileReader;d.onloadend=function(){if(d.error)c(d.error);
else try{for(var e=d.result,f=[],g=0,h=e.byteLength;g<h;g+=8192)f.push(String.fromCharCode.apply(null,new Uint16Array(e,g,Math.min(h-g,8192)/2)));bn("mr.temp.mirror.cast.Service.eventsBlob",f.join(""));b()}catch(n){c(n)}};d.readAsArrayBuffer(a)})},Ym=function(){for(var a=m(Object.keys(Pm)),b=a.next();!b.done;b=a.next())b=b.value,b.startsWith("mr.temp.")&&(Qm-=b.length+window.localStorage.getItem(b).length,delete window.localStorage[b]);Zm.info("removeTemporary_: "+Qm+" chars used")};var en=(new Map).set("+","-").set("/","_").set("=",".");(new Map).set("-","+").set("_","/").set(".","=");function fn(a){return btoa(String.fromCharCode.apply(String,q(a))).replace(/[+/=]/g,function(b){return en.get(b)})};var gn=function(){this.g=[];this.m=[];this.o=[];this.j=[];this.j[0]=128;for(var a=1;64>a;++a)this.j[a]=0;this.l=this.h=0;this.reset()};gn.prototype.reset=function(){this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.l=this.h=0};
var hn=function(a,b,c){c=void 0===c?0:c;var d=a.o;if("string"===typeof b)for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(b=16;80>b;b++)c=d[b-3]^d[b-8]^d[b-14]^d[b-16],d[b]=(c<<1|c>>>31)&4294967295;b=a.g[0];c=a.g[1];e=a.g[2];for(var f=a.g[3],g=a.g[4],h,n,p=0;80>p;p++)40>p?20>p?(h=f^c&(e^f),n=1518500249):(h=c^e^f,n=1859775393):60>p?(h=c&e|f&(c|e),n=2400959708):(h=
c^e^f,n=3395469782),h=(b<<5|b>>>27)+h+g+n+d[p]&4294967295,g=f,f=e,e=(c<<30|c>>>2)&4294967295,c=b,b=h;a.g[0]=a.g[0]+b&4294967295;a.g[1]=a.g[1]+c&4294967295;a.g[2]=a.g[2]+e&4294967295;a.g[3]=a.g[3]+f&4294967295;a.g[4]=a.g[4]+g&4294967295};
gn.prototype.update=function(a,b){b=void 0===b?a.length:b;for(var c=b-64,d=0,e=this.m,f=this.h;d<b;){if(0==f)for(;d<=c;)hn(this,a,d),d+=64;if("string"===typeof a)for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,64==f){hn(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,64==f){hn(this,e);f=0;break}}this.h=f;this.l+=b};
gn.prototype.digest=function(){var a=[],b=8*this.l;56>this.h?this.update(this.j,56-this.h):this.update(this.j,64-(this.h-56));for(var c=63;56<=c;c--)this.m[c]=b&255,b/=256;hn(this,this.m);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.g[c]>>d&255,++b;return a};var jn=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)};var ln=function(){this.l=jn();this.h=new kn(null,null);this.g=new kn(null,null);this.m=[];this.j=0;Vm(this)},sn=function(){rn||(rn=new ln);return rn},tn=function(a,b){b=b.toLowerCase();var c=new gn;c.update(b);c.update(a.l);return"r"+fn(c.digest())},un=function(){var a=sn();return a.h.model?a.h:a.g.model?a.g:new kn(null,null)};ln.prototype.fb=function(){return"SinkUtils"};
ln.prototype.bc=function(){return[{recentLaunchedDevice:this.h,recentDiscoveredDevice:this.g},{receiverIdToken:this.l,fixedIpList:this.m.join(","),castControlPort:this.j}]};ln.prototype.hc=function(){var a=Sm(this);a&&(this.h=a.recentLaunchedDevice||new kn(null,null),this.g=a.recentDiscoveredDevice||new kn(null,null));if(a=Tm(this))this.l=a.receiverIdToken||jn(),this.m=a.fixedIpList&&a.fixedIpList.split(",")||[],this.j=a.castControlPort||0};var rn=null,kn=function(a,b){this.model=a;this.ip=b};var vn=function(a,b,c,d,e,f){this.h=new Om(a,b,d&1?"cast":d&32?"cast_audio_group":"cast_audio");this.l=c||null;this.g=d||null;this.o=e||null;this.m=f||null;this.j={};this.gl=!1};vn.prototype.update=function(a,b,c,d){var e=!1;this.h.friendlyName!=a&&(this.h.friendlyName=a,e=!0);null!=b&&this.o!=b&&(this.o=b,e=!0);null!=c&&this.m!=c&&(this.m=c,e=!0);null!=d&&this.g!=d&&(this.g=d,e=!0);return e};vn.prototype.getId=function(){return this.h.id};vn.prototype.xd=function(){return this.o};
vn.prototype.Nb=function(){return this.m};var wn=function(a,b){return a.j[b]||"unknown"};var xn="StopIteration"in Ha?Ha.StopIteration:{message:"StopIteration",stack:""},yn=function(){};yn.prototype.next=function(){throw xn;};yn.prototype.kc=function(){return this};
var zn=function(a){if(a instanceof yn)return a;if("function"==typeof a.kc)return a.kc(!1);if(Ra(a)){var b=0,c=new yn;c.next=function(){for(;;){if(b>=a.length)throw xn;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");},An=function(a,b,c){if(Ra(a))try{$b(a,b,c)}catch(d){if(d!==xn)throw d;}else{a=zn(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(d){if(d!==xn)throw d;}}},Bn=function(a,b){a=zn(a);try{for(;!b.call(void 0,a.next(),void 0,a););}catch(c){if(c!==xn)throw c;}},Cn=function(a){if(Ra(a))return yc(a);
a=zn(a);var b=[];An(a,function(c){b.push(c)});return b};var En=function(a,b){this.h={};this.g=[];this.l=this.j=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&Dn(this,a)};k=En.prototype;k.Ba=function(){return this.j};k.La=function(){Fn(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};k.Ac=function(){Fn(this);return this.g.concat()};
k.Cg=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(Gn(this.h,c)&&this.h[c]==a)return!0}return!1};k.equals=function(a,b){if(this===a)return!0;if(this.j!=a.Ba())return!1;b=b||Hn;Fn(this);for(var c,d=0;c=this.g[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};var Hn=function(a,b){return a===b};En.prototype.dc=function(){return 0==this.j};En.prototype.clear=function(){this.h={};this.l=this.j=this.g.length=0};
En.prototype.remove=function(a){return Gn(this.h,a)?(delete this.h[a],this.j--,this.l++,this.g.length>2*this.j&&Fn(this),!0):!1};var Fn=function(a){if(a.j!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Gn(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.j!=a.g.length){var e={};for(c=b=0;b<a.g.length;)d=a.g[b],Gn(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}};En.prototype.get=function(a,b){return Gn(this.h,a)?this.h[a]:b};
En.prototype.set=function(a,b){Gn(this.h,a)||(this.j++,this.g.push(a),this.l++);this.h[a]=b};var Dn=function(a,b){if(b instanceof En)for(var c=b.Ac(),d=0;d<c.length;d++)a.set(c[d],b.get(c[d]));else for(c in b)a.set(c,b[c])};En.prototype.forEach=function(a,b){for(var c=this.Ac(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};En.prototype.clone=function(){return new En(this)};var In=function(a){Fn(a);for(var b={},c=0;c<a.g.length;c++){var d=a.g[c];b[d]=a.h[d]}return b};
En.prototype.kc=function(a){Fn(this);var b=0,c=this.l,d=this,e=new yn;e.next=function(){if(c!=d.l)throw Error("The map has changed since the iterator was created");if(b>=d.g.length)throw xn;var f=d.g[b++];return a?f:d.h[f]};return e};var Gn=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Jn=function(a,b){this.h=b;this.j=a;this.j.ub=this.ub.bind(this);this.g=new En;this.l=new En;this.s=hb("mr.cast.SinkDiscoveryService");this.aj={Mo:0,oq:0}};t(Jn,Uj);Jn.prototype.init=function(){Vm(this);ek("mr.cast.SinkDiscoveryService",this)};
var Qn=function(a,b){a.s.info("addSinks returned "+b.length+" sinks");a.s.ua(function(){return"....the list is: "+JSON.stringify(b)});var c=new Set(a.g.Ac());b.forEach(function(e){var f=e.sink_id;var g=e.extra_data.cast_media_sink,h=g.ip_endpoint?g.ip_endpoint.address:g.ip_address,n=g.ip_endpoint?g.ip_endpoint.port:sn().j||8009;f=new vn(f,e.name,g.model_name,g.capabilities,h.address_bytes.join("."),n);g=a.g.get(f.getId());h=a.j;e=e.extra_data.cast_media_sink.cast_channel_id;n=f.getId();var p=h.h.get(n);
if(!p||p.channelId!=e){Kn.info("Added cast channel "+e+" to receiver: "+n);p&&h.g.remove(p.channelId);p={auth:"ssl_verified",ipAddress:f.xd(),port:f.Nb()};p={channelId:e,readyState:"open",keepAlive:!0,audioOnly:!(f.g&1),connectInfo:p};h.h.set(n,p);h.g.set(e,n);var r=h.l.get(n);r&&r.channelId!=e&&(Kn.info("Re-connected to receiver: "+f.getId()),Ln(h.j,r,p),Mn(h.o.ad,f,!0));h.l.set(n,p)}if(g){if(h=g.update(f.h.friendlyName,f.xd(),f.Nb(),f.g))g.gl=!1;h&&a.h.Rh(g)}else a.s.info("Adding sink "+f.getId()),
Nn(a,f),g=a.h,g.vc.onSinkAvailabilityUpdated(g,1),g.Rh(f),Mn(g.ad,f),sn().g=new kn(f.l,f.xd());c.delete(f.getId())});c.forEach(function(e){var f=a.j,g=f.l.get(e);g&&(On(f.j,g),f.l.remove(e));Pn(a,e)});var d=a.g.Ba();a.aj={Mo:d,oq:d}},Nn=function(a,b){var c=a.g.get(b.getId()),d=null,e=b.xd(),f=b.Nb();null!=e&&null!=f&&(d=a.l.get(e+":"+f));if(c&&!d){var g=b.xd(),h=b.Nb();g&&h&&a.l.remove(g+":"+h)}d&&!c&&a.g.remove(d.getId());a.g.set(b.getId(),b);null!=e&&null!=f&&a.l.set(e+":"+f,b)},Pn=function(a,b){var c=
a.g.get(b);if(c){a.s.info("Removing sink "+b);a.g.remove(b);b=c.xd();var d=c.Nb();null!=b&&null!=d&&a.l.remove(b+":"+d);a.h.Vl(c)}},Sn=function(a){a.s.info("Pruning inactive sinks.");var b=new Set;a.g.forEach(function(c){Rn(a.j,c)||b.add(c.getId())});b.forEach(function(c){return Pn(a,c)})};Jn.prototype.ub=function(a){return this.g.get(a,null)};var Tn=function(a,b){var c=[];An(a.g.kc(!1),function(d){Nm(wn(d,b))&&c.push(d)});return c};k=Jn.prototype;k.Rh=function(a){this.h.Rh(a)};k.Gg=function(){return this.g.La()};
k.fb=function(){return"cast.SinkDiscoveryService"};k.bc=function(){var a=this,b={};An(this.g.kc(!0),function(c){var d=a.g.get(c);d={id:d.getId(),ip:d.xd(),port:d.Nb(),friendlyName:d.h.friendlyName,modelName:d.l,capabilities:d.g,discoveredByDial:d.gl,appStatusMap:d.j};b[c]=d});return[new Un(b,this.aj)]};
k.hc=function(){var a=Sm(this);if(a&&4==a.version){this.aj=a.deviceCounts;a=a.sinkMap;for(var b in a){var c=void 0,d=a[b],e=new vn("",d.friendlyName,d.modelName,d.capabilities,d.ip,d.port);e.h.id=d.id;e.gl=d.discoveredByDial;e.j=d.appStatusMap;for(c in e.j)"unavailable"==e.j[c]&&(e.j[c]="unavailable_rescan");c=e;this.ub(c.getId())||Nn(this,c)}Sn(this)}};var Un=function(a,b){this.sinkMap=a;this.deviceCounts=b;this.version=4};var Vn={STOP_MEDIA:"STOP",MEDIA_SET_VOLUME:"SET_VOLUME",MEDIA_GET_STATUS:"GET_STATUS"};var Wn=function(){this.type="GET_STATUS";this.requestId=0};var Xn=function(a,b){this.requestId=a;this.Hm=b;this.Gs=null};Xn.prototype.g=function(){};var Yn=function(){this.g=new En},Zn=function(a,b){a.g.set(b.requestId,b);b.Gs=setTimeout(function(){a.g.remove(b.requestId);b.g()},b.Hm)},$n=function(a,b){var c=a.g.get(b);if(!c)return null;clearTimeout(c.Gs);a.g.remove(b);return c};var ao=function(a,b,c){this.type="APPLICATION_BROADCAST";this.requestId=0;this.appIds=a;this.namespace=b;this.message=c};var bo=function(a){this.type="LAUNCH";this.requestId=0;this.appId=a;this.language=null};var co=function(a){this.type="STOP";this.requestId=0;this.sessionId=a||null};var eo=function(a){this.h=a;this.g=1E3*Math.floor(1E6*Math.random())},fo=function(a){var b=a.g++;0==b&&(b=a.g++);return b};eo.prototype.fb=function(){return"IdGenerator."+this.h};eo.prototype.bc=function(){return[this.g]};eo.prototype.hc=function(){var a=Sm(this);a&&(this.g=a)};var go=function(a,b){this.h=a;this.j=b;this.g=new Yn;this.l=new eo("cast.RequestIdGenerator")};go.prototype.init=function(){Vm(this.l)};var io=function(a,b,c,d){var e=fo(a.l);b.requestId=e;b=new rb;c=new ho(e,b,"number"===typeof c&&0<c?c:6E5,d);Zn(a.g,c);return c};
go.prototype.sendRequest=function(a,b,c,d,e,f){var g=this;if(!Mm.hasOwnProperty(c))return Promise.reject(Error("Custom namespace is not supported"));var h=io(this,a,void 0!==d?d:3E3,e),n=h.Sb;jo(this.h,b,c,a,e||this.j,f).then(null,function(){$n(g.g,h.requestId);n.reject(ko)});return n.promise};
go.prototype.sendMessage=function(a,b,c,d,e,f){var g=this,h=io(this,a,void 0!==d?d:3E3,e),n=h.Sb;jo(this.h,b,c,a,e||this.j,f).then(function(){$n(g.g,h.requestId);n.resolve(!0)},function(){$n(g.g,h.requestId);n.reject(ko)});return n.promise};
var lo=function(a,b,c){var d=new bo(b.appId);d.language=b.language?b.language:chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():chrome.runtime.getManifest().default_locale;return a.sendRequest(d,c,Hm,b.requestSessionTimeout)},mo=Error("Timeout"),ko=Error("Failed to send message"),ho=function(a,b,c,d){Xn.call(this,a,c);this.Sb=b;this.sourceId=d};t(ho,Xn);ho.prototype.g=function(){this.Sb.reject(mo)};var no=function(a){return a.Ba&&"function"==typeof a.Ba?a.Ba():Ra(a)||"string"===typeof a?a.length:od(a)},oo=function(a){if(a.La&&"function"==typeof a.La)return a.La();if("string"===typeof a)return a.split("");if(Ra(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return qd(a)},po=function(a){if(a.Ac&&"function"==typeof a.Ac)return a.Ac();if(!a.La||"function"!=typeof a.La){if(Ra(a)||"string"===typeof a){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return rd(a)}},qo=function(a){return a.dc&&
"function"==typeof a.dc?a.dc():Ra(a)||"string"===typeof a?mc(a):ud(a)},ro=function(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(Ra(a)||"string"===typeof a)$b(a,b,c);else for(var d=po(a),e=oo(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)},so=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(Ra(a)||"string"===typeof a)return dc(a,b,c);var d=po(a),e=oo(a),f=e.length;if(d){var g={};for(var h=0;h<f;h++)g[d[h]]=b.call(c,e[h],d[h],a)}else for(g=[],h=0;h<f;h++)g[h]=
b.call(c,e[h],void 0,a);return g},to=function(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(Ra(a)||"string"===typeof a)return hc(a,b,void 0);for(var c=po(a),d=oo(a),e=d.length,f=0;f<e;f++)if(!b.call(void 0,d[f],c&&c[f],a))return!1;return!0};var uo=function(a){this.g=new En;if(a){a=oo(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}},vo=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Va(a):b.substr(0,1)+a};k=uo.prototype;k.Ba=function(){return this.g.Ba()};k.add=function(a){this.g.set(vo(a),a)};k.removeAll=function(a){a=oo(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};k.remove=function(a){return this.g.remove(vo(a))};k.clear=function(){this.g.clear()};k.dc=function(){return this.g.dc()};
k.contains=function(a){a=vo(a);return Gn(this.g.h,a)};k.La=function(){return this.g.La()};k.clone=function(){return new uo(this)};k.equals=function(a){return this.Ba()==no(a)&&wo(this,a)};var wo=function(a,b){var c=no(b);if(a.Ba()>c)return!1;!(b instanceof uo)&&5<c&&(b=new uo(b));return to(a,function(d){var e=b;return e.contains&&"function"==typeof e.contains?e.contains(d):e.Cg&&"function"==typeof e.Cg?e.Cg(d):Ra(e)||"string"===typeof e?lc(e,d):td(e,d)})};uo.prototype.kc=function(){return this.g.kc(!1)};var yo=function(a,b){this.m=a;this.j=b;this.h=new En;this.g=new uo;this.l=0;this.u=new En("serviceCheck",this.Cy.bind(this),"startDeviceMonitor",this.Dy.bind(this),"releaseDeviceMonitor",this.By.bind(this),"deviceJustSetUp",this.yy.bind(this),"logRecord",this.zy.bind(this));chrome.runtime.onMessage.addListener(this.C.bind(this));chrome.runtime.onMessageExternal.addListener(this.o.bind(this));xo(this,"serviceReady")},Bo=function(a){if(zo(a)){var b=new uo;An(a.m.g.kc(!1),function(d){var e=d.xd();b.add(e);
Gn(this.h.h,e)||this.j.sendRequest(new Wn,d,Hm)}.bind(a));var c=!1;a.h.Ac().forEach(function(d){b.contains(d)||(this.h.remove(d),c=!0)}.bind(a));c&&Ao(a)}},zo=function(a){if(0===a.g.Ba())return!1;var b=ab();3E4<b-a.l&&(a.l=b,chrome.tabs.query({url:["chrome://cast/*","chrome-extension://"+chrome.runtime.id+"/cast_setup/*"]},function(c){0===c.length?(this.s.info("No tabs found. Clearing device monitor clients."),this.g.clear()):this.s.info(function(){return"Tab check found active tabs: "+c.map(function(d){return d.id})})}.bind(a)));
b=a.g.Ba();a.s.info("Monitor client count: "+b);return 0<b};yo.prototype.C=function(a,b,c){if("object"!==typeof a||"cast_app"!==a.type)return!1;var d=this.u.get(a.subtype);if(!d)return!1;if(!a.originId)return Wb("Missing origin ID in the incoming message."),!1;try{var e=d(a,b,c);e&&c(e)}catch(f){this.s.error("Error while handling request",f)}return!1};var xo=function(a,b,c){var d=new Cm(b,c);a.s.ua(function(){return"Sending message: "+JSON.stringify(d)});chrome.runtime.sendMessage(d)};k=yo.prototype;
k.Cy=function(){xo(this,"serviceReady")};k.Dy=function(a){this.g.contains(a.originId)?this.s.info("Client: "+a.originId+"already registered, dispatching current device list."):(this.s.info("Registering monitor client: "+a.originId),this.g.add(a.originId));Ao(this);Co(this)};k.By=function(a){this.s.info("Unregistering monitor client: "+a.originId);this.g.remove(a.originId)};k.yy=function(a){a=a.deviceJustSetUp.udn.replace(/-/g,"").toLowerCase();this.s.info("Device just set up: "+a.slice(-4))};
k.zy=function(a){a=a.logRecord;kb({level:qb(a.levelValue),M:a.loggerName,time:a.time,message:a.msg})};var Ao=function(a){var b=a.h.La();xo(a,"devices",b)},Co=function(a){a.m.Gg().forEach(function(b){this.j.sendRequest(new Wn,b,Hm)}.bind(a))};
yo.prototype.o=function(a,b,c){switch(a.type){case "handshake":c(new Em("handshake"));break;case "launch":b=b.tab&&"number"===typeof b.tab.id?b.tab.id:null,null===b||"setup"!==a.entryPoint&&"offers"!==a.entryPoint&&"devices"!==a.entryPoint||chrome.tabs.update(b,{url:"chrome://cast#"+a.entryPoint})}};yo.prototype.s=hb("castApp.eventPage.Service");chrome.cast.VERSION=[1,2];w("chrome.cast.VERSION",chrome.cast.VERSION);chrome.cast.eD=!0;w("chrome.cast.usingPresentationApi",chrome.cast.eD);chrome.cast.it=function(a,b){this.credentials=a;this.credentialsType=void 0===b?"web":b};w("chrome.cast.CredentialsData",chrome.cast.it);chrome.cast.Error=function(a,b,c){this.code=a;this.description=b||null;this.details=c||null};w("chrome.cast.Error",chrome.cast.Error);chrome.cast.mv=function(a){this.platform=a;this.packageId=this.url=null};
w("chrome.cast.SenderApplication",chrome.cast.mv);chrome.cast.Image=function(a){this.url=a;this.width=this.height=null};w("chrome.cast.Image",chrome.cast.Image);chrome.cast.Volume=function(a,b){this.level=void 0===a?null:a;this.muted=void 0===b?null:b};w("chrome.cast.Volume",chrome.cast.Volume);chrome.cast.se={CUSTOM_CONTROLLER_SCOPED:"custom_controller_scoped",TAB_AND_ORIGIN_SCOPED:"tab_and_origin_scoped",ORIGIN_SCOPED:"origin_scoped",PAGE_SCOPED:"page_scoped"};w("chrome.cast.AutoJoinPolicy",chrome.cast.se);chrome.cast.pi={CREATE_SESSION:"create_session",CAST_THIS_TAB:"cast_this_tab"};w("chrome.cast.DefaultActionPolicy",chrome.cast.pi);chrome.cast.Oe={VIDEO_OUT:"video_out",AUDIO_OUT:"audio_out",VIDEO_IN:"video_in",AUDIO_IN:"audio_in",MULTIZONE_GROUP:"multizone_group"};
w("chrome.cast.Capability",chrome.cast.Oe);chrome.cast.we={CANCEL:"cancel",TIMEOUT:"timeout",API_NOT_INITIALIZED:"api_not_initialized",INVALID_PARAMETER:"invalid_parameter",EXTENSION_NOT_COMPATIBLE:"extension_not_compatible",EXTENSION_MISSING:"extension_missing",RECEIVER_UNAVAILABLE:"receiver_unavailable",SESSION_ERROR:"session_error",CHANNEL_ERROR:"channel_error",LOAD_MEDIA_FAILED:"load_media_failed"};w("chrome.cast.ErrorCode",chrome.cast.we);chrome.cast.Yu={AVAILABLE:"available",UNAVAILABLE:"unavailable"};
w("chrome.cast.ReceiverAvailability",chrome.cast.Yu);chrome.cast.nv={CHROME:"chrome",IOS:"ios",ANDROID:"android"};w("chrome.cast.SenderPlatform",chrome.cast.nv);chrome.cast.qo={CAST:"cast",DIAL:"dial",HANGOUT:"hangout",CUSTOM:"custom"};w("chrome.cast.ReceiverType",chrome.cast.qo);chrome.cast.nt={RUNNING:"running",STOPPED:"stopped",ERROR:"error"};w("chrome.cast.DialAppState",chrome.cast.nt);chrome.cast.Ak={CAST:"cast",STOP:"stop"};w("chrome.cast.ReceiverAction",chrome.cast.Ak);
chrome.cast.uo={CONNECTED:"connected",DISCONNECTED:"disconnected",STOPPED:"stopped"};w("chrome.cast.SessionStatus",chrome.cast.uo);chrome.cast.yo={ATTENUATION:"attenuation",FIXED:"fixed",MASTER:"master"};w("chrome.cast.VolumeControlType",chrome.cast.yo);chrome.cast.Ys=function(a,b,c,d,e){this.sessionRequest=a;this.sessionListener=b;this.receiverListener=c;this.autoJoinPolicy=d||chrome.cast.se.TAB_AND_ORIGIN_SCOPED;this.defaultActionPolicy=e||chrome.cast.pi.CREATE_SESSION;this.customDialLaunchCallback=null;this.invisibleSender=!1;this.additionalSessionRequests=[]};w("chrome.cast.ApiConfig",chrome.cast.Ys);chrome.cast.qt=function(a,b){this.appName=a;this.launchParameter=b||null};w("chrome.cast.DialRequest",chrome.cast.qt);
chrome.cast.ot=function(a,b,c){this.receiver=a;this.appState=b;this.extraData=c||null};w("chrome.cast.DialLaunchData",chrome.cast.ot);chrome.cast.pt=function(a,b){this.doLaunch=a;this.launchParameter=b||null};w("chrome.cast.DialLaunchResponse",chrome.cast.pt);
chrome.cast.to=function(a,b,c,d,e){c=void 0===c?chrome.cast.timeout.requestSession:c;d=void 0===d?!1:d;e=void 0===e?null:e;this.appId=a;this.capabilities=Array.isArray(b)?b:[chrome.cast.Oe.VIDEO_OUT,chrome.cast.Oe.AUDIO_OUT];this.requestSessionTimeout=c;this.dialRequest=this.language=null;this.androidReceiverCompatible=d;this.credentialsData=e};w("chrome.cast.SessionRequest",chrome.cast.to);
chrome.cast.po=function(a,b,c,d){this.label=a;this.friendlyName=a=bd(b,void 0);this.capabilities=c||[];this.volume=d||null;this.receiverType=chrome.cast.qo.CAST;this.displayStatus=this.isActiveInput=null};w("chrome.cast.Receiver",chrome.cast.po);chrome.cast.Zu=function(a,b){this.statusText=a;this.appImages=b;this.showStop=null};w("chrome.cast.ReceiverDisplayStatus",chrome.cast.Zu);
chrome.cast.wo=function(){this.requestSession=6E4;this.getDialAppInfo=this.sendCustomMessage=this.setReceiverVolume=this.stopSession=this.leaveSession=3E3};w("chrome.cast.Timeout",chrome.cast.wo);chrome.cast.timeout=new chrome.cast.wo;w("chrome.cast.timeout",chrome.cast.timeout);chrome.cast.Pm="auto-join";chrome.cast.no="cast-session_";chrome.cast.media.wt={SDR:"sdr",HDR:"hdr",DV:"dv"};w("chrome.cast.media.HdrType",chrome.cast.media.wt);chrome.cast.media.xt={AAC:"aac",AC3:"ac3",MP3:"mp3",TS:"ts",TS_AAC:"ts_aac",E_AC3:"e_ac3",FMP4:"fmp4"};w("chrome.cast.media.HlsSegmentFormat",chrome.cast.media.xt);chrome.cast.media.yt={MPEG2_TS:"mpeg2_ts",FMP4:"fmp4"};w("chrome.cast.media.HlsVideoSegmentFormat",chrome.cast.media.yt);chrome.cast.media.yf={PAUSE:"pause",SEEK:"seek",STREAM_VOLUME:"stream_volume",STREAM_MUTE:"stream_mute"};
w("chrome.cast.media.MediaCommand",chrome.cast.media.yf);chrome.cast.media.Vu={ALBUM:"ALBUM",PLAYLIST:"PLAYLIST",AUDIOBOOK:"AUDIOBOOK",RADIO_STATION:"RADIO_STATION",PODCAST_SERIES:"PODCAST_SERIES",TV_SERIES:"TV_SERIES",VIDEO_PLAYLIST:"VIDEO_PLAYLIST",LIVE_TV:"LIVE_TV",MOVIE:"MOVIE"};w("chrome.cast.media.QueueType",chrome.cast.media.Vu);chrome.cast.media.Tj={GENERIC_CONTAINER:0,AUDIOBOOK_CONTAINER:1};w("chrome.cast.media.ContainerType",chrome.cast.media.Tj);
chrome.cast.media.zf={GENERIC:0,MOVIE:1,TV_SHOW:2,MUSIC_TRACK:3,PHOTO:4,AUDIOBOOK_CHAPTER:5};w("chrome.cast.media.MetadataType",chrome.cast.media.zf);chrome.cast.media.pg={IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"};w("chrome.cast.media.PlayerState",chrome.cast.media.pg);chrome.cast.media.Bk={OFF:"REPEAT_OFF",ALL:"REPEAT_ALL",SINGLE:"REPEAT_SINGLE",ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};w("chrome.cast.media.RepeatMode",chrome.cast.media.Bk);
chrome.cast.media.av={PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"};w("chrome.cast.media.ResumeState",chrome.cast.media.av);chrome.cast.media.vo={BUFFERED:"BUFFERED",LIVE:"LIVE",OTHER:"OTHER"};w("chrome.cast.media.StreamType",chrome.cast.media.vo);chrome.cast.media.At={CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"};w("chrome.cast.media.IdleReason",chrome.cast.media.At);chrome.cast.media.wv={TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"};
w("chrome.cast.media.TrackType",chrome.cast.media.wv);chrome.cast.media.tv={SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"};w("chrome.cast.media.TextTrackType",chrome.cast.media.tv);chrome.cast.media.pv={NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"};w("chrome.cast.media.TextTrackEdgeType",chrome.cast.media.pv);chrome.cast.media.uv={NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"};
w("chrome.cast.media.TextTrackWindowType",chrome.cast.media.uv);chrome.cast.media.qv={SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"};w("chrome.cast.media.TextTrackFontGenericFamily",chrome.cast.media.qv);chrome.cast.media.rv={NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"};w("chrome.cast.media.TextTrackFontStyle",chrome.cast.media.rv);
chrome.cast.media.yv={LIKE:"LIKE",DISLIKE:"DISLIKE",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW"};w("chrome.cast.media.UserAction",chrome.cast.media.yv);chrome.cast.media.ut=function(){this.customData=null};w("chrome.cast.media.GetStatusRequest",chrome.cast.media.ut);chrome.cast.media.Ku=function(){this.customData=null};w("chrome.cast.media.PauseRequest",chrome.cast.media.Ku);chrome.cast.media.Lu=function(){this.customData=null};w("chrome.cast.media.PlayRequest",chrome.cast.media.Lu);chrome.cast.media.lv=function(){this.customData=this.resumeState=this.currentTime=null};w("chrome.cast.media.SeekRequest",chrome.cast.media.lv);
chrome.cast.media.ov=function(){this.customData=null};w("chrome.cast.media.StopRequest",chrome.cast.media.ov);chrome.cast.media.Cv=function(a){this.volume=a;this.customData=null};w("chrome.cast.media.VolumeRequest",chrome.cast.media.Cv);
chrome.cast.media.Bu=function(a){this.type="LOAD";this.requestId=0;this.sessionId=null;this.media=a;this.activeTrackIds=null;this.autoplay=!0;this.atvCredentialsType=this.atvCredentials=this.credentialsType=this.credentials=void 0;this.customData=this.currentTime=null;this.queueData=this.playbackRate=void 0};w("chrome.cast.media.LoadRequest",chrome.cast.media.Bu);chrome.cast.media.lN=function(a){this.type="PRECACHE";this.requestId=0;this.precacheData=a};
chrome.cast.media.tt=function(a,b){this.requestId=0;this.activeTrackIds=a||null;this.textTrackStyle=b||null};w("chrome.cast.media.EditTracksInfoRequest",chrome.cast.media.tt);chrome.cast.media.Sj=function(a){this.containerType=a=void 0===a?chrome.cast.media.Tj.GENERIC_CONTAINER:a;this.containerDuration=this.containerImages=this.sections=this.title=void 0};w("chrome.cast.media.ContainerMetadata",chrome.cast.media.Sj);
chrome.cast.media.Yc=function(a){this.metadataType=this.type=a;this.queueItemId=this.sectionStartTimeInContainer=this.sectionStartAbsoluteTime=this.sectionStartTimeInMedia=this.sectionDuration=void 0};w("chrome.cast.media.MediaMetadata",chrome.cast.media.Yc);chrome.cast.media.an=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.GENERIC);this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=void 0};t(chrome.cast.media.an,chrome.cast.media.Yc);
w("chrome.cast.media.GenericMediaMetadata",chrome.cast.media.an);chrome.cast.media.ho=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.MOVIE);this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=void 0};t(chrome.cast.media.ho,chrome.cast.media.Yc);w("chrome.cast.media.MovieMediaMetadata",chrome.cast.media.ho);
chrome.cast.media.xo=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.TV_SHOW);this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=void 0};t(chrome.cast.media.xo,chrome.cast.media.Yc);w("chrome.cast.media.TvShowMediaMetadata",chrome.cast.media.xo);
chrome.cast.media.io=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.MUSIC_TRACK);this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=void 0};t(chrome.cast.media.io,chrome.cast.media.Yc);w("chrome.cast.media.MusicTrackMediaMetadata",chrome.cast.media.io);
chrome.cast.media.oo=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.PHOTO);this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=void 0};t(chrome.cast.media.oo,chrome.cast.media.Yc);w("chrome.cast.media.PhotoMediaMetadata",chrome.cast.media.oo);chrome.cast.media.Rm=function(){chrome.cast.media.Sj.call(this,chrome.cast.media.Tj.AUDIOBOOK_CONTAINER);this.releaseDate=this.publisher=this.narrators=this.authors=void 0};
t(chrome.cast.media.Rm,chrome.cast.media.Sj);w("chrome.cast.media.AudiobookContainerMetadata",chrome.cast.media.Rm);chrome.cast.media.Qm=function(){chrome.cast.media.Yc.call(this,chrome.cast.media.zf.AUDIOBOOK_CHAPTER);this.images=this.subtitle=this.bookTitle=this.chapterNumber=this.title=this.chapterTitle=void 0};t(chrome.cast.media.Qm,chrome.cast.media.Yc);w("chrome.cast.media.AudiobookChapterMediaMetadata",chrome.cast.media.Qm);
chrome.cast.media.Du=function(a,b){this.contentId=a;this.contentUrl=void 0;this.streamType=chrome.cast.media.vo.BUFFERED;this.contentType=b;this.metadata=null;this.atvEntity=this.entity=void 0;this.duration=null;this.startAbsoluteTime=void 0;this.customData=this.textTrackStyle=this.tracks=null;this.userActionStates=this.hlsVideoSegmentFormat=this.hlsSegmentFormat=this.vmapAdsRequest=this.breakClips=this.breaks=void 0};w("chrome.cast.media.MediaInfo",chrome.cast.media.Du);
chrome.cast.media.Pu=function(a){this.itemId=null;this.media=a;this.autoplay=!0;this.startTime=0;this.playbackDuration=null;this.preloadTime=0;this.customData=this.activeTrackIds=null};w("chrome.cast.media.QueueItem",chrome.cast.media.Pu);chrome.cast.media.lt="CC1AD845";w("chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID",chrome.cast.media.lt);chrome.cast.media.timeout={};chrome.cast.media.timeout.load=0;w("chrome.cast.media.timeout.load",chrome.cast.media.timeout.load);
chrome.cast.media.timeout.za=0;w("chrome.cast.media.timeout.getStatus",chrome.cast.media.timeout.za);chrome.cast.media.timeout.play=0;w("chrome.cast.media.timeout.play",chrome.cast.media.timeout.play);chrome.cast.media.timeout.pause=0;w("chrome.cast.media.timeout.pause",chrome.cast.media.timeout.pause);chrome.cast.media.timeout.seek=0;w("chrome.cast.media.timeout.seek",chrome.cast.media.timeout.seek);chrome.cast.media.timeout.stop=0;w("chrome.cast.media.timeout.stop",chrome.cast.media.timeout.stop);
chrome.cast.media.timeout.tc=0;w("chrome.cast.media.timeout.setVolume",chrome.cast.media.timeout.tc);chrome.cast.media.timeout.hl=0;w("chrome.cast.media.timeout.editTracksInfo",chrome.cast.media.timeout.hl);chrome.cast.media.timeout.GB=0;w("chrome.cast.media.timeout.queue",chrome.cast.media.timeout.GB);chrome.cast.media.vv=function(a,b){this.trackId=a;this.trackContentType=this.trackContentId=null;this.type=b;this.customData=this.subtype=this.language=this.name=null};w("chrome.cast.media.Track",chrome.cast.media.vv);
chrome.cast.media.sv=function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.fontScale=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=null};w("chrome.cast.media.TextTrackStyle",chrome.cast.media.sv);chrome.cast.media.Ru=function(a){this.type="QUEUE_LOAD";this.sessionId=this.requestId=null;this.items=a;this.startIndex=0;this.repeatMode=chrome.cast.media.Bk.OFF;this.customData=null};
w("chrome.cast.media.QueueLoadRequest",chrome.cast.media.Ru);chrome.cast.media.Ou=function(a){this.type="QUEUE_INSERT";this.sessionId=this.requestId=null;this.items=a;this.customData=this.insertBefore=null};w("chrome.cast.media.QueueInsertItemsRequest",chrome.cast.media.Ou);chrome.cast.media.Wu=function(a){this.type="QUEUE_UPDATE";this.sessionId=this.requestId=null;this.items=a;this.customData=null};w("chrome.cast.media.QueueUpdateItemsRequest",chrome.cast.media.Wu);
chrome.cast.media.Qu=function(){this.type="QUEUE_UPDATE";this.customData=this.jump=this.currentItemId=this.sessionId=this.requestId=null};w("chrome.cast.media.QueueJumpRequest",chrome.cast.media.Qu);chrome.cast.media.Uu=function(){this.type="QUEUE_UPDATE";this.customData=this.repeatMode=this.sessionId=this.requestId=null};w("chrome.cast.media.QueueSetPropertiesRequest",chrome.cast.media.Uu);
chrome.cast.media.Su=function(a){this.type="QUEUE_REMOVE";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=null};w("chrome.cast.media.QueueRemoveItemsRequest",chrome.cast.media.Su);chrome.cast.media.Tu=function(a){this.type="QUEUE_REORDER";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=this.insertBefore=null};w("chrome.cast.media.QueueReorderItemsRequest",chrome.cast.media.Tu);
chrome.cast.media.ct=function(a,b,c){this.id=a;this.breakClipIds=b;this.position=c;this.duration=void 0;this.isWatched=!1;this.isEmbedded=void 0};w("chrome.cast.media.Break",chrome.cast.media.ct);chrome.cast.media.dt=function(a){this.id=a;this.vastAdsRequest=this.customData=this.hlsSegmentFormat=this.clickThroughUrl=this.posterUrl=this.whenSkippable=this.duration=this.title=this.contentType=this.contentUrl=this.contentId=void 0};w("chrome.cast.media.BreakClip",chrome.cast.media.dt);
chrome.cast.media.Av=function(){this.adsResponse=this.adTagUrl=void 0};w("chrome.cast.media.VastAdsRequest",chrome.cast.media.Av);chrome.cast.media.et=function(){this.whenSkippable=this.breakClipId=this.breakId=this.currentBreakClipTime=this.currentBreakTime=void 0};w("chrome.cast.media.BreakStatus",chrome.cast.media.et);chrome.cast.media.Au=function(a,b,c,d){this.start=a;this.end=b;this.isMovingWindow=c;this.isLiveDone=d};w("chrome.cast.media.LiveSeekableRange",chrome.cast.media.Au);
chrome.cast.media.Nu=function(a,b,c,d,e,f,g){this.id=a;this.queueType=this.entity=void 0;this.name=b;this.description=c;this.repeatMode=d;this.shuffle=!1;this.items=e;this.startIndex=f;this.startTime=g;this.containerMetadata=void 0};w("chrome.cast.media.QueueData",chrome.cast.media.Nu);chrome.cast.media.zv=function(a){this.userAction=a;this.customData=void 0};w("chrome.cast.media.UserActionState",chrome.cast.media.zv);chrome.cast.media.Bv=function(a,b,c){this.width=a;this.height=b;this.hdrType=c};
w("chrome.cast.media.VideoInformation",chrome.cast.media.Bv);chrome.cast.media.la=function(a,b){this.sessionId=a;this.mediaSessionId=b;this.media=null;this.videoInfo=this.queueData=void 0;this.playbackRate=1;this.playerState=chrome.cast.media.pg.IDLE;this.currentTime=0;this.supportedMediaCommands=[];this.volume=new chrome.cast.Volume;this.items=this.preloadedItemId=this.loadingItemId=this.currentItemId=this.customData=this.activeTrackIds=this.idleReason=null;this.repeatMode=chrome.cast.media.Bk.OFF;this.liveSeekableRange=this.breakStatus=void 0};k=chrome.cast.media.la.prototype;
k.za=function(){};k.play=function(){};k.EB=function(){};k.pause=function(){};k.CB=function(){};k.seek=function(){};k.stop=function(){};k.tc=function(){};k.hl=function(){};k.IB=function(){};k.HB=function(){};k.SB=function(){};k.NB=function(){};k.MB=function(){};k.JB=function(a){Do(this,a)};k.RB=function(){};k.PB=function(){};k.OB=function(a){Do(this,a)};k.QB=function(){};k.LB=function(a,b,c,d){a=Do(this,a);0>a||(0>b?d&&d(new chrome.cast.Error(chrome.cast.we.INVALID_PARAMETER)):a==b&&c&&c())};
k.OC=function(a){return-1<this.supportedMediaCommands.indexOf(a)};k.Uw=function(){return this.currentTime};k.Sw=function(){if(this.breakStatus&&void 0!==this.breakStatus.currentBreakTime)return this.breakStatus.currentBreakTime};k.Rw=function(){if(this.breakStatus&&void 0!==this.breakStatus.currentBreakClipTime)return this.breakStatus.currentBreakClipTime};k.Tw=function(){if(this.liveSeekableRange&&void 0!==this.liveSeekableRange.start&&void 0!==this.liveSeekableRange.end)return this.liveSeekableRange};
k.Lk=function(){};k.Mk=function(){};k.dm=function(){};k.em=function(){};var Do=function(a,b){return jc(a.items,function(c){return c.itemId==b})};w("chrome.cast.media.Media",chrome.cast.media.la);chrome.cast.media.la.prototype.removeUpdateListenerWithContext=chrome.cast.media.la.prototype.em;chrome.cast.media.la.prototype.removeUpdateListener=chrome.cast.media.la.prototype.dm;chrome.cast.media.la.prototype.addUpdateListenerWithContext=chrome.cast.media.la.prototype.Mk;
chrome.cast.media.la.prototype.addUpdateListener=chrome.cast.media.la.prototype.Lk;chrome.cast.media.la.prototype.getEstimatedLiveSeekableRange=chrome.cast.media.la.prototype.Tw;chrome.cast.media.la.prototype.getEstimatedBreakClipTime=chrome.cast.media.la.prototype.Rw;chrome.cast.media.la.prototype.getEstimatedBreakTime=chrome.cast.media.la.prototype.Sw;chrome.cast.media.la.prototype.getEstimatedTime=chrome.cast.media.la.prototype.Uw;chrome.cast.media.la.prototype.supportsCommand=chrome.cast.media.la.prototype.OC;
chrome.cast.media.la.prototype.queueMoveItemToNewIndex=chrome.cast.media.la.prototype.LB;chrome.cast.media.la.prototype.queueReorderItems=chrome.cast.media.la.prototype.QB;chrome.cast.media.la.prototype.queueRemoveItem=chrome.cast.media.la.prototype.OB;chrome.cast.media.la.prototype.queueRemoveItems=chrome.cast.media.la.prototype.PB;chrome.cast.media.la.prototype.queueSetRepeatMode=chrome.cast.media.la.prototype.RB;chrome.cast.media.la.prototype.queueJumpToItem=chrome.cast.media.la.prototype.JB;
chrome.cast.media.la.prototype.queueNext=chrome.cast.media.la.prototype.MB;chrome.cast.media.la.prototype.queuePrev=chrome.cast.media.la.prototype.NB;chrome.cast.media.la.prototype.queueUpdateItems=chrome.cast.media.la.prototype.SB;chrome.cast.media.la.prototype.queueAppendItem=chrome.cast.media.la.prototype.HB;chrome.cast.media.la.prototype.queueInsertItems=chrome.cast.media.la.prototype.IB;chrome.cast.media.la.prototype.editTracksInfo=chrome.cast.media.la.prototype.hl;
chrome.cast.media.la.prototype.setVolume=chrome.cast.media.la.prototype.tc;chrome.cast.media.la.prototype.stop=chrome.cast.media.la.prototype.stop;chrome.cast.media.la.prototype.seek=chrome.cast.media.la.prototype.seek;chrome.cast.media.la.prototype.pauseWithContext=chrome.cast.media.la.prototype.CB;chrome.cast.media.la.prototype.pause=chrome.cast.media.la.prototype.pause;chrome.cast.media.la.prototype.playWithContext=chrome.cast.media.la.prototype.EB;chrome.cast.media.la.prototype.play=chrome.cast.media.la.prototype.play;
chrome.cast.media.la.prototype.getStatus=chrome.cast.media.la.prototype.za;var Eo=function(a,b,c){this.sessionId=a;this.namespaceName=b;this.message=c};var Fo=function(a,b){this.type="SET_VOLUME";this.requestId=0;this.volume=a;this.expectedVolume=b||null};chrome.cast.qa=function(a,b,c,d,e){this.sessionId=a;this.appId=b;this.displayName=c;this.statusText=null;this.appImages=d;this.receiver=e;this.senderApps=[];this.namespaces=[];this.media=[];this.status=chrome.cast.uo.CONNECTED;this.transportId=""};k=chrome.cast.qa.prototype;k.CC=function(a,b,c){this.xs(null,a,b,c)};k.xs=function(a,b,c,d){b=new Fo(new chrome.cast.Volume(b,null),this.receiver.volume);a.setReceiverVolume(this.sessionId,b,c,d)};k.BC=function(a,b,c){this.ws(null,a,b,c)};
k.ws=function(a,b,c,d){a=new Fo(new chrome.cast.Volume(null,b),this.receiver.volume);null.setReceiverVolume(this.sessionId,a,c,d)};k.getDialAppInfo=function(a,b){this.yp(null,a,b)};k.yp=function(a,b,c){a.getDialAppInfo(b,c)};k.leave=function(a,b){null.leaveSession(this.sessionId,a,b)};k.stop=function(){};k.MC=function(){};k.sendMessage=function(){};k.kC=function(){};k.Lk=function(){};k.Mk=function(){};k.dm=function(){};k.em=function(){};k.Ov=function(){};k.Pv=function(){};k.Lv=function(){};k.Mv=function(){};
k.ZB=function(){};k.aC=function(){};k.bC=function(){};k.cC=function(){};k.BA=function(a){a.sessionId=this.sessionId};k.KB=function(a){a.sessionId=this.sessionId};w("chrome.cast.Session",chrome.cast.qa);chrome.cast.qa.prototype.queueLoad=chrome.cast.qa.prototype.KB;chrome.cast.qa.prototype.loadMedia=chrome.cast.qa.prototype.BA;chrome.cast.qa.prototype.removeMessageListenerWithContext=chrome.cast.qa.prototype.cC;chrome.cast.qa.prototype.removeMessageListener=chrome.cast.qa.prototype.bC;
chrome.cast.qa.prototype.removeMediaListenerWithContext=chrome.cast.qa.prototype.aC;chrome.cast.qa.prototype.removeMediaListener=chrome.cast.qa.prototype.ZB;chrome.cast.qa.prototype.addMediaListenerWithContext=chrome.cast.qa.prototype.Mv;chrome.cast.qa.prototype.addMediaListener=chrome.cast.qa.prototype.Lv;chrome.cast.qa.prototype.addMessageListenerWithContext=chrome.cast.qa.prototype.Pv;chrome.cast.qa.prototype.addMessageListener=chrome.cast.qa.prototype.Ov;
chrome.cast.qa.prototype.removeUpdateListenerWithContext=chrome.cast.qa.prototype.em;chrome.cast.qa.prototype.removeUpdateListener=chrome.cast.qa.prototype.dm;chrome.cast.qa.prototype.addUpdateListenerWithContext=chrome.cast.qa.prototype.Mk;chrome.cast.qa.prototype.addUpdateListener=chrome.cast.qa.prototype.Lk;chrome.cast.qa.prototype.sendMessageWithContext=chrome.cast.qa.prototype.kC;chrome.cast.qa.prototype.sendMessage=chrome.cast.qa.prototype.sendMessage;
chrome.cast.qa.prototype.stopWithContext=chrome.cast.qa.prototype.MC;chrome.cast.qa.prototype.stop=chrome.cast.qa.prototype.stop;chrome.cast.qa.prototype.leave=chrome.cast.qa.prototype.leave;chrome.cast.qa.prototype.getDialAppInfoWithContext=chrome.cast.qa.prototype.yp;chrome.cast.qa.prototype.getDialAppInfo=chrome.cast.qa.prototype.getDialAppInfo;chrome.cast.qa.prototype.setReceiverMutedWithContext=chrome.cast.qa.prototype.ws;chrome.cast.qa.prototype.setReceiverMuted=chrome.cast.qa.prototype.BC;
chrome.cast.qa.prototype.setReceiverVolumeLevelWithContext=chrome.cast.qa.prototype.xs;chrome.cast.qa.prototype.setReceiverVolumeLevel=chrome.cast.qa.prototype.CC;var Io=function(a,b){if(!b.applications||1!=b.applications.length)return null;var c=b.applications[0];a=Go(a);a=new chrome.cast.qa(c.sessionId,c.appId,c.displayName,c.appImages,a);a.senderApps=c.senderApps;a.namespaces=c.namespaces||[];a.transportId=c.transportId;a.statusText=c.statusText;if(!a.sessionId||!(a.namespaces&&0!=a.namespaces.length||Ho(a)))return null;a.receiver.volume=b.volume;"boolean"===typeof b.isActiveInput&&(a.receiver.isActiveInput=b.isActiveInput);return a},Jo=function(a){var b=
[];if(!a)return b;a&1&&b.push(chrome.cast.Oe.VIDEO_OUT);a&2&&b.push(chrome.cast.Oe.VIDEO_IN);a&4&&b.push(chrome.cast.Oe.AUDIO_OUT);a&8&&b.push(chrome.cast.Oe.AUDIO_IN);a&32&&b.push(chrome.cast.Oe.MULTIZONE_GROUP);return b},Go=function(a){var b=tn(sn(),a.getId());return new chrome.cast.po(b,a.h.friendlyName,Jo(a.g))},Ko=function(a,b){if(a.statusText!=b.statusText)return!0;var c=a.namespaces||[],d=b.namespaces||[];if(c.length!=d.length)return!0;for(var e={bh:0};e.bh<c.length;e={bh:e.bh},e.bh++)if(!d.some(function(f){return function(g){return g.name==
c[f.bh].name}}(e)))return!0;return a.receiver.volume.level!==b.receiver.volume.level||a.receiver.volume.muted!==b.receiver.volume.muted?!0:!1},Lo=function(a){Array.isArray(a)?a.forEach(Lo):Sa(a)&&Object.keys(a).forEach(function(b){null===a[b]?delete a[b]:(Sa(a[b])||Array.isArray(a[b]))&&Lo(a[b])})},Mo=function(a){return a.namespaces.some(function(b){return b.name==Jm})},Ho=function(a){return null!==a&&"MultizoneLeader"==a.appId},No=function(a){return"E8C28D3C"==a||"00000000-0000-0000-0000-000000000000"==
a};var Oo=function(a,b,c){this.type=a;this.message=b;this.sequenceNumber=void 0!==c?c:-1;this.timeoutMillis=0;this.clientId=""};var Po=function(a,b){this.l=a;this.g=b;this.j=[];this.h=new Yn},Ro=function(a,b){return(a=Qo(a.g,b))?a.routeId:null};Po.prototype.listen=function(a,b){this.j[a]=b};var To=function(a,b,c,d){So.ua("Sending to "+c);So.ua(JSON.stringify(d));d.clientId=c;a.l.vc.yj(b,d)},Uo=function(a,b,c){var d=Qo(a.g,b);d&&d.g?To(a,d.routeId,b,c):a.connect(b).then(function(e){e?(e=Ro(a,b))?To(a,e,b,c):So.K("No route for "+b):So.K("No connected client "+b)},null)};
Po.prototype.connect=function(a){var b=Qo(this.g,a);if(null!=b&&b.g)return Promise.resolve(!0);b=Ro(this,a);if(!b)return So.K("No route for client "+a),Promise.resolve(!1);if(a=this.h.g.get(b,null))return a.Sb.promise;a=new rb;Zn(this.h,new Vo(b,a));return a.promise};var So=hb("mr.cast.ApiMessenger"),Vo=function(a,b){Xn.call(this,a,3E4);this.Sb=b};t(Vo,Xn);Vo.prototype.g=function(){this.Sb.resolve(!1)};var Wo=function(a,b,c){this.j=a;this.h=b;this.g=c},Xo=function(a){var b="cast-dial:"+a.j,c=new URLSearchParams;a.h&&c.set("dialPostData",a.h);a.g&&c.set("clientId",a.g);(a=c.toString())&&(b+="?"+a);return b};var Yo=function(a,b,c,d,e,f,g,h,n,p){this.m=a;this.g=b||null;this.h=c||null;this.j=d||null;this.l=void 0!==e?e:null;this.D=f||null;this.G=g||null;this.u=h||!1;this.C=n||null;this.o=p||null;this.H=["WEB"];this.F=null},Zo=function(a,b){return(a=a.match(b+"=([^/]*)"))?a[1]:null},ap=function(a){a=a.match(/__castAppId__=([^/]*)/g);return null==a?[]:cc(dc(a,function(b){b=Zo(b,"__castAppId__");if(!b)return null;b=b.match($o);if(!b||0==b.length)return null;var c=[];3==b.length&&b[2]&&(c=b[2].split(","));
return{appId:b[1],capabilities:c}}),function(b){return null!=b})},bp=function(a){return dc(a.m,function(b){return b.appId})},cp=function(a){return a.h?a.h:chrome.cast.se.TAB_AND_ORIGIN_SCOPED},dp=function(a){var b=a.m.map(function(c){var d="cast:"+c.appId,e=new URLSearchParams;c.capabilities&&0<c.capabilities.length&&e.set("capabilities",c.capabilities.join(","));a.g&&e.set("clientId",a.g);a.h&&e.set("autoJoinPolicy",a.h);a.j&&e.set("defaultActionPolicy",a.j);null!=a.l&&e.set("launchTimeout",String(a.l));
a.u&&e.set("invisibleSender","true");a.C&&(e.set("broadcastNamespace",a.C),e.set("broadcastId",String(Math.random())));a.o&&e.set("broadcastMessage",encodeURIComponent(JSON.stringify(a.o)));e.set("supportedAppTypes",a.H.join(","));c=e.set;var f=JSON,g=f.stringify,h={launchCheckerParams:{}};a.F&&(h.launchCheckerParams.credentialsData=a.F);c.call(e,"appParams",g.call(f,h));return d+"?"+e.toString()});a.D&&b.push(Xo(new Wo(a.D,a.G,a.g)));return b},fp=function(a,b){a=bp(a);var c=ep(b);return gc(a,function(d){return lc(c,
d)})},gp=function(a){try{var b=new URL(a)}catch(r){return null}if("https:"==b.protocol)if("https:"!=b.protocol||"google.com"!=b.host||"/cast"!=b.pathname)a=null;else{var c=b.hash;if((a=ap(c))&&0!=a.length){b=Zo(c,"__castClientId__");var d=Zo(c,"__castAutoJoinPolicy__"),e=Zo(c,"__castDefaultActionPolicy__");var f=Zo(c,"__castLaunchTimeout__");null==f?f=null:(f=Number(f),f=!isNaN(f)&&0<f?f:null);var g=Zo(c,"__dialAppName__"),h=Zo(c,"__dialPostData__");var n=Zo(c,"__castInvisibleSender__");n=null===
n?null:"true"==n;var p=Zo(c,"__castBroadcastNamespace__");c=(c=Zo(c,"__castBroadcastMessage__"))?JSON.parse(decodeURIComponent(c)):null;a=new Yo(a,b,d,e,f,g,h,n,p,c)}else a=null}else if("cast:"==b.protocol){a=b.pathname;d=b.searchParams.get("capabilities");a={appId:a,capabilities:d?d.split(","):[]};h=b.searchParams;b=h.get("clientId");d=h.get("autoJoinPolicy");e=h.get("defaultActionPolicy");c=Number(h.get("launchTimeout"));if(isNaN(c)||0>=c)c=null;f="true"==h.get("invisibleSender");g=h.get("broadcastNamespace");
h=(h=h.get("broadcastMessage"))?JSON.parse(decodeURIComponent(h)):null;a=new Yo([a],b,d,e,c,void 0,void 0,f,g,h)}else a=null;return a},ep=function(a){return(a=gp(a))?bp(a):null},hp=function(a){return(a=gp(a))?a.g:null},$o=/(^\w+)(?:\(([\w, ]*)\))?$/;var ip={MJ:0,oJ:1},jp={eS:0,Xu:1,wN:2},kp={LL:0,TIMEOUT:1,FAILED:2},lp={ZI:0,UM:1,SEEK:2,iL:3,IP:4,SD:5},mp=function(a){Ob("MediaRouter.Cast.Session.Ended",a,jp)},np=function(a){Ob("MediaRouter.Cast.Controller.ActionType",a,lp)},op=function(a){Ob("MediaRouter.Cast.Session.Fail",a,kp)};var pp=function(a,b,c){this.M=hb("mr.MediaRouteController."+a);this.l=new mojo.Binding(mojo.MediaController,this,b);this.h=c;this.g=new mojo.MediaStatus({title:"",description:"",duration:new mojo.TimeDelta({microseconds:0}),current_time:new mojo.TimeDelta({microseconds:0})});this.C=!1;this.l.setConnectionErrorHandler(this.Lq.bind(this));this.h.ptr.setConnectionErrorHandler(this.Lq.bind(this))};k=pp.prototype;k.Lq=function(){this.dispose();this.Iq()};
k.dispose=function(){this.C||(this.C=!0,this.l&&(this.l.close(),this.l=null),this.h&&(this.h.ptr.reset(),this.h=null))};k.Iq=function(){};k.play=function(){};k.pause=function(){};k.um=function(){};k.tc=function(){};k.seek=function(){};k.rw=function(a){a.close();throw Error("Not implemented");};pp.prototype.connectHangoutsMediaRouteController=pp.prototype.rw;pp.prototype.seek=pp.prototype.seek;pp.prototype.setVolume=pp.prototype.tc;pp.prototype.setMute=pp.prototype.um;pp.prototype.pause=pp.prototype.pause;
pp.prototype.play=pp.prototype.play;var qp=function(a){var b=new URL(a);a={};a.scheme=b.protocol.replace(":","");a.host=b.hostname;b=b.port?Number.parseInt(b.port,10):0;switch(a.scheme){case "http":a.port=b||80;break;case "https":a.port=b||443;break;default:throw Error("Scheme must be http or https");}a.suborigin="";return new mojo.Origin(a)},rp=function(a){return new mojo.TimeDelta({microseconds:Math.floor(1E6*a)})};var sp=function(a,b,c,d){this.type=a;this.mediaSessionId=b;this.requestId=0;this.sessionId=c;this.currentTime=d},up=function(a,b,c,d,e){pp.call(this,"CastRouteController",a,b);this.session=c;this.j=d;this.m=e;this.u=new Date;this.o=new Set;tp(this);np(0)};t(up,pp);
var tp=function(a){var b=vp(a);b&&wp(a,b);b&&a.m||!a.session.statusText||(a.g.title=a.session.statusText.substring(0,256));a.g.volume=null===a.session.receiver.volume.level?0:a.session.receiver.volume.level;a.g.is_muted=!!a.session.receiver.volume.muted;a.g.can_mute=a.session.receiver.volume.controlType!==chrome.cast.yo.FIXED;a.g.can_set_volume=a.g.can_mute;if(a.h)a.h.onMediaStatusUpdated(a.g)};k=up.prototype;k.Iq=function(){xp(this.j.Bb,this.session.sessionId)};
k.play=function(){var a=vp(this);this.g.can_play_pause&&a&&this.g.play_state===mojo.MediaStatus.PlayState.PAUSED&&yp(this.j,this.session,new sp("PLAY",a.mediaSessionId,this.session.sessionId));zp(this,1)};k.pause=function(){var a=vp(this);this.g.can_play_pause&&a&&this.g.play_state!==mojo.MediaStatus.PlayState.PAUSED&&yp(this.j,this.session,new sp("PAUSE",a.mediaSessionId,this.session.sessionId));zp(this,1)};
k.seek=function(a){var b=vp(this);a=a?a.microseconds/1E6:0;var c;if(c=this.g.can_seek&&b&&0<=a)c=this.g.duration,c=a<=(c?c.microseconds/1E6:0);c&&yp(this.j,this.session,new sp("SEEK",b.mediaSessionId,this.session.sessionId,a));zp(this,2)};k.um=function(a){this.g.can_mute&&a!==this.g.is_muted&&Ap(this.j,this.session,new chrome.cast.Volume(null,a));zp(this,3)};k.tc=function(a){this.g.can_set_volume&&0<=a&&1>=a&&Ap(this.j,this.session,new chrome.cast.Volume(a));zp(this,4)};
var vp=function(a){return a.session.media.find(function(b){return!b.idleReason})||null},wp=function(a,b){a.m&&b.media&&b.media.metadata&&b.media.metadata.title&&(a.g.title=b.media.metadata.title.substring(0,256));a.g.can_play_pause=b.supportedMediaCommands.includes(chrome.cast.media.yf.PAUSE);a.g.can_seek=b.supportedMediaCommands.includes(chrome.cast.media.yf.SEEK);var c=b.playerState;a.g.play_state=c===chrome.cast.media.pg.PLAYING?mojo.MediaStatus.PlayState.PLAYING:c===chrome.cast.media.pg.PAUSED?
mojo.MediaStatus.PlayState.PAUSED:mojo.MediaStatus.PlayState.BUFFERING;a.g.current_time=b.currentTime?rp(b.playerState===chrome.cast.media.pg.PLAYING?b.currentTime+(new Date-a.u)/1E3:b.currentTime):rp(0);a.g.duration=b.media&&b.media.duration?rp(b.media.duration):rp(0)},zp=function(a,b){0==a.o.size&&np(5);a.o.has(b)||(np(b),a.o.add(b))};up.prototype.setVolume=up.prototype.tc;up.prototype.setMute=up.prototype.um;up.prototype.seek=up.prototype.seek;up.prototype.pause=up.prototype.pause;
up.prototype.play=up.prototype.play;var Bp=function(a){this.g=a;this.s=hb("mr.cast.SessionLauncher")},Cp=function(a,b,c){Ob("MediaRouter.Cast.Session.Type",0,ip);return lo(a.g,b,c).then(a.h.bind(a,c),function(d){d&&mo==d?op(1):op(0);throw d;})};Bp.prototype.h=function(a,b){this.s.ua("Got launch result from "+a.getId());if("LAUNCH_ERROR"==b.type)throw op(2),Error(b.reason);a=Io(a,b.status);this.s.info("Launched session: "+a.sessionId);return a};var Dp=function(a){this.g=a;this.s=hb("mr.cast.ReceiverStatusQuerier")},Ep=function(a,b){return(new dh(Za(a.h,a,b),3500,5)).start().then(null,function(c){a.s.info("Failed to get receiver status from "+b.getId());throw c;})};Dp.prototype.h=function(a){this.s.info("Query receiver status: "+a.getId());return this.g.sendRequest(new Wn,a,Hm)};var Fp=function(a,b,c,d,e,f){this.h=a;this.m=b;this.l=c;this.Bb=d;this.o=e;this.j=f;this.g=new Po(f,c);this.F=new Dp(this.h);this.G=new Bp(this.h)};Fp.prototype.init=function(){this.l.init();this.g.listen("v2_message",this.D.bind(this));this.g.listen("app_message",this.C.bind(this));this.g.listen("leave_session",this.u.bind(this))};
Fp.prototype.yj=function(a){var b=this.g;So.ua("Received: "+a);a=JSON.parse(a);var c=a.clientId;"client_connect"==a.type?(So.ua("App "+c),(a=Qo(b.g,c))?(a.g=!0,(b=$n(b.h,a.routeId))&&b.Sb.resolve(!0)):So.K("Client not found "+c)):Ro(b,c)?(b=b.j[a.type])&&b(a):So.K("No route for "+c)};var Ip=function(a,b,c,d){Gp(a.Bb,b).slice().forEach(function(e){e!=d&&Hp(a,e,c)})},Hp=function(a,b,c){c.clientId=b;Uo(a.g,b,c)},Jp=function(a,b,c,d){c={receiver:Go(c),action:d};Hp(a,b,new Oo("receiver_action",c))};
Fp.prototype.D=function(a){var b=a.message,c=b.sessionId;if(c){var d=Kp(this.Bb,c);if(d)if(c=Lp(this.Bb,c))if(c=this.m.ub(c))switch(b.type){case "STOP":Mp(this,a,c);break;case "LOAD":case "PAUSE":case "PLAY":case "SEEK":case "STOP_MEDIA":case "MEDIA_SET_VOLUME":case "MEDIA_GET_STATUS":case "EDIT_TRACKS_INFO":case "QUEUE_LOAD":case "QUEUE_INSERT":case "QUEUE_UPDATE":case "QUEUE_REMOVE":case "QUEUE_REORDER":case "PRECACHE":Np(this,a,c,d);break;case "SET_VOLUME":Op(this,a,c);break;default:Pp.K("Unknown request")}else Qp(this,
a,chrome.cast.we.INVALID_PARAMETER,"No receiver");else Qp(this,a,chrome.cast.we.INVALID_PARAMETER,"No sink ID");else Qp(this,a,chrome.cast.we.INVALID_PARAMETER,"Unknown session ID")}else Qp(this,a,chrome.cast.we.INVALID_PARAMETER,"No session ID")};
var Qp=function(a,b,c,d){c=new chrome.cast.Error(c,d);Rp(a,b,c)},Rp=function(a,b,c){Uo(a.g,b.clientId,new Oo("error",c,b.sequenceNumber))},Mp=function(a,b,c){var d=b.message;Nb("MediaRouter.Cast.Session.End");var e=d.sessionId,f=Sp(a.Bb,e);f&&(f.m=!0);f=function(){Tp(a,e,b)};a.h.sendRequest(d,c,Hm,b.timeoutMillis,b.clientId).then(f,f)},Np=function(a,b,c,d){var e=b.message,f=e.type;f in Vn&&(e.type=Vn[f]);a.h.sendRequest(e,c,Jm,b.timeoutMillis,b.clientId,d.transportId).then(function(g){Up(a,d,g);Uo(a.g,
b.clientId,new Oo("v2_message",g,b.sequenceNumber))},function(g){Rp(a,b,g)})},Op=function(a,b,c){var d=b.message;delete d.sessionId;a.h.sendRequest(d,c,Hm,b.timeoutMillis,b.clientId).then(function(){Uo(a.g,b.clientId,new Oo("v2_message",null,b.sequenceNumber))},function(e){Rp(a,b,e)})};
Fp.prototype.C=function(a){var b=this,c=a.message,d=c.sessionId;if(d){var e=Lp(this.Bb,d);e?(e=this.m.ub(e))?(d=Kp(this.Bb,d),ic(d.namespaces,function(f){return f.name==c.namespaceName})?jo(this.o,e,c.namespaceName,c.message,a.clientId,d.transportId).then(function(){Uo(b.g,a.clientId,new Oo("app_message",null,a.sequenceNumber))},function(){Qp(b,a,chrome.cast.we.CHANNEL_ERROR,"Channel to receiver not available")}):Qp(this,a,chrome.cast.we.INVALID_PARAMETER,"Invalid namespace")):Pp.K("No receiver from sinkId"):
Pp.K("No sinkId from sessionId")}else Pp.K("No sessionId")};Fp.prototype.Vl=function(a){(a=Vp(this.Bb,a))&&a.session&&Tp(this,a.session.sessionId)};
Fp.prototype.u=function(a){var b=this;Pp.info("Leave session");var c=Sp(this.Bb,a.message);if(c){var d=a.clientId,e=Qo(this.l,d);if(e){var f=[],g=[],h=e.tabId,n=e.origin,p=e.autoJoinPolicy;c.h.forEach(function(r){var y=Qo(b.l,r);p==chrome.cast.se.TAB_AND_ORIGIN_SCOPED&&h==y.tabId&&n==y.origin||p==chrome.cast.se.ORIGIN_SCOPED&&n==y.origin?(y.h=!0,f.push(r)):g.push(r)});Uo(this.g,d,new Oo("leave_session",null,a.sequenceNumber));f.forEach(function(r){(r=Qo(b.l,r))&&b.j.dg(r.routeId,!0,!0)});c.h=g}else Pp.K("No client record")}else Pp.K("No session")};
var Wp=function(a,b,c){Mo(b)&&a.h.sendRequest(new Wn,c,Jm,void 0,void 0,b.transportId).catch(Na)},Mn=function(a,b,c){var d=b.getId();Pp.info("Query status for "+d);Ep(a.F,b).then(function(e){Xp(a,d,e);c&&(e=Yp(a.Bb,d))&&Wp(a,e,b)},Na)},Zp=function(a,b){if("*"==b.destinationId)return!0;b=b.destinationId;if(b==a.o.m||null!=Qo(a.l,b))return!0;Pp.info("Invalid destination "+b);return!1},eq=function(a,b,c){Pp.ua(function(){return"Cast message: "+JSON.stringify(c)});if(Zp(a,c))if(c.namespace_==Im||c.namespace_==
Km)(b=Vp(a.Bb,b))&&b.g.forEach(function(f){var g=a.j,h=g.h.get(f);h&&h.Dg&&$p(g.vc.jm,new aq(f,c))});else{var d=JSON.parse(c.data),e=bq(a,d);e=e?e.sourceId:void 0;switch(d.type){case "RECEIVER_STATUS":Xp(a,b,d);break;case "MEDIA_STATUS":cq(a,b,c,e)}}else dq(a.o,b,c.destinationId,c.sourceId,!1)},bq=function(a,b){a=$n(a.h.g,b.requestId);if(!a)return null;var c=a.Sb;switch(b.type){case "LAUNCH_ERROR":case "INVALID_REQUEST":case "LOAD_CANCELLED":case "LOAD_FAILED":case "INVALID_PLAYER_STATE":delete b.requestId;
c.reject(new chrome.cast.Error(chrome.cast.we.SESSION_ERROR,b.reason||b.type,b));break;default:c.resolve(b)}return a},fq=function(a,b,c){Pp.ua(function(){return"App message: "+JSON.stringify(c)});if(b=Yp(a.Bb,b)){var d="*"==c.destinationId?Gp(a.Bb,b.sessionId):[c.destinationId];var e=new Eo(b.sessionId,c.namespace_,c.data);d.forEach(function(f){Uo(a.g,f,new Oo("app_message",e))})}else Pp.K("No session for incoming app message")},gq=function(a,b){a.forEach(function(c){c.sessionId=b;var d=c.supportedMediaCommands,
e=[];d&1&&e.push(chrome.cast.media.yf.PAUSE);d&2&&e.push(chrome.cast.media.yf.SEEK);d&4&&e.push(chrome.cast.media.yf.STREAM_VOLUME);d&8&&e.push(chrome.cast.media.yf.STREAM_MUTE);c.supportedMediaCommands=e});return a},Up=function(a,b,c){b=b.sessionId;c.sessionId=b;c=gq(c.status,b);hq(a.Bb,b,c);if((a=Sp(a.Bb,b))&&a.controller&&(a=a.controller,a.u=new Date,(c=vp(a))?wp(a,c):(a.m&&(a.g.title=""),a.g.can_play_pause=!1,a.g.can_seek=!1),a.h))a.h.onMediaStatusUpdated(a.g)},iq=function(a,b){if(b=Yp(a.Bb,b)){b=
b.sessionId;var c=Sp(a.Bb,b);c&&c.m||Tp(a,b)}},Tp=function(a,b,c){c&&Hp(a,c.clientId,c);(c=Sp(a.Bb,b))&&c.g.slice().forEach(function(d){a.j.dg(d,!0)});jq(a.Bb,b);kq(a.j)},Xp=function(a,b,c){Pp.ua("Receiver status for "+b);var d=c.status;if(d)if(c=a.m.ub(b)){d=Io(c,d);var e=Vp(a.Bb,b);e?d?d.sessionId==e.session.sessionId?(b=e.session,Ko(b,d)&&(Pp.ua("Updating session "+d.sessionId),e.j&&(b.statusText=d.statusText),b.namespaces=d.namespaces,b.receiver.volume=d.receiver.volume,lq(a.j,e),Ip(a,b.sessionId,
new Oo("update_session",b)),e.controller&&tp(e.controller))):(iq(a,b),mp(1),a.j.Nf(null,c,null,d)):(iq(a,b),mp(1)):d&&a.j.Nf(null,c,null,d)}else Nb("MediaRouter.Cast.Error.Sink.Missing.From.Discovery.Service"),Pp.K("Got message from receiver "+b+", but sink is no longer available.")},cq=function(a,b,c,d){if(b=Yp(a.Bb,b))if(c=JSON.parse(c.data))Up(a,b,c),Ip(a,c.sessionId,new Oo("v2_message",c),d)},mq=function(a,b){var c=Jo(b.g);return(b=ic(a.m,function(d){return hc(d.capabilities,function(e){return lc(c,
e)})}))?b.appId:bp(a)[0]},nq=function(a,b,c){var d=gp(b);if(!d)return Promise.reject(Error("Invalid source "+b));var e=mq(d,c);b=null==d.l?chrome.cast.timeout.requestSession:d.l;var f=new Db("MediaRouter.Cast.Session.Launch");return Cp(a.G,new chrome.cast.to(e,void 0,b),c).then(function(g){Pp.info("Launched session "+g.sessionId+" for appId "+e);f.end("Success");return g},function(g){Pp.error("Failed to session for appId "+e);f.end("Failure");throw g;})};
Fp.prototype.createMediaRouteController=function(a,b,c){a=oq(this.Bb,a);if(!a)return Error("Session not found for the route");var d=a.session;if(a.controller)return Error("Controller already exists for the route");var e=pq(this,d.sessionId);if(!e)return Error("Sink not found for the route");a.controller=new up(b,c,d,this,a.j);Wp(this,d,e);return null};
var yp=function(a,b,c){var d=pq(a,b.sessionId);d&&a.h.sendRequest(c,d,Jm,0,"",b.transportId).catch(function(e){Pp.K("Failed to send a media control request: "+e)})},Ap=function(a,b,c){c=new Fo(c);(b=pq(a,b.sessionId))&&a.h.sendRequest(c,b,Hm).catch(function(d){Pp.K("Failed to send a volume control request: "+d)})},pq=function(a,b){return(b=Lp(a.Bb,b))?a.m.ub(b):null},Pp=hb("mr.cast.ApiHandler");var qq=function(a){return"0F5096E8"==a||"85CDB22F"==a};var rq=function(a,b,c,d,e){for(var f=[],g=4;g<arguments.length;++g)f[g-4]=arguments[g];var h=this;this.l=a;this.o=b;this.m=c;this.h=d;this.C=f;this.g=!1;this.j=function(n){for(var p=[],r=0;r<arguments.length;++r)p[r-0]=arguments[r];return h.ww.apply(h,q(p))}};k=rq.prototype;k.addListener=function(){this.g||(this.g=!0,this.h.addListener.apply(this.h,[this.j].concat(q(this.C))))};k.removeListener=function(){this.g&&(this.h.removeListener(this.j),this.g=!1)};
k.Lm=function(a){for(var b=0;b<arguments.length;++b);return!0};k.ww=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];var d=this;hk(this.l);if(!this.Lm.apply(this,q(b)))return!1;Yj(this.m).then(function(e){return e.handleEvent.apply(e,[d.h].concat(q(b)))});return this.cl()};k.fb=function(){return"mr.EventListener."+this.o};k.bc=function(){return[this.g]};k.hc=function(){Sm(this)&&this.addListener()};k.cl=function(){};var sq=null,tq=null,uq=function(){sq||(sq=new rq(2,"CastChannelMessageListener","mr.cast.ChannelService",chrome.cast.channel.onMessage));tq||(tq=new rq(1,"CastChannelErrorListener","mr.cast.ChannelService",chrome.cast.channel.onError));return[sq,tq]};var vq=function(){},wq=function(a){if(!a.startsWith("urn:x-org.chromium:media:route:"))return null;var b=a.substring(31);if(!b)return null;var c=b.match(/([^/]*)\/([^-/]*)-([^/]*)\/(.*)/);if(!c)return null;b=new vq;b.h=a;a=m(c);a.next();b.g=a.next().value;b.l=a.next().value;b.m=a.next().value;b.j=a.next().value;return b};var xq=function(a,b,c,d,e){this.id=a;this.presentationId=b;this.sinkId=c;this.mediaSource=d;this.isLocal=e;this.description="";this.iconUrl=null;this.allowStop=!0;this.customControllerPath=null;this.supportsMediaRouteController=!1;this.controllerType=mojo&&mojo.RouteControllerType&&mojo.RouteControllerType.kNone;this.forDisplay=!0;this.offTheRecord=!1;this.Dg=e;this.isOffscreenPresentation=!1},yq=function(a,b,c,d,e){b=d&&ik(d)?a:"urn:x-org.chromium:media:route:"+a+"/"+b+"-"+c+"/"+d;return new xq(b,
a,c,d,e)};var zq=function(a,b,c,d){c=yq(c,"cast",b.getId(),a,d);c.supportsMediaRouteController=!0;mojo&&mojo.RouteControllerType&&(c.controllerType=d&&kk(a)&&b.g&1&&mojo.RouteControllerType.kMirroring?mojo.RouteControllerType.kMirroring:mojo.RouteControllerType.kGeneric);return c},Aq=function(a,b){var c=b.Qb.Zc;c&&(b.description=wk(c),a.displayName="",a.statusText="mirror_desktop"==c.h?"":c.j||"")};var Bq=function(a,b,c,d){return{namespace_:a,data:"string"===typeof b?b:JSON.stringify(b),sourceId:c,destinationId:d}};var Cq=function(a){this.type="CLOSE";this.reasonCode=a};var Dq=function(a){return(a=a.exec(ed))?a[1]:""},Eq=function(){if(gg)return Dq(/Firefox\/([0-9.]+)/);if(nf||of||mf)return If;if(pg)return df()?Dq(/CriOS\/([0-9.]+)/):Dq(/Chrome\/([0-9.]+)/);if(qg&&!df())return Dq(/Version\/([0-9.]+)/);if(lg||mg){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(ed);if(a)return a[1]+"."+a[2]}else if(og)return(a=Dq(/Android\s+([0-9.]+)/))?a:Dq(/Version\/([0-9.]+)/);return""}(),Fq=function(a){return 0<=dd(Eq,a)};var Hq=function(a){this.type="CONNECT";this.origin={};this.userAgent=ed;var b=this.userAgent.indexOf("(")+1;b=this.userAgent.substr(b,this.userAgent.indexOf(")",b)-1-b+1);this.senderInfo={sdkType:2,version:chrome.runtime.getManifest().version,browserVersion:Eq,platform:Gq(),systemVersion:b,connectionType:1};this.connType=a?0:2},Gq=function(){switch(Gj()){case "ChromeOS":return 5;case "Windows":return 3;case "Mac":return 4;case "Linux":return 6}return 0};var Iq=function(a){if(!chrome.runtime.lastError)return null;var b="chrome.cast.channel.send failed, chrome.runtime.lastError: "+(chrome.runtime.lastError.message||"Unknown error");a&&a.ua(b);return Error(b)};var Jq=function(){this.g=new En};Jq.prototype.init=function(){Vm(this)};var Kq=function(a,b,c,d,e){if(!Gn(a.g.h,[b.channelId,c,d].join("#"))){var f=Bq(Gm,new Hq(e),c,d);chrome.cast.channel.send(b,f,a.h.bind(a));a.g.set([b.channelId,c,d].join("#"),e)}};Jq.prototype.h=function(){Iq(Lq)};
var On=function(a,b){a.g.Ac().forEach(function(c){c.split("#")[0]==b.channelId.toString()&&a.g.remove(c)})},Ln=function(a,b,c){a.g.forEach(function(d,e){var f=e.split("#");f[0]==b.channelId.toString()&&(Kq(a,c,f[1],f[2],d),a.g.remove(e))})};Jq.prototype.fb=function(){return"cast.VirtualConnectionManager"};Jq.prototype.bc=function(){var a=In(this.g);return[new Mq(a)]};Jq.prototype.hc=function(){var a=Sm(this);if(a)for(var b in a.g)this.g.set(b,a.g[b])};Oa(Jq);
var Lq=hb("mr.cast.VirtualConnectionManager"),Mq=function(a){this.g=a};var Nq=function(a,b){this.o=b;this.m=a;this.h=new En;this.g=new En;this.j=Jq.Vb();this.ub=null;this.l=new En};t(Nq,Uj);Nq.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];a==chrome.cast.channel.onMessage?this.u.apply(this,q(c)):a==chrome.cast.channel.onError&&this.C.apply(this,q(c))};Nq.prototype.init=function(){this.j.init();Vm(this);ek("mr.cast.ChannelService",this);uq().forEach(function(a){return a.addListener()})};
var jo=function(a,b,c,d,e,f){e=e||a.m;f=f||"receiver-0";var g=Rn(a,b);return g?Oq(a,g,c,d,e,f):Promise.reject("Channel not found for "+b.getId())},dq=function(a,b,c,d,e){if(b=a.h.get(b))a=a.j,Gn(a.g.h,[b.channelId,c,d].join("#"))&&(a.g.remove([b.channelId,c,d].join("#")),c=Bq(Gm,new Cq(e?5:0),c,d),chrome.cast.channel.send(b,c,a.h.bind(a)))};
Nq.prototype.u=function(a,b){var c=this.g.get(a.channelId);if(c){var d=this.ub(c);if(d){if(Mm.hasOwnProperty(b.namespace_)){var e=JSON.parse(b.data);switch(e.type){case "CLOSE":this.j.g.remove([a.channelId,b.destinationId,b.sourceId].join("#"));return;case "RPC":break;default:Kn.ua(function(){return"Got message "+(e.type||e.responseType)+" from "+d.getId()})}}else Kn.ua("Got message in "+b.namespace_+" from "+d.getId());Pq(this.o,d,b)}else Kn.K("Got message for unknown receiver (receiverId="+c+").")}else Kn.K("Got message for unknown channel (channelId="+
a.channelId+").")};var Qq=function(a,b){var c=a.g.get(b.channelId);c&&(a.g.remove(b.channelId),a.h.remove(c))};Nq.prototype.C=function(a,b){Kn.K(function(){return"Channel error: "+JSON.stringify(a)+(b?", "+JSON.stringify(b):"")});Qq(this,a)};
var Rn=function(a,b){b=b.getId();(a=a.h.get(b))||Kn.info("Channel not found for receiver: "+b);return a},Oq=function(a,b,c,d,e,f){Kq(a.j,b,e,f,0==f.indexOf("receiver-0"));Lo(d);var g=Bq(c,d,e,f);"object"===typeof d&&"RPC"==d.type||Kn.ua(function(){return"Channel is sending message: "+JSON.stringify(g)});return new Promise(function(h,n){chrome.cast.channel.send(b,g,function(p){p?p.errorState?(n(Error("Failed to send message")),Qq(a,p)):h(!0):(p=Iq(Kn||void 0),n(p))})})};Nq.prototype.fb=function(){return"cast.ChannelService"};
Nq.prototype.bc=function(){return[new Rq(In(this.h),In(this.g),In(this.l))]};Nq.prototype.hc=function(){var a=Sm(this);a&&(Dn(this.h,a.h),Dn(this.g,a.g),Dn(this.l,a.j))};var Kn=hb("mr.cast.ChannelService"),Rq=function(a,b,c){this.h=a;this.g=b;this.j=c};var Sq=function(a,b,c,d,e,f){this.routeId=a;this.clientId=b;this.appIds=c;this.autoJoinPolicy=d;this.origin=e;this.tabId=f;this.h=this.g=!1},Tq=function(){this.g=[]};Tq.prototype.init=function(){Vm(this)};Tq.prototype.Ba=function(){return this.g.length};var Qo=function(a,b){return ic(a.g,function(c){return c.clientId==b})},Uq=function(a,b){return ic(a.g,function(c){return c.routeId==b})},Vq=function(a,b){a.g=cc(a.g,function(c){return c.clientId!=b})};Tq.prototype.fb=function(){return"cast.ClientRecords"};
Tq.prototype.bc=function(){return[new Wq(this.g)]};Tq.prototype.hc=function(){var a=Sm(this);a&&(this.g=a.g)};var Wq=function(a){this.g=a};var Xq=function(){this.requestId=0;this.type="GET_APP_AVAILABILITY";this.appId=[]};var Yq=function(a,b){this.l=a;this.h=b;this.j=new uo;this.g=new En};Yq.prototype.init=function(){Vm(this)};var Zq=function(a,b){var c=a.g.get(b);c&&(c.cm--,0<c.cm||(An(a.h.g.kc(!1),function(d){switch(wn(d,b)){case "available":d.j[b]="available_rescan";break;case "unavailable":d.j[b]="unavailable_rescan"}}),a.g.remove(b)))};k=Yq.prototype;
k.dr=function(a){var b=this;An(this.g.kc(!0),function(c){a:{switch(wn(a,c)){case "unknown":case "available_rescan":case "unavailable_rescan":var d=!0;break a}d=!1}if(d){var e=a.getId()+":"+c;b.j.contains(e)||(b.j.add(e),d=function(){b.j.remove(e)},(new dh(b.mw.bind(b,a,c),5500,3)).start().then(b.Ls.bind(b,a,c),function(){b.s.error("Failed to get app availability response for "+a.getId()+", appId "+c+" after 3 attempts.");b.Ls(a,c,"unknown")}).then(d,d))}})};
k.Ls=function(a,b,c){c!=wn(a,b)&&(this.s.info(b+" on "+a.getId()+" is "+c),a.j[b]=c,this.h.Rh(a))};
k.mw=function(a,b){var c=this,d=new Xq;d.appId=[b];var e=new Db("MediaRouter.Cast.App.Availability");return this.l.sendRequest(d,a,Hm,5E3).then(function(f){e.end("Success");c.s.ua(function(){return"App availability response "+JSON.stringify(f)});for(var g in f.availability){if("APP_AVAILABLE"==f.availability[g])return"available";if("APP_UNAVAILABLE"==f.availability[g])return"unavailable"}return"unknown"},function(f){e.end("Failure");c.s.error("checkAppAvailability_ failed for "+a.getId()+", appId "+
b);throw f;})};k.fb=function(){return"cast.AppDiscoveryService"};k.bc=function(){return[new $q(In(this.g))]};k.hc=function(){var a=Sm(this);a&&Dn(this.g,a.g)};k.s=hb("mr.cast.AppDiscoveryService");var $q=function(a){this.g=a};var ar=chrome.i18n.getMessage("4528089202128275824");chrome.i18n.getMessage("2810417817914017289");chrome.i18n.getMessage("3413021810593924462");chrome.i18n.getMessage("7603034707785674700");chrome.i18n.getMessage("8009014317872238527");chrome.i18n.getMessage("8636962961150071298");chrome.i18n.getMessage("1802762746589457177");var br=function(a,b){this.h=[];this.g=[];this.sinkId=a;this.session=b;this.o=this.l=null;this.offTheRecord=this.m=!1;this.controller=null;this.j=!0};br.prototype.Nf=function(a){if(lc(this.g,a))return!1;this.g.push(a);return!0};br.prototype.dg=function(a){rc(this.g,a)};var cr=function(){this.s=hb("mr.cast.SessionRecords");this.g=[]};cr.prototype.init=function(){Vm(this)};
var jq=function(a,b){a.s.info("Removing session "+b);xp(a,b);a.g=cc(a.g,function(c){return c.session.sessionId!=b})},Gp=function(a,b){return(a=Sp(a,b))?a.h:[]},Yp=function(a,b){return(a=Vp(a,b))?a.session:null},dr=function(a,b){return ic(a.g,function(c){return lc(c.h,b)})},oq=function(a,b){return ic(a.g,function(c){return lc(c.g,b)})},er=function(a,b){return ic(a.g,function(c){return null!=ic(c.g,function(d){return wq(d).g==b})})},Vp=function(a,b){return ic(a.g,function(c){return c.sinkId==b||c.l==
b})},Sp=function(a,b){return ic(a.g,function(c){return c.session.sessionId==b})},Lp=function(a,b){return(a=Sp(a,b))?a.sinkId:null},Kp=function(a,b){return(a=Sp(a,b))?a.session:null},hq=function(a,b,c){var d=Kp(a,b);d&&(a=cc(c,function(e){return e.playerState!=chrome.cast.media.pg.IDLE}),a.forEach(function(e){if(!e.media){var f=ic(d.media,function(g){return g.mediaSessionId==e.mediaSessionId});f&&(e.media=f.media)}}),d.media=a)};cr.prototype.fb=function(){return"cast.SessionRecords"};
cr.prototype.bc=function(){return[new fr(this.g)]};cr.prototype.hc=function(){var a=Sm(this);if(a)for(var b=0;b<a.g.length;b++){var c=a.g[b],d=new br(c.sinkId,c.session);d.h=c.h;d.g=c.g;d.m=c.m;d.o=c.o;d.l=c.l;d.j=c.j;this.g.push(d)}};
var xp=function(a,b){(a=Sp(a,b))&&a.controller&&(a.controller.dispose(),a.controller=null)},fr=function(a){var b=[];a=m(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=new br(c.sinkId,c.session);d.h=c.h;d.g=c.g;d.m=c.m;d.o=c.o;d.l=c.l;d.offTheRecord=c.offTheRecord;d.j=c.j;b.push(d)}this.g=b};var ir=function(a,b,c){var d=Error.call(this);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.name="RouteRequestError";this.message=b||"";if(c)this.stack=c;else if(Error.captureStackTrace)Error.captureStackTrace(this,ir);else if(b=Error().stack)this.stack=b;this.errorCode=a};t(ir,Error);var jr=function(a,b){this.sinks=a;this.origins=b||null},kr=new jr([]);var pr=function(){var a=this;this.h=1920;this.g=1080;this.maxWidth=this.h;this.maxHeight=this.g;this.minHeight=this.minWidth=180;this.senderSideLetterboxing=!1;this.minFrameRate=0;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=0;this.animatedLatencyMillis=this.minLatencyMillis=this.maxLatencyMillis=400;this.dscpEnabled=["Mac","Linux","ChromeOS"].includes(Gj())||Fj();this.shouldCaptureAudio=this.shouldCaptureVideo=this.enableLogging=!0;var b=window.localStorage?
window.localStorage.getItem(lr):null;if(b)try{var c=JSON.parse(String(b));if(c instanceof Object)nr(this,c),hb("mr.mirror.Settings").K(function(){return"Initial mr.mirror.Settings overridden to: "+or(a)});else throw Error("localStorage["+lr+"] does not parse as an Object: "+b);}catch(d){throw hb("mr.mirror.Settings").error(lr+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',d),Error("Overrides not parseable.  See ERROR log for details.");}};
pr.prototype.clone=function(){var a=new pr;nr(a,this);return a};
var or=function(a){return JSON.stringify(a,function(b,c){if(0==b.length||!b.endsWith("_"))return c})},nr=function(a,b){for(var c=m(Object.keys(b)),d=c.next();!d.done;d=c.next())d=d.value,d.endsWith("_")||typeof b[d]!==typeof a[d]||(a[d]=b[d])},qr=function(a){var b=Math.round(screen.width*window.devicePixelRatio),c=Math.round(screen.height*window.devicePixelRatio);c>b&&(c=m([c,b]),b=c.next().value,c=c.next().value);a.maxHeight*b<a.maxWidth*c?(b=Math.min(a.maxWidth,b),b-=b%160,c=90*b/160):(c=Math.min(a.maxHeight,
c),c-=c%90,b=160*c/90);if(b<Math.max(160,a.minWidth)||c<Math.max(90,a.minHeight))b=Math.max(160,a.minWidth),c=Math.max(90,a.minHeight);a.maxWidth=b;a.maxHeight=c},lr="mr.mirror.Settings.Overrides";var rr=function(a){this.C="sender-"+af();this.h=new En;this.u=null;Vm(this);this.vc=a;this.l=new Tq;this.j=new cr;this.o=new Nq(this.C,this);this.g=new Jn(this.o,this);this.D=new go(this.o,this.C);this.m=null;this.ad=new Fp(this.D,this.g,this.l,this.j,this.o,this);this.F=new yo(this.g,this.D)};k=rr.prototype;k.getName=function(){return"cast"};
k.initialize=function(a){a=a&&"boolean"===typeof a.enable_cast_sink_query?a.enable_cast_sink_query:!0;this.s.info("Query enabled: "+a);this.D.init();this.j.init();this.ad.init();this.o.init();this.g.init();a&&(this.m=new Yq(this.D,this.g),this.m.init())};k.mj=function(){return this.h.La()};
k.xp=function(a){var b=this;if(null!=sr(a))return new jr([]);var c=new uo;tr(a).forEach(function(d){Tn(b.g,d).map(function(e){return e.h}).forEach(function(e){c.add(e)})});return new jr(c.La(),-1!=a.indexOf("0F5096E8")?jk:null)};
k.startObservingMediaSinks=function(a){var b=this,c=sr(a);c?(this.s.info("Received broadcast request "+a),An(this.g.g.kc(!1),function(d){b.D.sendMessage(c,d,Lm).catch(function(e){b.s.error("Broadcast failed "+e.message)})})):this.m&&tr(a).forEach(function(d){var e=b.m,f=e.g.get(d);f?f.cm++:e.g.set(d,{cm:1});e.s.info("Scanning sinks for app availability");An(e.h.g.kc(!1),e.dr,e)})};k.stopObservingMediaSinks=function(a){var b=this;null!=sr(a)||this.m&&tr(a).forEach(function(c){Zq(b.m,c)})};
k.startObservingMediaRoutes=function(){};k.stopObservingMediaRoutes=function(){};k.ub=function(a){return(a=this.g.ub(a))?a.h:null};
var ur=function(a,b,c){a.s.error("Error launching.",c);a.dg(b.id,!1,!0,"error");c=new tj(ar,"warning");c.routeId=b.id;wj(c,b.sinkId);a.vc.Rg(c)},yr=function(a,b,c,d,e,f,g,h){sn().h=new kn(c.l,c.xd());var n=zq(b,c,d,!0);n.forDisplay=!1;n.offTheRecord=e;a.h.set(n.id,n);vr(a.vc,a,n);kq(a);(e=gp(b))&&e.g&&wr(a,e,n.id,g,h);return new Promise(function(p,r){kk(b)||lk(b)||ik(b)?(n.Qb={tabId:h,sessionId:"",ii:c.xd()||"",mf:c.l||"",GC:c.h.friendlyName||""},ik(b)&&(n.isOffscreenPresentation=!0),a.vc.Ug(a,n,
d,function(y){return Bj(xr(a,b,c,d,f,g,h,y))}).promise.then(function(){var y=oq(a.j,n.id);y.j=!1;Aq(y.session,n);y.controller&&(y.controller.m=!1,tp(y.controller));p(n)},function(y){ur(a,n,y);r(y)})):xr(a,b,c,d,f,g,h,n).then(function(){p(n)},function(y){ur(a,n,y);r(y)})})},xr=function(a,b,c,d,e,f,g,h){return nq(a.ad,zr(b,c,e),c).then(function(n){a.Nf(b,c,d,n,f,g,h);return h})};
rr.prototype.createRoute=function(a,b,c,d,e,f,g){var h=this,n=this.g.ub(b);if(!n)return Aj(Error("No sink with ID "+b));var p=hp(a);if(p){setTimeout(function(){Jp(h.ad,p,n,chrome.cast.Ak.CAST)},0);var r=function(){return yr(h,a,n,c,d,e,f,g)},y=Qo(this.l,p);if(y)return Bj(this.terminateRoute(y.routeId).then(r,r));if(f&&g&&(b=Ar(this,a,f,g,d,e,b)))return b}return Bj(yr(this,a,n,c,d,e,f,g))};
rr.prototype.dg=function(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?"closed":d;this.s.info("Remove route "+a);var e=Uq(this.l,a);if(e){b=b||e.h;var f=e.clientId;this.s.info("Remove client "+f);for(var g=this.j,h=0;h<g.g.length;h++)rc(g.g[h].h,f);Vq(this.l,f)}if(f=oq(this.j,a))f.dg(a),Br(this,f.g);if(g=this.h.get(a))if(g.Dg&&f&&(dq(this.o,g.sinkId,e?e.clientId:this.C,f.session.transportId,b),g.forDisplay&&e&&(this.u={Bg:e,lr:f})),this.h.remove(a),this.vc.zj(this,g),kq(this),c)this.vc.onPresentationConnectionClosed(a,
d,"Remove route");else this.vc.onPresentationConnectionStateChanged(a,"terminated")};
var lq=function(a,b){b.g.forEach(function(c){if(c=a.h.get(c)){var d=b.session;if(c.forDisplay){var e=qq(d.appId);e&&!c.isLocal?(c.description=d.statusText||"",d.displayName="",d.statusText=""):e||(c.description=d.statusText||d.displayName);b.controller&&tp(b.controller)}Cr(a.vc)}})},Dr=function(a,b){gc(b,function(c){c=a.h.get(c,null);if(!c||!c.mediaSource)return!1;var d=gp(c.mediaSource);d=d?d.u:!1;return c.isLocal&&!d})&&$b(b,function(c){if(c=a.h.get(c,null))c.isLocal=!0})},Br=function(a,b){var c=
[],d=[],e=null;b.forEach(function(f){if(f=a.h.get(f)){f.forDisplay=!1;var g=gp(f.mediaSource);g&&ic(bp(g),No)||(f.Dg?(g=g?cp(g):null,e||g==chrome.cast.se.CUSTOM_CONTROLLER_SCOPED||(c.push(f),e=f.sinkId)):e&&e!=f.sinkId?c.push(f):d.push(f))}});$b(0<c.length?c:d,function(f){f.forDisplay=!0})},wr=function(a,b,c,d,e){var f=b.g;if(f&&!Qo(a.l,f)){a.s.info("Add client "+f);var g=bp(b);a.l.g.push(new Sq(c,f,g,cp(b),d||null,void 0!==e?e:null))}};
rr.prototype.Nf=function(a,b,c,d,e,f,g){var h=Vp(this.j,b.getId());if(!h){var n=this.j;h=b.getId();n.s.info("Adding new session: "+h+", "+d.sessionId);var p=Sp(n,d.sessionId);p?(Ho(d)?(p.o=d,p.l=h):Ho(p.session)&&(p.o=p.session,p.l=p.sinkId,p.session=d,p.sinkId=h),h=p):(h=new br(h,d),n.g.push(h))}g&&g.isLocal&&g.Qb&&(h.j=!1);var r=null!=a;if(!r&&No(d.appId))return null;null==a?(p=new Yo([{appId:d.appId,capabilities:d.capabilities}]),a=dp(p)[0]):p=gp(a);if(n=g){if(!this.h.get(n.id))return this.s.K("Route "+
n.id+" not added"),n}else n=zq(a,b,c||d.sessionId,r),this.h.set(n.id,n);c=n.id;this.s.info("Add route "+c);a=null;p&&(a=p.g,wr(this,p,c,e,f));h.Nf(c);n.Dg&&(e=this.o,f=a||this.C,c=d.transportId,p=!(p&&p.u),(r=Rn(e,b))&&Kq(e.j,r,f,c,p));h.offTheRecord=n.offTheRecord;e=h.g;Dr(this,e);Br(this,e);e=n;f=d.sessionId;qq(d.appId)?e.isLocal&&f&&e.Qb?e.Qb.sessionId=f:(e.description=d.statusText||"",d.displayName="",d.statusText=""):e.description=d.statusText||d.displayName;g?Cr(this.vc):vr(this.vc,this,n);
kq(this);if(g=a)lc(h.h,a)?g=!1:(h.h.push(a),g=!0);g&&(g=this.ad,Uo(g.g,a,new Oo("new_session",d)),Wp(g,d,b));return n};
rr.prototype.terminateRoute=function(a){var b=this,c=this.h.get(a);if(!c)return Promise.reject(new ir(3,"Route in Cast provider not found for routeId  "+a));var d=oq(this.j,a);if(!d)return this.dg(a,!0),Promise.resolve();var e=d.session.sessionId,f=this.g.ub(c.sinkId);if(!f)return Tp(this.ad,e),Promise.resolve();(a=Uq(this.l,a))&&Jp(this.ad,a.clientId,f,chrome.cast.Ak.STOP);mp(0);return new Promise(function(g){var h=function(){iq(b.ad,f.getId());g()};b.D.sendRequest(new co(e),f,Hm).then(h,h)})};
var Er=function(a,b){var c=null;Bn(a.h.kc(!1),function(f){if(!f.Dg)return!1;var g=a.g.ub(f.sinkId);if(!g||!fp(b,zr(f.mediaSource,g)))return!1;c=f;return!0});if(!c||!c.mediaSource)return null;var d=hp(c.mediaSource);if(!d)return null;var e=Qo(a.l,d);return e?(d=dr(a.j,d))?{Bg:e,lr:d}:null:null},Ar=function(a,b,c,d,e,f,g){var h=null;Bn(a.h.kc(!1),function(p){var r=p.Qb;return r&&null!=r.tabId&&r.tabId==d&&kk(p.mediaSource)?(h=p,!0):!1});if(!h)return null;var n=function(){return a.createRoute(b,g||h.sinkId,
"",e,f,c,null==d?void 0:d)};return Bj(a.terminateRoute(h.id).then(n,n))};k=rr.prototype;k.connectRouteByRouteId=function(a,b,c,d,e){if(!gp(a))return Aj(Error("Unsupported presentation URL"));if(!b)return Aj(Error("No routeId"));b=wq(b);b=Sp(this.j,b.g);if(!b)return Aj(Error("No matching route"));var f=this.g.ub(b.sinkId);return f?(a=this.Nf(a,f,c,b.session,d,e))?zj(a):Aj(Error("Failed to create route")):Aj(Error("No sink"))};
k.joinRoute=function(a,b,c,d,e,f){var g=gp(a);if(!g)return Aj(Error("Unsupported presentation URL"));if(b==chrome.cast.Pm){a:{var h=Er(this,g);if(!h){if(!this.u||this.u.Bg.origin!=e||this.u.Bg.tabId!=f){h=null;break a}h=this.u}switch(cp(g)){case chrome.cast.se.PAGE_SCOPED:h=null;break a;case chrome.cast.se.ORIGIN_SCOPED:if(e!=h.Bg.origin){h=null;break a}break;case chrome.cast.se.TAB_AND_ORIGIN_SCOPED:if(e!=h.Bg.origin||f!=h.Bg.tabId){h=null;break a}}h=Sp(this.j,h.lr.session.sessionId)}if(!h&&(g.j?
g.j:chrome.cast.pi.CREATE_SESSION)!=chrome.cast.pi.CAST_THIS_TAB&&(d=Ar(this,a,e,f,c,d)))return d}else h=Fr(this,b);if(!h)return Aj(Error("No matching route"));if(h.offTheRecord!=c)return Aj(Error("Off the record mismatch"));d=this.g.ub(h.sinkId);if(!d)return Aj(Error("No sink"));a=this.Nf(a,d,b,h.session,e,f);a.offTheRecord=c;return zj(a)};k.detachRoute=function(a){this.dg(a,!1,!0)};
k.ql=function(a){var b=this.g.ub(a);if(!b)throw Error("Cannot mirror with no sink.");var c=new pr;b=b.g;b&1||(c.shouldCaptureVideo=!1);b&4||(c.shouldCaptureAudio=!1);c.shouldCaptureAudio&&!c.shouldCaptureVideo&&(c.minLatencyMillis=c.maxLatencyMillis,c.animatedLatencyMillis=c.maxLatencyMillis);c.senderSideLetterboxing=!0;qr(c);Object.freeze(c);this.s.info(function(){return"Settings for "+a+": "+or(c)});if(!c.shouldCaptureAudio&&!c.shouldCaptureVideo)throw Error("Cannot start mirroring without video or audio capture");
return c};k.pl=function(){return"cast_streaming"};k.Kq=function(a){var b=this.h.get(a);b&&b.Qb&&b.Qb.Zc&&(a=oq(this.j,a))&&(Aq(a.session,b),a.controller&&tp(a.controller))};
k.sendRouteMessage=function(a,b,c){var d=this;if(!c)return new Promise(function(h,n){"string"!==typeof b&&n(Error("Cannot send non-string messages via ApiHandler."));d.ad.yj(b);h()});var e=oq(this.j,a);if(!e)return Promise.reject(Error("Not managing the route "+a));var f=this.g.ub(e.sinkId);if(!f)return Promise.reject(Error("Sink no longer accessible"));var g=(a=Uq(this.l,a))?a.clientId:this.C;return new Promise(function(h){jo(d.o,f,c.namespace,b,g,e.session.transportId).then(h,h)})};
k.sendRouteBinaryMessage=function(a){return Promise.reject(Error("Route "+a+" does not support sending binary data."))};k.To=function(a,b){var c=this.g.ub(b);if(!c)return!1;if(!this.m)return!0;a=zr(a,c);return(a=ep(a))&&0!=a.length?gc(a,function(d){return Nm(wn(c,d))}):!1};k.Wk=function(a,b,c){var d=tr(a);return d&&0!=d.length?b==chrome.cast.Pm?!0:c&&c.mediaSource?(a=ep(c.mediaSource),gc(a,function(e){return lc(d,e)})):void 0==b||Fr(this,b)?!0:!1:!1};
var zr=function(a,b,c){return gp(a)?a:kk(a)||lk(a)||ik(a)?(a={appId:0==(b.g&1)?"85CDB22F":"0F5096E8",capabilities:Jo(b.g)},dp(new Yo([a],void 0,void 0,void 0,c))[0]):a},tr=function(a){var b=[],c=gp(a);if(c)b=bp(c);else if(kk(a)||lk(a)||ik(a))lk(a)||b.push("85CDB22F"),b.push("0F5096E8");return b},sr=function(a){var b=gp(a);if(!b)return null;a=tr(a);var c=b.C||"";b=b.o;return c&&b?new ao(a,c,JSON.stringify(b)):null},Fr=function(a,b){return 0==b.indexOf(chrome.cast.no)?Sp(a.j,b.substr(chrome.cast.no.length)):
er(a.j,b)},Pq=function(a,b,c){var d=a.F;if(zo(d)&&Mm.hasOwnProperty(c.namespace_)){var e=b.xd();if(e){var f=JSON.parse(c.data);if("RECEIVER_STATUS"===f.type){var g=f.status&&f.status.applications&&f.status.applications[0],h=f=null;g&&(g.appId&&(f=g.appId),g.sessionId&&(h=g.sessionId));g=d.h.get(e);d.h.set(e,new Dm(e,f,h));g&&g.appId===f||Ao(d)}}}a=a.ad;b=b.getId();Mm.hasOwnProperty(c.namespace_)?eq(a,b,c):fq(a,b,c)};k=rr.prototype;
k.Vl=function(a){if(0==this.g.g.Ba())this.vc.onSinkAvailabilityUpdated(this,0);this.ad.Vl(a.getId());Bo(this.F);this.vc.Yf()};k.Rh=function(a){this.m&&this.m.dr(a);Bo(this.F);this.vc.Yf()};k.fb=function(){return"cast.Provider"};k.bc=function(){return[new Gr(this.C,In(this.h),this.u)]};k.hc=function(){var a=Sm(this);a&&(this.C=a.senderId,Dn(this.h,a.g),this.u=a.h)};k.searchSinks=function(){return db()};
k.createMediaRouteController=function(a,b,c){return(a=this.ad.createMediaRouteController(a,b,c))?Promise.reject(a):Promise.resolve()};k.provideSinks=function(a){Qn(this.g,a)};var kq=function(a){var b=a.mj().some(function(c){return c.isLocal});Hr(a.vc,a.fb(),b)};rr.prototype.s=hb("mr.CastProvider");var Gr=function(a,b,c){this.senderId=a;this.g=b;this.h=c};var Ir=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,Jr=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}},Kr=function(a,b){if(!b)return a;var c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=a.substring(d+1,c);a=[a.substr(0,
d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;return a[0]+(a[1]?"?"+a[1]:"")+a[2]},Lr=function(a,b,c){if(Array.isArray(b))for(var d=0;d<b.length;d++)Lr(a,String(b[d]),c);else null!=b&&c.push(a+(""===b?"":"="+encodeURIComponent(String(b))))},Mr=function(a,b){var c=[];for(b=b||0;b<a.length;b+=2)Lr(a[b],a[b+1],c);return c.join("&")},Nr=function(a){var b=[],c;for(c in a)Lr(c,a[c],b);return b.join("&")},Or=function(a,b){var c=2==arguments.length?Mr(arguments[1],0):Mr(arguments,1);return Kr(a,c)},Pr=function(a,
b){b=Nr(b);return Kr(a,b)},Qr=function(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";return Kr(a,b+c)},Rr=function(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(38==f||63==f)if(f=a.charCodeAt(b+e),!f||61==f||38==f||35==f)return b;b+=e+1}return-1},Sr=/#|$/,Tr=function(a,b){var c=a.search(Sr),d=Rr(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.substr(d,e-d).replace(/\+/g," "))},Ur=/[?&]($|#)/,
Vr=function(a,b){var c=a.length-1;0<=c&&a.indexOf("/",c)==c&&(a=a.substr(0,a.length-1));Qc(b,"/")&&(b=b.substr(1));return""+a+"/"+b};var Wr=function(a){this.Lc=this.m=this.j="";this.C=null;this.o=this.g="";this.l=!1;var b;a instanceof Wr?(this.l=a.l,Xr(this,a.j),this.m=a.m,this.Lc=a.Lc,Yr(this,a.Nb()),this.g=a.g,Zr(this,a.h.clone()),this.o=a.o):a&&(b=String(a).match(Ir))?(this.l=!1,Xr(this,b[1]||"",!0),this.m=$r(b[2]||""),this.Lc=$r(b[3]||"",!0),Yr(this,b[4]),this.g=$r(b[5]||"",!0),Zr(this,b[6]||"",!0),this.o=$r(b[7]||"")):(this.l=!1,this.h=new as(null,this.l))};
Wr.prototype.toString=function(){var a=[],b=this.j;b&&a.push(bs(b,cs,!0),":");var c=this.Lc;if(c||"file"==b)a.push("//"),(b=this.m)&&a.push(bs(b,cs,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.Nb(),null!=c&&a.push(":",String(c));if(c=this.g)this.Lc&&"/"!=c.charAt(0)&&a.push("/"),a.push(bs(c,"/"==c.charAt(0)?ds:es,!0));(c=this.h.toString())&&a.push("?",c);(c=this.o)&&a.push("#",bs(c,fs));return a.join("")};
Wr.prototype.resolve=function(a){var b=this.clone(),c=!!a.j;c?Xr(b,a.j):c=!!a.m;c?b.m=a.m:c=!!a.Lc;c?b.Lc=a.Lc:c=null!=a.C;var d=a.g;if(c)Yr(b,a.Nb());else if(c=!!a.g){if("/"!=d.charAt(0))if(this.Lc&&!this.g)d="/"+d;else{var e=b.g.lastIndexOf("/");-1!=e&&(d=b.g.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){d=Qc(e,"/");e=e.split("/");for(var f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&
f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?b.g=d:c=""!==a.h.toString();c?Zr(b,a.h.clone()):c=!!a.o;c&&(b.o=a.o);return b};Wr.prototype.clone=function(){return new Wr(this)};var Xr=function(a,b,c){a.j=c?$r(b,!0):b;a.j&&(a.j=a.j.replace(/:$/,""))};Wr.prototype.Nb=function(){return this.C};
var Yr=function(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.C=b}else a.C=null},Zr=function(a,b,c){b instanceof as?(a.h=b,gs(a.h,a.l)):(c||(b=bs(b,hs)),a.h=new as(b,a.l))},$r=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},bs=function(a,b,c){return"string"===typeof a?(a=encodeURI(a).replace(b,is),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},is=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},
cs=/[#\/\?@]/g,es=/[#\?:]/g,ds=/[#\?]/g,hs=/[#\?@]/g,fs=/#/g,as=function(a,b){this.h=this.g=null;this.j=a||null;this.l=!!b},js=function(a){a.g||(a.g=new En,a.h=0,a.j&&Jr(a.j,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))},ls=function(a){var b=po(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new as(null,void 0);a=oo(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];Array.isArray(f)?ks(c,e,f):c.add(e,f)}return c};k=as.prototype;k.Ba=function(){js(this);return this.h};
k.add=function(a,b){js(this);this.j=null;a=ms(this,a);var c=this.g.get(a);c||this.g.set(a,c=[]);c.push(b);this.h+=1;return this};k.remove=function(a){js(this);a=ms(this,a);return Gn(this.g.h,a)?(this.j=null,this.h-=this.g.get(a).length,this.g.remove(a)):!1};k.clear=function(){this.g=this.j=null;this.h=0};k.dc=function(){js(this);return 0==this.h};var ns=function(a,b){js(a);b=ms(a,b);return Gn(a.g.h,b)};k=as.prototype;k.Cg=function(a){var b=this.La();return lc(b,a)};
k.forEach=function(a,b){js(this);this.g.forEach(function(c,d){$b(c,function(e){a.call(b,e,d,this)},this)},this)};k.Ac=function(){js(this);for(var a=this.g.La(),b=this.g.Ac(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};k.La=function(a){js(this);var b=[];if("string"===typeof a)ns(this,a)&&(b=vc(b,this.g.get(ms(this,a))));else{a=this.g.La();for(var c=0;c<a.length;c++)b=vc(b,a[c])}return b};
k.set=function(a,b){js(this);this.j=null;a=ms(this,a);ns(this,a)&&(this.h-=this.g.get(a).length);this.g.set(a,[b]);this.h+=1;return this};k.get=function(a,b){if(!a)return b;a=this.La(a);return 0<a.length?String(a[0]):b};var ks=function(a,b,c){a.remove(b);0<c.length&&(a.j=null,a.g.set(ms(a,b),yc(c)),a.h+=c.length)};
as.prototype.toString=function(){if(this.j)return this.j;if(!this.g)return"";for(var a=[],b=this.g.Ac(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.La(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}}return this.j=a.join("&")};as.prototype.clone=function(){var a=new as;a.j=this.j;this.g&&(a.g=this.g.clone(),a.h=this.h);return a};
var ms=function(a,b){b=String(b);a.l&&(b=b.toLowerCase());return b},gs=function(a,b){b&&!a.l&&(js(a),a.j=null,a.g.forEach(function(c,d){var e=d.toLowerCase();d!=e&&(this.remove(d),ks(this,e,c))},a));a.l=b};as.prototype.extend=function(a){for(var b=0;b<arguments.length;b++)ro(arguments[b],function(c,d){this.add(d,c)},this)};var os=function(a,b){this.input=a;this.domain=b};var ps=function(a){this.g=a;this.s=hb("mr.ExternalMessageHandler")};
ps.prototype.onMessage=function(a,b,c){var d=this;this.s.info("Received a message from "+b.id+" type: "+a.type);var e=chrome.runtime.id;"start"==a.type?(a=a.message,this.g.searchSinks("pseudo:cloud","urn:x-org.chromium.media:source:desktop",new os(a.meetingName,a.domain)).then(function(f){var g="PresentationId"+b.id+qs++;d.g.createRoute("urn:x-org.chromium.media:source:desktop",f,g).then(function(h){c(new ch(e,"route",h.id))}).catch(function(h){c(new ch(e,"error",h))})},function(){c(new ch(e,"error",
Error("Failed to find sink.")))})):"stop"==a.type?this.g.terminateRoute(a.message.routeId).then(function(){c(new ch(e,"stopped"))}):"subscribe_log_data"==a.type?(jb.push(function(f){chrome.runtime.sendMessage(b.id,new ch(e,"log_message",f))}),c(new ch(e,"subscribed"))):(c(new ch(e,"error",Error("Unhandled message type"))),this.s.error("Unhandled message type "+a.type))};var qs=0;var rs=function(){this.g=[];this.h=[]};k=rs.prototype;k.enqueue=function(a){if(1E3<=this.Ba()){if(this.dc())throw Error("Empty queue");0==this.g.length&&(this.g=this.h,this.g.reverse(),this.h=[]);this.g.pop()}this.h.push(a)};k.Ba=function(){return this.g.length+this.h.length};k.dc=function(){return 0==this.Ba()};k.La=function(){var a=this.g.slice();a.reverse();a.push.apply(a,q(this.h));return a};k.clear=function(){this.g=[];this.h=[]};var ss=function(){this.g=new rs;this.h=Date.now()},us=function(){null==ts&&(ts=new ss);return ts};
ss.prototype.init=function(){ib=1;var a=hb("browser"),b=window.onerror;window.onerror=function(d,e,f,g,h){try{var n=h.result.error.errors[0];if("usageLimits"==n.domain&&"accessNotConfigured"==n.reason)return!0}catch(p){}b&&b(d,e,f,g,h);a.error("Error: "+d+" ("+e+" @ Line: "+f+")",h)};jb.push(this.l.bind(this));var c=window.localStorage["debug.logs"];c&&(ib=pb(c.toUpperCase()));(c=window.localStorage["debug.console"])&&"false"!=c.toLowerCase()&&jb.push(this.j.bind(this))};
ss.prototype.l=function(a){this.g.enqueue(vs(this,a,!1));a=a.wd;a instanceof Error&&a.stack&&this.g.enqueue(a.stack)};ss.prototype.j=function(a){var b=[vs(this,a,!0)];a.wd&&b.push(a.wd);switch(a.level){case 3:console.error.apply(console,q(b));break;case 2:console.warn.apply(console,q(b));break;case 1:console.log.apply(console,q(b));break;default:console.debug.apply(console,q(b))}};
var vs=function(a,b,c){var d=["["];if(c)a=(Date.now()-a.h)/1E3,d.push(("       "+a.toFixed(3)).slice(-7));else{a=new Date(b.time);var e=function(f){return 10>f?"0"+f:f};d.push(a.getFullYear().toString(),"-",e(a.getMonth()+1),"-",e(a.getDate())," ",e(a.getHours()),":",e(a.getMinutes()),":",e(a.getSeconds()),".",e(Math.floor(a.getMilliseconds()/10)))}d.push("][",ob[b.level],"][",b.M,"] ",b.message);if(!c&&null!=b.wd)if(d.push("\n"),b.wd instanceof Error)d.push(b.wd.message);else try{d.push(JSON.stringify(b.wd))}catch(f){d.push(b.wd.toString())}d.push("\n");
return d.join("")},ws=function(){var a=us();return 0==a.g.Ba()?"NA":a.g.La().join("")},xs=function(){var a=us();Vm(a)};ss.prototype.fb=function(){return"LogManager"};ss.prototype.bc=function(){return[this.g.La()]};ss.prototype.hc=function(){var a=this.g.La();this.g.clear();for(var b=m(Sm(this)||[]),c=b.next();!c.done;c=b.next())this.g.enqueue(c.value);a=m(a);for(c=a.next();!c.done;c=a.next())this.g.enqueue(c.value)};var ts=null;var ys=function(a){return Promise.all(a.map(function(b){return b.then(function(c){return{bf:!0,value:c}},function(c){return{bf:!1,reason:c}})}))};var zs=function(a){this.g=a;this.s=hb("mr.InternalMessageHandler")};
zs.prototype.onMessage=function(a,b,c){var d=this;if("retrieve_log_data"!=a.type)c(new ch(chrome.runtime.id,"error",Error("Unhandled message type")));else{var e={logs:ws(),device:un()};b=[];var f=Cb(e.device.ip).then(function(h){h.yg&&(e.device.version=h.yg)});b.push(f);var g=this.g.u;g&&(a=As(this,g,a.source).then(function(h){h&&(e.castStreamingLogs=h)},function(){d.s.error("Log upload failed for service: "+g)}),b.push(a));this.g.config&&(this.g.config.enable_cast_sink_query?b.push(Bs(this,e)):e.castDeviceCounts=
"See b/151090350");e.dialDeviceCounts="See b/151090350";a=this.g.getMediaSinkServiceStatus().then(function(h){e.mediaSinkServiceStatus=h.status},function(){d.s.error("Failed to get media sink service status")});b.push(a);a=Cs(this.g).then(function(h){e.mediaRouterLogs=h.logs},function(){d.s.error("Failed to get Media Router logs")});b.push(a);this.g.config&&(e.mirroringServiceEnabled=this.g.config.use_mirroring_service,e.nativeCastMrpEnabled=!this.g.config.enable_cast_sink_query,e.nativeDialMrpEnabled=
!this.g.config.enable_dial_sink_query);ys(b).then(function(){c(e)})}};var Bs=function(a,b){return Yj("mr.cast.SinkDiscoveryService").then(function(c){c=c.aj;b.castDeviceCounts=c.oq+"."+c.Mo},function(){a.s.error("Failed to get device counts for castDeviceCounts.")})},As=function(a,b,c){return Ds(a.g,b).then(function(d){return d.Xj(c)})};var Es={SUCCESS:0,jH:1},Fs={xv:0,Xu:1,xS:2,BI:3,AI:4,XK:5,TIMEOUT:6,dN:7},Gs=function(a){Ob("MediaRouter.Cloud.Session.Start",a,Es)};var Hs=function(a){this.g=a},Is=new Hs("https://www.googleapis.com/calendar/v3"),Js=new Hs("https://www.googleapis.com/hangouts/v1");var Ks=function(a,b,c,d,e,f){c=void 0===c?null:c;a||null==c&&(c="default");this.cq=a;this.Xa=b;this.Lc=c;this.Mg=void 0===d?null:d;this.ae=void 0===e?null:e;this.eg=void 0===f?null:f};Ks.prototype.Ub=function(){var a="";this.ae?a=this.ae:this.Mg&&(a=this.Mg);return a};Ks.prototype.le=function(){return this.cq};Ks.prototype.getId=function(){return this.Xa};Ks.prototype.merge=function(a){!this.eg&&a.eg&&(this.eg=a.eg);!this.ae&&a.ae&&(this.ae=a.ae);this.ae&&a.ae&&this.eg&&(this.ae=a.ae)};var Ls=function(a,b){this.g=a;this.h=b;this.s=hb("mr.cloud.calendar.CalendarService")},Ps=function(a){var b=a.h.h;return b?Ms(a,b).then(function(c){a.s.info(Ns(c.length)+" events discovered before filtering.");return Os(a,c)},function(c){a.s.K("Error getting Hangouts from calendar.",c);return[]}):(a.s.error("No user email to use as calendar id to query for events."),Promise.resolve([]))},Ns=function(a){return 20<a?"20+":a.toString()},Ms=function(a,b){var c=Date.now();return Qs(a,b,new Date(c),new Date(c+
9E5)).then(function(d){return d.filter(a.j)})};Ls.prototype.j=function(a){return!(!a.start||!a.end||a.start.date||a.end.date||!a.start.dateTime||!a.end.dateTime)};
var Qs=function(a,b,c,d){b=Rs(Is.g,["calendars",b,"events"],{timeMin:c.toJSON(),timeMax:d.toJSON(),singleEvents:!0});a.s.ua("Retrieving Hangouts from Calendar: "+b);Ob("MediaRouter.Cloud.CalendarApiCaller",Pb,Qb);null!=Rb&&(clearTimeout(Rb),Rb=null);return Ss(a.g,b,"GET").then(function(e){return e.items?e.items:[]})},Os=function(a,b){var c=[];b.filter(function(d){return d.hangoutLink}).forEach(function(d){var e=new Wr(d.hangoutLink);if("meet.google.com"==e.Lc)c.push(new Ks(!0,e.g.substring(1),void 0,
void 0,d.summary));else if(e=e.g.substring(12).split("/"),2==e.length){var f=m(e);e=f.next().value;f=f.next().value;if(-1!=e.indexOf(".")){var g=f;var h=e}c.push(new Ks(!1,f+"@"+e,h,g,d.summary,void 0))}else a.s.K("Invalid hangout link from calendar event: "+d.hangoutLink)});a.s.info(Ns(c.length)+" events discovered with Hangout links.");return c};var Ts=function(a,b){this.type=a;this.data=b},Vs=function(a,b){var c=Us;this.description=a;this.settings=b||null;this.mediaConstraints=c||null;this.presentationId=this.presentationUrl=null};var Ws=function(a,b,c,d,e,f,g,h,n){this.Nc=new Om(a,c,h,n,f);this.deviceId=b;this.g=d;this.model=e};da.Object.defineProperties(Ws.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this.Nc.id}},displayName:{configurable:!0,enumerable:!0,set:function(a){this.Nc.friendlyName=a}}});
var Xs=function(a){var b=a.Lc,c;a.Mg&&a.Ub()!=a.Mg&&(c=a.Mg);var d=a.getId(),e=a.le()?"meet:"+d:tn(sn(),d);Ws.call(this,e,d,a.Ub(),"mesi","Hangout",b,!1,a.le()?"meeting":"hangout",c);this.le=a.le();this.di=a.eg||""};t(Xs,Ws);var Ys=function(a,b){this.m=a;this.l=b;this.g=new Map;this.j=new Map;this.h=null};Ys.prototype.Gg=function(){var a=this.h+2E4;if(null==this.h||a<Date.now())this.h=Date.now(),Zs(this);return Array.from(this.g.values())};Ys.prototype.ub=function(a){return this.g.get(a)||null};
var Zs=function(a){a.m().then(function(b){$s(a,b)})},$s=function(a,b){var c=new Map(a.g),d=new Map,e=new Map,f=[],g=[];b.forEach(function(h){var n=h.id;d.set(n,h);e.set(n,h.deviceId);c.has(n)?c.has(n)&&JSON.stringify(c.get(n))!=JSON.stringify(h)&&g.push(h.Nc):f.push(h.Nc);c.delete(n)});b=[].concat(q(c.values())).map(function(h){return h.Nc});a.j.clear();a.j=e;a.g.clear();a.g=d;at(a,f,g,b)},at=function(a,b,c,d){0<b.length&&bt(a.l,b);0<c.length&&a.l.Yf(c);0<d.length&&ct(a.l,d)},dt=function(a,b,c){this.sinks=
a;this.g=b;this.h=c};var gt=function(a,b,c){if(!et){var d=Ug(Vg(),"").M;d&&(Ug(Vg(),d.getName()).level=Mg);var e=ft;d&&Ug(Vg(),d.getName()).g.push(e);et=!0}this.l=a;this.m=b;this.g=new Ys(this.j.bind(this),c);this.h=new Map;Vm(this)},ft=function(a){kb({M:a.j,level:qb(a.h.value),time:a.m,message:a.getMessage(),wd:a.g})};gt.prototype.Gg=function(){return this.g.Gg()};gt.prototype.ub=function(a){return this.g.ub(a)};
gt.prototype.j=function(){var a=this;this.s.info("Fetching hangouts");return ys([ht(this.m),Ps(this.l)]).then(function(b){var c=Array.from(a.h.values());b.forEach(function(e){e.bf?c=c.concat(e.value):a.s.error("Error discovering Hangouts",e.reason)});var d=c.reduce(function(e,f){var g=e[f.getId()];g?g.merge(f):g=f;e[g.getId()]=g;return e},{});return Object.keys(d).map(function(e){e=d[e];Nb("MediaRouter.Cloud.Hangout.Sink.Discovered");return new Xs(e)})})};
var jt=function(a,b){return Yj("mr.mirror.hangouts.MeetingsService").then(function(c){return c.ib(b)}).then(function(c){return it(a,c)},function(){return b.input.match(/^#/)?Promise.reject(Error("Failed to resolve meeting alias.")):it(a,b.input,b.domain)})},it=function(a,b,c){c=c||void 0;var d=!c;b=new Ks(d,d?b:b+"@"+c,c,b,void 0,void 0);a.h.set(b.getId(),b);b=new Xs(b);a.g.g.set(b.id,b);return b.Nc};gt.prototype.fb=function(){return"HangoutSinkDiscoveryService"};
gt.prototype.bc=function(){for(var a={},b=m(this.h.entries()),c=b.next();!c.done;c=b.next()){var d=m(c.value);c=d.next().value;d=d.next().value;a[c]=d}b=this.g;c={};d=m(b.g.entries());for(var e=d.next();!e.done;e=d.next()){var f=m(e.value);e=f.next().value;f=f.next().value;c[e]=f}d={};e=m(b.j.entries());for(f=e.next();!f.done;f=e.next()){var g=m(f.value);f=g.next().value;g=g.next().value;d[f]=g}return[{cache:new dt(c,d,b.h),manualHangouts:a}]};
gt.prototype.hc=function(){var a=Sm(this);if(a){var b=this.g,c=a.cache,d;for(d in c.sinks){var e=b.g,f=e.set,g=d;var h=c.sinks[d];h=new Xs(new Ks(h.le,h.deviceId,h.Nc.domain,h.Nc.description,h.Nc.friendlyName,h.di));f.call(e,g,h)}for(d in c.g)b.j.set(d,c.g[d]);c.h&&(b.h=c.h);for(var n in a.manualHangouts)b=a.manualHangouts[n],this.h.set(n,new Ks(b.cq,b.Xa,b.Lc,b.Mg,b.ae,b.eg))}};gt.prototype.s=hb("mr.cloud.discovery.HangoutSinkDiscoveryService");var et=!1;function kt(a){a&&"function"==typeof a.dispose&&a.dispose()};function lt(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];Ra(d)?lt.apply(null,d):kt(d)}};var W=function(){this.wc=this.wc;this.lb=this.lb};W.prototype.wc=!1;W.prototype.isDisposed=function(){return this.wc};W.prototype.dispose=function(){this.wc||(this.wc=!0,this.aa())};W.prototype.T=function(a){mt(this,$a(kt,a))};var mt=function(a,b){a.wc?b():(a.lb||(a.lb=[]),a.lb.push(b))};W.prototype.aa=function(){if(this.lb)for(;this.lb.length;)this.lb.shift()()};var nt=Ha.JSON.parse,ot=Ha.JSON.stringify;var pt=function(a,b){this.j=a;this.l=b;this.h=0;this.g=null};pt.prototype.get=function(){if(0<this.h){this.h--;var a=this.g;this.g=a.next;a.next=null}else a=this.j();return a};var qt=function(a,b){a.l(b);100>a.h&&(a.h++,b.next=a.g,a.g=b)};var rt,st=function(){var a=Ha.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!hd("Presto")&&(a=function(){var e=$f(document,"IFRAME");e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=Za(function(n){if(("*"==h||n.origin==h)&&n.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!Cd()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Uo;c.Uo=null;e()}};return function(e){d.next={Uo:e};d=d.next;b.port2.postMessage(0)}}return function(e){Ha.setTimeout(e,0)}};function tt(a){Ha.setTimeout(function(){throw a;},0)};var ut=function(){this.h=this.g=null};ut.prototype.add=function(a,b){var c=vt.get();c.set(a,b);this.h?this.h.next=c:this.g=c;this.h=c};ut.prototype.remove=function(){var a=null;this.g&&(a=this.g,this.g=this.g.next,this.g||(this.h=null),a.next=null);return a};var vt=new pt(function(){return new wt},function(a){return a.reset()}),wt=function(){this.next=this.scope=this.gj=null};wt.prototype.set=function(a,b){this.gj=a;this.scope=b;this.next=null};
wt.prototype.reset=function(){this.next=this.scope=this.gj=null};var Bt=function(a,b){xt||yt();zt||(xt(),zt=!0);At.add(a,b)},xt,yt=function(){if(Ha.Promise&&Ha.Promise.resolve){var a=Ha.Promise.resolve(void 0);xt=function(){a.then(Ct)}}else xt=function(){var b=Ct;"function"!==typeof Ha.setImmediate||Ha.Window&&Ha.Window.prototype&&!hd("Edge")&&Ha.Window.prototype.setImmediate==Ha.setImmediate?(rt||(rt=st()),rt(b)):Ha.setImmediate(b)}},zt=!1,At=new ut,Ct=function(){for(var a;a=At.remove();){try{a.gj.call(a.scope)}catch(b){tt(b)}qt(vt,a)}zt=!1};var Dt=function(a){a.prototype.$goog_Thenable=!0},Et=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};var Gt=function(a,b){this.ha=0;this.Ne=void 0;this.zg=this.Ve=this.Oc=null;this.pj=this.jl=!1;if(a!=Na)try{var c=this;a.call(b,function(d){c.Od(2,d)},function(d){if(!(d instanceof Ft))try{if(d instanceof Error)throw d;throw Error("Promise rejected.");}catch(e){}c.Od(3,d)})}catch(d){this.Od(3,d)}},Ht=function(){this.next=this.context=this.h=this.l=this.g=null;this.j=!1};Ht.prototype.reset=function(){this.context=this.h=this.l=this.g=null;this.j=!1};
var It=new pt(function(){return new Ht},function(a){a.reset()}),Jt=function(a,b,c){var d=It.get();d.l=a;d.h=b;d.context=c;return d},Kt=function(a){if(a instanceof Gt)return a;var b=new Gt(Na);b.Od(2,a);return b},Lt=function(a){return new Gt(function(b,c){c(a)})},Nt=function(a,b,c){Mt(a,b,c,null)||Bt($a(b,a))},Ot=function(a){return new Gt(function(b,c){a.length||b(void 0);for(var d=0,e;d<a.length;d++)e=a[d],Nt(e,b,c)})},Pt=function(a){return new Gt(function(b,c){var d=a.length,e=[];if(d)for(var f=
function(p,r){d--;e[p]=r;0==d&&b(e)},g=function(p){c(p)},h=0,n;h<a.length;h++)n=a[h],Nt(n,$a(f,h),g);else b(e)})},Qt=function(a){return new Gt(function(b){var c=a.length,d=[];if(c)for(var e=function(h,n,p){c--;d[h]=n?{bf:!0,value:p}:{bf:!1,reason:p};0==c&&b(d)},f=0,g;f<a.length;f++)g=a[f],Nt(g,$a(e,f,!0),$a(e,f,!1));else b(d)})},St=function(){var a,b,c=new Gt(function(d,e){a=d;b=e});return new Rt(c,a,b)};
Gt.prototype.then=function(a,b,c){return Tt(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};Dt(Gt);Gt.prototype.kb=function(a,b){a=Jt(a,a,b);a.j=!0;Ut(this,a);return this};var Vt=function(a,b){return Tt(a,null,b,void 0)};Gt.prototype.cancel=function(a){if(0==this.ha){var b=new Ft(a);Bt(function(){Wt(this,b)},this)}};
var Wt=function(a,b){if(0==a.ha)if(a.Oc){var c=a.Oc;if(c.Ve){for(var d=0,e=null,f=null,g=c.Ve;g&&(g.j||(d++,g.g==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.ha&&1==d?Wt(c,b):(f?(d=f,d.next==c.zg&&(c.zg=d),d.next=d.next.next):Xt(c),Yt(c,e,3,b)))}a.Oc=null}else a.Od(3,b)},Ut=function(a,b){a.Ve||2!=a.ha&&3!=a.ha||Zt(a);a.zg?a.zg.next=b:a.Ve=b;a.zg=b},Tt=function(a,b,c,d){var e=Jt(null,null,null);e.g=new Gt(function(f,g){e.l=b?function(h){try{var n=b.call(d,h);f(n)}catch(p){g(p)}}:f;e.h=c?function(h){try{var n=
c.call(d,h);void 0===n&&h instanceof Ft?g(h):f(n)}catch(p){g(p)}}:g});e.g.Oc=a;Ut(a,e);return e.g};Gt.prototype.VC=function(a){this.ha=0;this.Od(2,a)};Gt.prototype.WC=function(a){this.ha=0;this.Od(3,a)};Gt.prototype.Od=function(a,b){0==this.ha&&(this===b&&(a=3,b=new TypeError("Promise cannot resolve to itself")),this.ha=1,Mt(b,this.VC,this.WC,this)||(this.Ne=b,this.ha=a,this.Oc=null,Zt(this),3!=a||b instanceof Ft||$t(this,b)))};
var Mt=function(a,b,c,d){if(a instanceof Gt)return Ut(a,Jt(b||Na,c||null,d)),!0;if(Et(a))return a.then(b,c,d),!0;if(Sa(a))try{var e=a.then;if("function"===typeof e)return au(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1},au=function(a,b,c,d,e){var f=!1,g=function(n){f||(f=!0,c.call(e,n))},h=function(n){f||(f=!0,d.call(e,n))};try{b.call(a,g,h)}catch(n){h(n)}},Zt=function(a){a.jl||(a.jl=!0,Bt(a.ej,a))},Xt=function(a){var b=null;a.Ve&&(b=a.Ve,a.Ve=b.next,b.next=null);a.Ve||(a.zg=null);return b};
Gt.prototype.ej=function(){for(var a;a=Xt(this);)Yt(this,a,this.ha,this.Ne);this.jl=!1};var Yt=function(a,b,c,d){if(3==c&&b.h&&!b.j)for(;a&&a.pj;a=a.Oc)a.pj=!1;if(b.g)b.g.Oc=null,bu(b,c,d);else try{b.j?b.l.call(b.context):bu(b,c,d)}catch(e){cu.call(null,e)}qt(It,b)},bu=function(a,b,c){2==b?a.l.call(a.context,c):a.h&&a.h.call(a.context,c)},$t=function(a,b){a.pj=!0;Bt(function(){a.pj&&cu.call(null,b)})},cu=tt,Ft=function(a){Tb.call(this,a);this.g=!1};x(Ft,Tb);Ft.prototype.name="cancel";
var Rt=function(a,b,c){this.promise=a;this.resolve=b;this.reject=c};var du=function(a,b,c,d,e,f,g,h,n){W.call(this);this.s=Wg("apps.apiary.ApiaryClient");this.h=null;this.D=!1;this.u=St();this.j=[];this.g=a?encodeURIComponent(String(a)):null;this.F=null;!d&&b&&(this.F=b);this.J=c||null;this.l=!d;this.m=null!=e?e:null;this.C=f||null;this.L=!!g;this.G=h||null;this.o=null!=n?n:null};t(du,W);
du.prototype.init=function(){$g(this.s,"init - API key: "+this.g);var a=Za(function(c){this.h=c;var d=Ma("client.request",c),e=Ma("auth",c);d&&e?this.H():c.load("client",Za(this.H,this));$g(this.s,"loadCallback - API key: "+this.g+", clientRequest: "+d+", auth: "+e)},this),b=eu("gapi");b?a(b.gapi):fu(this,a);return this.u.promise};
var eu=function(a){for(var b=window,c=Ma(a,b);!c&&b!=window.top&&gu(b.parent,a);)b=b.parent,c=Ma(a,b);return c?b:null},gu=function(a,b){try{return!!a&&null!=a.location.href&&jf(a,b)}catch(c){return!1}},fu=function(a,b){$g(a.s,"loadGapi_ - API key: "+a.g);var c=eu("gapi_onload");if(c){var d=c.gapi_onload;c.gapi_onload=function(){d();b(c.gapi)};$g(a.s,"found already loading GAPI - API key: "+a.g)}else{window.gapi_onload=function(){b(window.gapi)};var e=$f(document,"SCRIPT");Xe(e,hu);a.G&&cg(e,ot(a.G));
document.getElementsByTagName("head")[0].appendChild(e)}};du.prototype.H=function(){$g(this.s,"client loaded - API key: "+this.g);for(var a=0;a<this.j.length;a++)this.j[a].Sb.resolve(iu(this,this.j[a].requestData));this.D=!0;this.u.resolve(this.h)};du.prototype.sendRequest=function(a){if(this.D)return iu(this,a);var b=St();this.j.push({requestData:a,Sb:b});return b.promise};
var iu=function(a,b){var c=Ma("config.get",a.h);if(!a.l){var d=c("googleapis.config/auth/useFirstPartyAuth");var e=c("googleapis.config/auth/useOriginToken")}var f;null!=a.m&&(f=c("client/cors"));var g;null!=a.o&&(g=c("client/xd4"));try{var h=Ma("config.update",a.h);a.l||(h("googleapis.config/auth/useFirstPartyAuth",!1),h("googleapis.config/auth/useOriginToken",!1));null!=a.m&&h("client/cors",a.m);null!=a.o&&h("client/xd4",a.o);var n=ju(a);b.headers&&Ad(n,b.headers);var p={headers:n,root:a.J,path:b.path,
method:b.method,body:b.body},r=b.params||{};a.g&&!a.C?Ad(r,{key:a.g}):a.C&&Ad(r,{key:null});ud(r)||(p.params=r);var y=Kt(Ma("client.request",a.h)(p));b.callback&&y.then(function(A){b.callback.apply(null,[A.result,A])},function(A){b.callback.apply(null,[A.result,A])});return y}finally{c=Ma("config.update",a.h),a.l||(c("googleapis.config/auth/useFirstPartyAuth",d),c("googleapis.config/auth/useOriginToken",e)),null!=a.m&&c("client/cors",f),null!=a.o&&c("client/xd4",g)}},ju=function(a){if(a.l){if(a.C)return{Authorization:"Bearer "+
a.C};var b=Ma("auth.getAuthHeaderValueForFirstParty",a.h);return{Authorization:a.L?b([]):b(),"X-Goog-AuthUser":a.F}}return{}},hu=le(Ud(new Td(Rd,"https://apis.google.com/js/client.js")));var ku=function(a){this.g=a},Rs=function(a,b,c){var d="";b.forEach(function(e){d+="/"+encodeURIComponent(e)});a=new Wr(a+d);c&&(c=ls(c),Zr(a,c));return a},Ss=function(a,b,c,d,e){e=void 0===e?1:e;return a.g.getAuthToken().then(function(f){return lu(a,b,c,f,d).catch(function(g){if("INVALID_ACCESS_ERROR"==g&&0<e)return mu(a,f,b,c,d,e-1);throw g;})})},mu=function(a,b,c,d,e,f){return nu(b).then(function(){return Ss(a,c,d,e,f)})},lu=function(a,b,c,d,e){var f=ou;d=new du(void 0,void 0,void 0,!1,!1,d);d.init();
return f(a,d,b,c,e)},ou=function(a,b,c,d,e){return new Promise(function(f,g){b.sendRequest(pu(c,d,function(h){h&&!h.error?f(h):h&&401==h.error.code?g("INVALID_ACCESS_ERROR"):g(h&&h.error?h.error.errors?h.error.errors[0]:h:Error(h))},e))})},pu=function(a,b,c,d){a={callback:c,method:b,path:a.toString()};d&&(a.body=d);return a};var su=function(){this.g=!1;this.h=null;this.j=!1;this.s=hb("mr.cloud.identity.IdentityService");Vm(this);qu(this);ru(this)};su.prototype.getAuthToken=function(){return chrome.identity?new Promise(function(a,b){chrome.identity.getAuthToken({interactive:!1},function(c){chrome.runtime.lastError?b(Error("Unable to get user auth token: "+chrome.runtime.lastError.message)):null==c?b(Error("User is not logged in (no token found)")):a(c)})}):Promise.reject(Error("chrome.identity permission required for auth."))};
var nu=function(a){return new Promise(function(b){chrome.identity.removeCachedAuthToken({token:a},function(){b()})})},ru=function(a){a.getAuthToken().then(function(b){chrome.identity.getProfileUserInfo(function(c){a.g=!!c.email||!!c.id;a.h=c.email||null;b&&!a.g&&(a.j=!0)})},function(b){a.s.ua("Unable to set sign in and email.",b)})},qu=function(a){chrome.identity.onSignInChanged.addListener(function(b,c){hk(6);a.g=c;a.s.info("Signed in change: "+a.g);a.g?ru(a):(a.h=null,a.j=!1)})},tu=function(a){return a.getAuthToken().then(function(b){var c=
window.gapi;if(!c)return a.s.error("gapi not loaded."),!1;a.s.info("Setting gapi auth token");c.auth.setToken({access_token:b});return!0})};su.prototype.fb=function(){return"IdentityService"};su.prototype.bc=function(){return[null,{signedIn:this.g,userEmail:this.h,kioskAuth:this.j}]};su.prototype.hc=function(){var a=Tm(this);a&&(a.signedIn&&(this.g=a.signedIn),a.userEmail&&(this.h=a.userEmail),a.kioskAuth&&(this.j=a.kioskAuth))};var uu={cG:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},bG:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},vu=uu;vu=uu;var wu={AED:[2,"dh","\u062f.\u0625."],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[32,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[50,"kr.","kr."],DOP:[2,"RD$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[34,
"Ft","Ft"],IDR:[0,"Rp","Rp"],ILS:[34,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],MNT:[0,"\u20ae","MN\u20ae"],MVR:[2,"Rf","MVR"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","PHP"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u20bd",
"RUB"],SAR:[2,"Rial","Rial"],SEK:[50,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"\u20ba","TRY"],TWD:[2,"$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u0433\u0440\u043d.","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[48,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};var xu={Sm:".",Uj:",",lo:"%",Ck:"0",Ju:"+",fo:"-",Vm:"E",mo:"\u2030",Vj:"\u221e",Eu:"NaN",jt:"#,##0.###",ZO:"#E0",BM:"#,##0%",NG:"\u00a4#,##0.00",Tm:"USD"},yu=xu;yu=xu;var Au=function(){this.F=40;this.h=1;this.j=3;this.H=this.o=0;this.O=!1;this.G=this.u="";this.l=yu.fo;this.D="";this.g=1;this.C=!1;this.m=[];this.J=this.L=!1;var a=yu.jt;a.replace(/ /g,"\u00a0");var b=[0];this.u=zu(this,a,b);for(var c=b[0],d=-1,e=0,f=0,g=0,h=-1,n=a.length,p=!0;b[0]<n&&p;b[0]++)switch(a.charAt(b[0])){case "#":0<f?g++:e++;0<=h&&0>d&&h++;break;case "0":if(0<g)throw Error('Unexpected "0" in pattern "'+a+'"');f++;0<=h&&0>d&&h++;break;case ",":0<h&&this.m.push(h);h=0;break;case ".":if(0<=
d)throw Error('Multiple decimal separators in pattern "'+a+'"');d=e+f+g;break;case "E":if(this.J)throw Error('Multiple exponential symbols in pattern "'+a+'"');this.J=!0;this.H=0;b[0]+1<n&&"+"==a.charAt(b[0]+1)&&(b[0]++,this.O=!0);for(;b[0]+1<n&&"0"==a.charAt(b[0]+1);)b[0]++,this.H++;if(1>e+f||1>this.H)throw Error('Malformed exponential pattern "'+a+'"');p=!1;break;default:b[0]--,p=!1}0==f&&0<e&&0<=d&&(f=d,0==f&&f++,g=e-f,e=f-1,f=1);if(0>d&&0<g||0<=d&&(d<e||d>e+f)||0==h)throw Error('Malformed pattern "'+
a+'"');g=e+f+g;this.j=0<=d?g-d:0;0<=d&&(this.o=e+f-d,0>this.o&&(this.o=0));this.h=(0<=d?d:g)-e;this.J&&(this.F=e+this.h,0==this.j&&0==this.h&&(this.h=1));this.m.push(Math.max(0,h));this.L=0==d||d==g;c=b[0]-c;this.G=zu(this,a,b);b[0]<a.length&&";"==a.charAt(b[0])?(b[0]++,1!=this.g&&(this.C=!0),this.l=zu(this,a,b),b[0]+=c,this.D=zu(this,a,b)):(this.l+=this.u,this.D+=this.G)};
Au.prototype.parse=function(a,b){b=b||[0];a=a.replace(/ |\u202f/g,"\u00a0");var c=a.indexOf(this.u,b[0])==b[0],d=a.indexOf(this.l,b[0])==b[0];c&&d&&(this.u.length>this.l.length?d=!1:this.u.length<this.l.length&&(c=!1));c?b[0]+=this.u.length:d&&(b[0]+=this.l.length);if(a.indexOf(yu.Vj,b[0])==b[0]){b[0]+=yu.Vj.length;var e=Infinity}else{e=a;var f=!1,g=!1,h=!1,n=-1,p=1,r=yu.Sm,y=yu.Uj,A=yu.Vm;y=y.replace(/\u202f/g,"\u00a0");for(var B="";b[0]<e.length;b[0]++){var K=e.charAt(b[0]),S=Bu(K);if(0<=S&&9>=
S)B+=S,h=!0;else if(K==r.charAt(0)){if(f||g)break;B+=".";f=!0}else if(K==y.charAt(0)&&("\u00a0"!=y.charAt(0)||b[0]+1<e.length&&0<=Bu(e.charAt(b[0]+1)))){if(f||g)break}else if(K==A.charAt(0)){if(g)break;B+="E";g=!0;n=b[0]}else if("+"==K||"-"==K){if(h&&n!=b[0]-1)break;B+=K}else if(1==this.g&&K==yu.lo.charAt(0)){if(1!=p)break;p=100;if(h){b[0]++;break}}else if(1==this.g&&K==yu.mo.charAt(0)){if(1!=p)break;p=1E3;if(h){b[0]++;break}}else break}1!=this.g&&(p=this.g);e=parseFloat(B)/p}if(c){if(a.indexOf(this.G,
b[0])!=b[0])return NaN;b[0]+=this.G.length}else if(d){if(a.indexOf(this.D,b[0])!=b[0])return NaN;b[0]+=this.D.length}return d?-e:e};
Au.prototype.format=function(a){if(isNaN(a))return yu.Eu;var b=[];var c=Cu;a=Du(a,-c.xw);var d=0>a||0==a&&0>1/a;d?c.Bq?b.push(c.Bq):(b.push(c.prefix),b.push(this.l)):(b.push(c.prefix),b.push(this.u));if(isFinite(a))if(a=a*(d?-1:1)*this.g,this.J)if(0==a)Eu(this,a,this.h,b),Fu(this,0,b);else{var e=Math.floor(Math.log(a)/Math.log(10)+2E-15);a=Du(a,-e);var f=this.h;1<this.F&&this.F>this.h?(f=e%this.F,0>f&&(f=this.F+f),a=Du(a,f),e-=f,f=1):1>this.h?(e++,a=Du(a,-1)):(e-=this.h-1,a=Du(a,this.h-1));Eu(this,
a,f,b);Fu(this,e,b)}else Eu(this,a,this.h,b);else b.push(yu.Vj);d?c.Cq?b.push(c.Cq):(b.push(c.Es),b.push(this.D)):(b.push(c.Es),b.push(this.G));return b.join("")};
var Eu=function(a,b,c,d){if(a.o>a.j)throw Error("Min value must be less than max value");d||(d=[]);var e=Du(b,a.j);e=Math.round(e);if(isFinite(e)){b=Math.floor(Du(e,-a.j));var f=Math.floor(e-Du(b,a.j))}else f=0;e=b;b=f;var g=e;f=b;var h=0<a.o||0<f||!1;e=a.o;h&&(e=a.o);var n="";for(b=g;1E20<b;)n="0"+n,b=Math.round(Du(b,-1));n=b+n;var p=yu.Sm;b=yu.Ck.charCodeAt(0);var r=n.length,y=0;if(0<g||0<c){for(g=r;g<c;g++)d.push(String.fromCharCode(b));if(2<=a.m.length)for(c=1;c<a.m.length;c++)y+=a.m[c];c=r-y;
if(0<c){g=a.m;y=r=0;for(var A,B=yu.Uj,K=n.length,S=0;S<K;S++)if(d.push(String.fromCharCode(b+1*Number(n.charAt(S)))),1<K-S)if(A=g[y],S<c){var ja=c-S;(1===A||0<A&&1===ja%A)&&d.push(B)}else y<g.length&&(S===c?y+=1:A===S-c-r+1&&(d.push(B),r+=A,y+=1))}else{c=n;n=a.m;g=yu.Uj;A=c.length;B=[];for(r=n.length-1;0<=r&&0<A;r--){y=n[r];for(K=0;K<y&&0<=A-K-1;K++)B.push(String.fromCharCode(b+1*Number(c.charAt(A-K-1))));A-=y;0<A&&B.push(g)}d.push.apply(d,B.reverse())}}else h||d.push(String.fromCharCode(b));(a.L||
h)&&d.push(p);h=String(f);f=h.split("e+");if(2==f.length){if(h=parseFloat(f[0])){p=h;if(isFinite(p)){for(c=0;1<=(p/=10);)c++;p=c}else p=0<p?p:0;p=0-p-1;h=-1>p?h&&isFinite(h)?Du(Math.round(Du(h,-1)),1):h:h&&isFinite(h)?Du(Math.round(Du(h,p)),-p):h}h=String(h);h=h.replace(".","");h+=Ye("0",parseInt(f[1],10)-h.length+1)}a.j+1>h.length&&(h="1"+Ye("0",a.j-h.length)+h);for(a=h.length;"0"==h.charAt(a-1)&&a>e+1;)a--;for(g=1;g<a;g++)d.push(String.fromCharCode(b+1*Number(h.charAt(g))))},Fu=function(a,b,c){c.push(yu.Vm);
0>b?(b=-b,c.push(yu.fo)):a.O&&c.push(yu.Ju);b=""+b;for(var d=yu.Ck,e=b.length;e<a.H;e++)c.push(d);c.push(b)},Bu=function(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=yu.Ck.charCodeAt(0);return b<=a&&a<b+10?a-b:-1},zu=function(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case ";":return d;case "\u00a4":c[0]+1<f&&"\u00a4"==b.charAt(c[0]+
1)?(c[0]++,d+=yu.Tm):(g=yu.Tm,d+=g in wu?wu[g][1]:g);break;case "%":if(!a.C&&1!=a.g)throw Error("Too many percent/permill");if(a.C&&100!=a.g)throw Error("Inconsistent use of percent/permill characters");a.g=100;a.C=!1;d+=yu.lo;break;case "\u2030":if(!a.C&&1!=a.g)throw Error("Too many percent/permill");if(a.C&&1E3!=a.g)throw Error("Inconsistent use of percent/permill characters");a.g=1E3;a.C=!1;d+=yu.mo;break;default:d+=g}}return d},Cu={xw:0,Bq:"",Cq:"",prefix:"",Es:""},Du=function(a,b){if(!a||!isFinite(a)||
0==b)return a;a=String(a).split("e");return parseFloat(a[0]+"e"+(parseInt(a[1]||0,10)+b))};var Gu=function(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"},Hu=Gu;Hu=Gu;var Iu=function(a,b){if(void 0===b){b=a+"";var c=b.indexOf(".");b=Math.min(-1==c?0:b.length-c-1,3)}return 1==(a|0)&&0==b?"one":"other"},Ju=Iu;Ju=Iu;var Ou=function(){this.j=Ku;this.h=this.g=this.m=null;var a=yu,b=vu;if(Lu!==a||Mu!==b)Lu=a,Mu=b,Nu=new Au;this.o=Nu},Lu=null,Mu=null,Nu=null,Pu=/'([{}#].*?)'/g,Qu=/''/g;Ou.prototype.format=function(a){if(this.j){this.m=[];var b=Ru(this,this.j);this.h=Su(this,b);this.j=null}if(this.h&&0!=this.h.length)for(this.g=yc(this.m),b=[],Tu(this,this.h,a,!1,b),a=b.join("");0<this.g.length;)a=a.replace(this.l(this.g),this.g.pop());else a="";return a};
var Tu=function(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,h=a,n=e,p=c[g];void 0===p?n.push("Undefined parameter - "+g):(h.g.push(p),n.push(h.l(h.g)));break;case 2:g=b[f].value;h=a;n=c;p=d;var r=e,y=g.Ri;void 0===n[y]?r.push("Undefined parameter - "+y):(y=g[n[y]],void 0===y&&(y=g.other),Tu(h,y,n,p,r));break;case 0:g=b[f].value;Uu(a,g,c,Ju,d,e);break;case 1:g=b[f].value;Uu(a,g,c,Hu,d,e);break;default:Wb("Unrecognized block type: "+
b[f].type)}},Uu=function(a,b,c,d,e,f){var g=b.Ri,h=b.Jo,n=+c[g];isNaN(n)?f.push("Undefined or invalid parameter - "+g):(h=n-h,g=b[c[g]],void 0===g&&(d=d(Math.abs(h)),g=b[d],void 0===g&&(g=b.other)),b=[],Tu(a,g,c,e,b),c=b.join(""),e?f.push(c):(a=a.o.format(h),f.push(c.replace(/#/g,a))))},Ru=function(a,b){var c=a.m,d=Za(a.l,a);b=b.replace(Qu,function(){c.push("'");return d(c)});return b=b.replace(Pu,function(e,f){c.push(f);return d(c)})},Vu=function(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=
e.exec(a);){var g=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d},Wu=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Xu=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Yu=/^\s*(\w+)\s*,\s*select\s*,/,Su=function(a,b){var c=[];b=Vu(b);for(var d=0;d<b.length;d++){var e={};if(0==b[d].type)e.type=4,e.value=b[d].value;else if(1==
b[d].type){var f=b[d].value;switch(Wu.test(f)?0:Xu.test(f)?1:Yu.test(f)?2:/^\s*\w+\s*/.test(f)?3:5){case 2:e.type=2;e.value=Zu(a,b[d].value);break;case 0:e.type=0;e.value=$u(a,b[d].value);break;case 1:e.type=1;e.value=av(a,b[d].value);break;case 3:e.type=3;e.value=b[d].value;break;default:Wb("Unknown block type for pattern: "+b[d].value)}}else Wb("Unknown part of the pattern.");c.push(e)}return c},Zu=function(a,b){var c="";b=b.replace(Yu,function(h,n){c=n;return""});var d={};d.Ri=c;b=Vu(b);for(var e=
0;e<b.length;){var f=b[e].value;e++;var g;1==b[e].type?g=Su(a,b[e].value):Wb("Expected block type.");d[f.replace(/\s/g,"")]=g;e++}return d},$u=function(a,b){var c="",d=0;b=b.replace(Wu,function(n,p,r){c=p;r&&(d=parseInt(r,10));return""});var e={};e.Ri=c;e.Jo=d;b=Vu(b);for(var f=0;f<b.length;){var g=b[f].value;f++;var h;1==b[f].type?h=Su(a,b[f].value):Wb("Expected block type.");e[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=h;f++}return e},av=function(a,b){var c="";b=b.replace(Xu,function(h,n){c=n;return""});
var d={};d.Ri=c;d.Jo=0;b=Vu(b);for(var e=0;e<b.length;){var f=b[e].value;e++;if(1==b[e].type)var g=Su(a,b[e].value);else Wb("Expected block type.");d[f.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=g;e++}return d};Ou.prototype.l=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};var bv=chrome.i18n.getMessage("1522140683318860351");chrome.i18n.getMessage("4246483347873264186");chrome.i18n.getMessage("5991427458288444010");var uj=chrome.i18n.getMessage("6063910461797960050"),cv=chrome.i18n.getMessage("7735695102441495789"),dv=chrome.i18n.getMessage("4575332923598659024"),Ku=chrome.i18n.getMessage("2297080986956220930"),ev=new Ou;var fv=function(a){this.g=a;this.s=hb("mr.cloud.mesi.MesiService")},ht=function(a){var b=Rs(Js.g,["hangouts","search"]);a.s.info("Retrieving Hangouts from MESI: "+b);return Ss(a.g,b,"POST",gv).then(function(c){var d=[];c.result&&(d=c.result.map(function(e){var f=e.hangout,g=f.meeting_room_name,h;f.meeting_domain?h=f.meeting_domain:"BUSINESS"==f.type&&f.company_title&&(h=f.company_title.toLowerCase());var n=ev.format({ORGANIZER:"",PARTICIPANTS:0});if((e=e.participant)&&0<e.length){var p=e[0].display_name;
n=e.reduce(function(r,y){r.add(y.user_id);"ORGANIZER"==y.role&&(p=y.display_name);return r},new Set);n=ev.format({ORGANIZER:p,PARTICIPANTS:n.size})}return g&&h?new Ks(!1,g+"@"+h,h,g,n,f.hangout_id):new Ks(!1,f.hangout_id,h,g,n,f.hangout_id)}));return d})},gv={request_header:{client_version:{client_id:"39"}},search_sources:["0"]};var hv=function(a,b){this.h=a;this.g=b},kv=function(a,b,c,d){switch(b.type){case "REFRESH_AUTH":var e=d.le,f=d.deviceId,g=d.di;return tu(a.h).then(function(){iv(a.g,new Ts("AUTH_READY",{le:e,pb:f,di:g}),c.id)});case "STATUS_REQUEST":return iv(a.g,b,c.id),Promise.resolve();case "STATUS_RESPONSE":return iv(a.g,b,c.id,!0),b.data.routeDescription||iv(a.g,b,c.id),Promise.resolve();case "HANGOUT_INACTIVE":return jv(a.g,c,4,wj(new tj(cv,"warning"),c.sinkId));case "HANGOUT_INVALID":return jv(a.g,c,3,wj(new tj(dv,
"warning"),c.sinkId));default:return Promise.reject(Error("Unknown type: "+b.type))}};var lv=function(a,b){this.h=a;this.g=b},mv=function(a,b,c,d,e){return new Promise(function(f){switch(b){case "mesi":break;default:throw Error("Unrecognized channel type: "+b);}if(!c.type)throw Error("Message has no type");switch(c.type){case "STOP":f(jv(a.g,d,1,null));return;case "SESSION_START_SUCCESS":Gs(0);break;case "SESSION_END":break;case "SESSION_FAILURE":Gs(1);f(jv(a.g,d,2,wj(new tj(bv,"warning"),d?d.sinkId:"")));return;case "__webrtc_stats__":break;case "PRESENTATION_CONNECTION_MESSAGE":iv(a.g,
c.data,d.id,!0);break;case "REFRESH_AUTH":case "LOCAL_PRESENT":case "MUTE":case "STATUS_REQUEST":case "STATUS_RESPONSE":case "HANGOUT_INACTIVE":case "HANGOUT_INVALID":f(kv(a.h,c,d,e));return;case "new_session":iv(a.g,c,d.id,!0);break;case "remove_session":iv(a.g,c,d.id,!0);a.g.terminateRoute(d.id);break;default:throw Error("Unknown type: "+c.type);}f()})};var nv=function(){var a=this;this.s=hb("mr.cloud.settings.SettingsService");this.g=null;chrome.settingsPrivate.onPrefsChanged.addListener(function(b){hk(13);if(a.g){b=m(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,"media_router.cloudservices.enabled"==c.key){Sb(5);a.g.call(null,c.value);break}}})},ov=function(a,b){a.g=b},pv=function(){return new Promise(function(a,b){chrome.storage.sync.get("mr.cloud.notifiedHangouts",function(c){chrome.runtime.lastError?b(chrome.runtime.lastError):a(c)})})},
qv=function(a){var b=a.s;chrome.storage.sync.set({"mr.cloud.notifiedHangouts":!0},function(){chrome.runtime.lastError&&b.K("Error setting notified Hangout privacy.",chrome.runtime.lastError)})},sv=function(a){return rv().catch(function(){return rv().catch(function(b){a.s.K("Error retrieving hangouts notified setting.",b);return!1})})},rv=function(){return pv().then(function(a){return!!a["mr.cloud.notifiedHangouts"]})};var tv=function(a,b){var c=void 0;return new (c||(c=Promise))(function(d,e){function f(n){try{h(b.next(n))}catch(p){e(p)}}function g(n){try{h(b["throw"](n))}catch(p){e(p)}}function h(n){n.done?d(n.value):(new c(function(p){p(n.value)})).then(f,g)}h((b=b.apply(a,void 0)).next())})};function uv(a){a=new Ft(a);a.g=!1;return a};var vv=1,wv=1,xv=function(a){W.call(this);this.h=new Set;(this.g=a)&&a.T(this)};t(xv,W);xv.prototype.signal=function(){return yv(this,!1)};var zv=function(a){return yv(a,!0)};xv.prototype.N=function(a,b){return Av({signal:Bv(this,a),data:b})};
var Cv=function(a,b,c){c=void 0===c?function(e){return e}:c;var d=Bv(a,b);return{N:function(e){return a.N(d,c(e))}}},yv=function(a,b){b=new Dv(b);a.h.add(b);a.T(b);return b},Bv=function(a,b){b.o||(b.o=Ev(a,b)+"-"+wv++);return b},Ev=function(a,b){return a.g?(a=Object.entries(a.g).find(function(c){c=m(c);c.next();return c.next().value==b}))&&a[0]||"ANONYMOUS":"OWNERLESS"},Fv=function(a){this.h=a;this.g=[]};Fv.prototype.add=function(a,b){this.g.push({signal:Bv(this.h,a),data:b})};
Fv.prototype.N=function(){var a=Av.apply(null,q(this.g));this.g.length=0;return a};var Dv=function(a){W.call(this);this.g=new Map;this.h=new Set;this.l=a;this.j=!1};t(Dv,W);Dv.prototype.attach=function(a,b){var c=this,d=vv++;Gv(function(){return Hv(c,d,a,b)});return d};
var Jv=function(a,b,c){var d="function"===typeof c,e=vv++,f=d?c:b;var g=d?g:c;Gv(function(){a.j?(b(a.m,{signal:a,Nj:e}),Hv(a,e,f,g)):d?Hv(a,e,Iv(b,f),g):Hv(a,e,f,g)});return e},Hv=function(a,b,c,d){if(!a.isDisposed())if(d){if(!d.isDisposed()){var e=function(){return Gv(function(){a.g.delete(b);var f=Kv.get(d);f&&rc(f,e)})};a.g.set(b,{Nj:b,slot:c,fl:e});Lv(d,e)}}else a.g.set(b,{Nj:b,slot:c,fl:function(){return a.g.delete(b)}})};
Dv.prototype.detach=function(a){var b=this;Gv(function(){var c=b.g.get(a);c&&c.fl()})};Dv.prototype.value=function(a){return Mv(this,!0,a)};Dv.prototype.next=function(a){return Mv(this,!1,a)};
var Mv=function(a,b,c){var d=St();Gv(function(){if(a.isDisposed())d.reject(uv("Signal initially disposed"));else if(c&&c.isDisposed())d.reject(uv("Owner initially disposed"));else if(b&&a.l&&a.j)d.resolve(a.m);else if(a.h.add(d),d.promise.kb(function(){a.h.delete(d)}),c){var e=function(){d.reject(uv("Owner asynchronously disposed"))};d.promise.kb(function(){var f=Kv.get(c);f&&rc(f,e)});Lv(c,e)}});return d.promise};
Dv.prototype.aa=function(){var a=this;W.prototype.aa.call(this);Gv(function(){a.g.forEach(function(b){b=b.fl;return b()});a.g.clear();a.h.forEach(function(b){return b.reject(uv("Signal asynchronously disposed"))});a.h.clear()})};
var Av=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return 0==b.length?Promise.resolve():1==b.length?(b=b[0],Nv(b.signal,b.data)):Promise.all(b.map(function(d){return Nv(d.signal,d.data)}))},Nv=function(a,b){return new Promise(function(c){Gv(function(){a.g.forEach(function(d){var e=d.slot;d=d.Nj;try{e(b,{signal:a,Nj:d})}catch(f){tt(f)}});a.h.forEach(function(d){return d.resolve(b)});a.h.clear();a.l&&(a.m=b,a.j=!0);c()})})},Ov=[],Pv=!1,Gv=function(a){Ov.push(a);Qv()},Qv=
function(){var a,b;v(function(c){switch(c.g){case 1:if(Pv){c.Na(0);break}ta(c,3,4);Pv=!0;a=Rv(0);case 6:if(!(a<Ov.length)){c.Na(4);break}return u(c,Promise.resolve(),8);case 8:a=Rv(a);c.Na(6);break;case 4:xa(c);Ov.length=0;Pv=!1;ya(c);break;case 3:b=wa(c),tt(b),c.Na(4)}})},Rv=function(a){for(var b=a+100;a<b&&a<Ov.length;)try{Ov[a++]()}catch(c){tt(c)}return a},Kv=new WeakMap,Lv=function(a,b){if(a.isDisposed())b();else{var c=Kv.get(a);if(c)c.push(b);else{var d=[b];Kv.set(a,d);mt(a,function(){[].concat(q(d)).forEach(function(e){return e()});
Kv.delete(a)})}}},Iv=function(a,b){var c=!0;return function(d,e){c?(c=!1,a(d,e)):b(d,e)}};var Sv=function(){this.g=null;this.h=new xv;this.Ka=zv(this.h)},Uv=function(a,b){if(!a.g||M(a.g,2)<M(b,2))a.g=rm(b),Tv(a)},Vv=function(a){return a.g?M(a.g,2)+";"+M(a.g,1):null},Tv=function(a){a.h.N(a.Ka,a.g)};var Wv=function(){this.g=this.m=this.l=this.j=this.u=this.C=this.D=this.h=this.o=null},Xv=function(){var a=Wv.Vb();null==a.g&&(a.g=new Sv);return a.g},Yv=function(a){null==a.o&&(a.o=new su);return a.o},Zv=function(a){null==a.h&&(a.h=new ku(Yv(a)));return a.h};Oa(Wv);var aw=function(a,b){this.s=hb("cv2.PeerConnection");this.O=Us;this.ga=$v(this,b);this.L=this.ga.createDataChannel(a,{reliable:!1});this.G=new rb;this.o=!1;this.j=0;this.h=null;this.C=this.l=0;this.g=!1;this.F=function(){};this.m=function(){};this.D=function(){};this.u=function(){}},bw=function(a,b){a.m=b},cw=function(a,b){a.D=b},dw=function(a,b){a.u=b},ew=function(a,b){a.F=b},fw=function(a,b){a.L.onmessage=function(c){b(c.data)}},gw=function(a){var b={};b.iceServers=[{url:"stun:stun.l.google.com:19302"}].concat(a);
return b},$v=function(a,b){var c=gw(b);b=new webkitRTCPeerConnection(c);b.onicecandidate=a.J.bind(a);b.onicegatheringstatechange=a.X.bind(a);b.oniceconnectionstatechange=a.W.bind(a);a.s.info(function(){return"Created webkitRTCPeerConnnection with config: "+JSON.stringify(c)});return b};aw.prototype.start=function(){this.g||(this.g=!0,hw(this))};aw.prototype.stop=function(){this.s.info("Stopping peer connection...");this.g&&(this.g=!1,"closed"!=this.ga.signalingState&&this.ga.close());this.ga=null};
var hw=function(a){a.s.info("Sending offer to peer.");a.l=Date.now();a.ga.createOffer(a.H.bind(a),function(b){a.s.K("Error creating offer.",b)},a.O);a.G.promise.then(function(b){a.F(b)})};aw.prototype.H=function(a){var b=this;this.s.info(function(){return"Setting local description: "+JSON.stringify(a)});this.ga.setLocalDescription(a,function(){b.s.info("Local description set successfully")},function(c){b.s.K("Error setting local description.",c)})};
var iw=function(a,b){a.s.ua(function(){return"<===: "+JSON.stringify(b)});var c=new RTCSessionDescription(b);a.s.info(function(){return"Setting remote description: "+JSON.stringify(c)});a.ga.setRemoteDescription(c,function(){a.s.info("Remote description set successfully.")},function(d){a.s.K("Error setting remote description.",d)})};
aw.prototype.J=function(a){var b=this;a.candidate?(this.j++,this.C=Date.now(),1==this.j?this.h=setTimeout(function(){b.s.info("ICE candidate gathering timed out.");b.h=null;jw(b)},5E3):this.o&&this.s.K("Received ICE candidate after resolving session description.")):(this.s.info("End of ICE candidates."),Fb("MediaRouter.WebRtc.IceCandidateGathering.Duration.Reported",Date.now()-this.l),jw(this),0<this.j&&Fb("MediaRouter.WebRtc.IceCandidateGathering.Duration.Real",this.C-this.l))};
aw.prototype.X=function(){"completed"==this.ga.iceGatheringState&&jw(this)};var jw=function(a){clearTimeout(a.h);a.h=null;if(!a.o){a.s.info("Resolving sesion description after gathering "+a.j+" ICE candidates.");var b=a.ga.localDescription;a.G.resolve({type:b.type,sdp:b.sdp});a.o=!0}};
aw.prototype.W=function(a){var b=this;if(this.ga){var c=this.ga.iceConnectionState;this.s.info("New ICE connection state: "+c+".");"connected"==c?this.m("iceconnected"):"completed"==c?this.m("icecompleted"):"failed"==c?(this.s.K(function(){return"Ice connection failed: "+JSON.stringify(a)}),this.D("icefailed")):"closed"==c?this.u("iceclosed"):"disconnected"==c&&(this.s.K("Ice connection state is bad."),this.g&&(this.s.info("Restarting ICE."),this.ga.createOffer(this.H.bind(this),function(d){b.s.K("Error creating new offer.",
d)},kw)))}};var Us={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},kw={mandatory:{IceRestart:!0,OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};var lw=function(a){this.g=a;this.h=new Map;this.F=new Map;this.J=new Map;this.G=[];this.D=this.H=this.u=this.l=null;this.m=this.j=!1;this.C=new Map;this.o=new Map;Vm(this)};lw.prototype.getName=function(){return"cloud"};
lw.prototype.initialize=function(){var a=this;this.s.info("Initializing Cloud MRP");var b=Wv.Vb();if(null==b.u){null==b.C&&(b.C=new Ls(Zv(b),Yv(b)));var c=b.C;null==b.D&&(b.D=new fv(Zv(b)));b.u=new gt(c,b.D,this)}this.l=b.u;this.G.push(this.l);this.u=Yv(b);null==b.l&&(null==b.j&&(b.j=new hv(Yv(b),this)),b.l=new lv(b.j,this));this.H=b.l;null==b.m&&(b.m=new nv);this.D=b.m;Promise.resolve(!1).then(function(d){a.j=d;a.s.info("Cloud enabled setting: "+a.j)});ov(this.D,function(d){a.j=d;a.s.info("Cloud enabled setting: "+
a.j);a.j&&mw(a)});sv(this.D).then(function(d){a.m=d;a.s.info("Privacy notified setting: "+a.m)})};lw.prototype.mj=function(){return Array.from(this.h.values())};
lw.prototype.xp=function(a){if(!nw(this,a)||-1!=a.indexOf("0F5096E8"))return kr;this.s.ua("GetAvailableSinks for "+a);var b=mw(this);this.o.clear();for(var c={},d=m(this.C.values()),e=d.next();!e.done;c={og:c.og,ni:c.ni},e=d.next())c.og=e.value,c.ni=!1,b.forEach(function(f){return function(g){g.id==f.og.Nc.id&&(f.ni=!0,g.friendlyName=f.og.Nc.friendlyName)}}(c)),c.ni||this.o.set(c.og.id,c.og.Nc);b=b.concat.apply(b,q(this.o.values()));this.s.ua(function(){return"Available sinks are..."+JSON.stringify(b)});
this.l&&(b=b.concat(ow));return new jr(b,-1!=a.indexOf("0F5096E8")?jk:null)};var mw=function(a){var b=[];a.s.info("Checking cloud discovery services");a.G.forEach(function(c){c=c.Gg().map(function(d){return d.Nc});b.push.apply(b,q(c))});return b};k=lw.prototype;k.startObservingMediaSinks=function(){};k.stopObservingMediaSinks=function(){};k.startObservingMediaRoutes=function(){};k.stopObservingMediaRoutes=function(){};k.ub=function(a){return(a=pw(this,a))?a.Nc:null};
k.createRoute=function(a,b,c,d,e,f,g){var h=this;this.s.info("createRoute called");this.s.ua("urn: "+a+" sinkId:"+b);if(e=this.F.get(b))return yj(this.g.li(this,e,a,c,g,function(n){n.mediaSource=a;n.Qb.tabId=g;return zj(n)}),function(n){Cr(h.g);return n});e=pw(this,b);return qw(this,a,e,b,c,d,g)};
var qw=function(a,b,c,d,e,f,g){if(f)return Aj(Error("not supported"));a.m||(a.m=!0,qv(a.D),f=wj(vj(),d),a.Rg(f));sn().h=new kn(c.model,null);var h=yq(e,a.getName(),d,b,!0);a.h.set(h.id,h);a.F.set(d,h);a.C.set(h.id,c);a.J.set(h.id,c.g);vr(a.g,a,h);Hr(a.g,a.fb(),!0);a.s.info("starting mirroring on route: "+h.id);h.Qb={tabId:g,sessionId:"",ii:"",mf:c.model};ik(b)&&(h.isOffscreenPresentation=!0);return a.g.Ug(a,h,e).catch(function(n){n instanceof ir&&2==n.errorCode?jv(a,h,6,null):(a.s.error("Error on start session",
n instanceof Error?n:Error("Expected an Error value, got "+n)),a.h.has(h.id)&&jv(a,h,5,wj(new tj(bv,"warning"),h.sinkId)));var p;if(p=a.l)p=a.l,p.h.delete(c.deviceId)?(p.g.g.delete(c.id),p=!0):p=!1;p&&ct(a,[c.Nc]);throw n;})};lw.prototype.terminateRoute=function(a){return jv(this,a,0,null)};
var jv=function(a,b,c,d){var e="string"==typeof b?a.h.get(b):b;if(!e)return Promise.reject(new ir(3,"Route in cloud provider not found for routeId "+b));a.s.info("terminating route: "+e.id);a.h.delete(e.id);a.F.delete(e.sinkId);a.C.get(e.id);a.C.delete(e.id);d&&a.Rg(d);Ob("MediaRouter.Cloud.Session.End",c,Fs);a.g.zj(a,e);0==a.h.size&&Hr(a.g,a.fb(),!1);a.g.onPresentationConnectionStateChanged(e.id,"terminated");a.o.has(e.sinkId)&&(b=a.o.get(e.sinkId),ct(a,[b]),a.o.delete(e.sinkId));return Promise.resolve()};
k=lw.prototype;k.sendRouteMessage=function(a,b){var c=this.J.get(a);if(c){var d=(a=this.h.get(a)||void 0)?pw(this,a.sinkId):void 0;return mv(this.H,c,b,a,d)}return"string"===typeof b?(iv(this,b,a),Promise.resolve()):Promise.reject(Error("Channel type missing"))};k.sendRouteBinaryMessage=function(a){return Promise.reject(Error("Route "+a+" does not support sending binary data."))};
k.ql=function(a){var b=new pr;5>b.minFrameRate&&(b.minFrameRate=5);var c=this.pl(a);"hangouts"==c||"meetings"==c?(b.maxWidth=Math.min(window.screen&&window.screen.width||Infinity,2880),b.maxHeight=Math.min(window.screen&&window.screen.height||Infinity,1800)):b.senderSideLetterboxing=!0;qr(b);Object.freeze(b);this.s.info("Settings for "+a+": "+or(b));if(!b.shouldCaptureAudio&&!b.shouldCaptureVideo)throw Error("Cannot start mirroring without video or audio capture.");return b};
k.pl=function(a){return pw(this,a).le?"meetings":"hangouts"};k.Kq=function(){};k.To=function(a,b){this.s.ua("Checking canRoute: "+a+" for sinkId: "+b);return nw(this,a)&&!!this.ub(b)};k.Wk=function(a,b){return ik(a)&&this.h.has(b)};k.joinRoute=function(a,b){return(a=this.h.get(b))?(this.s.info("joining route: "+a.id),zj(a)):Aj(Error("not supported"))};k.connectRouteByRouteId=function(){return Aj(Error("not supported"))};k.detachRoute=function(){};
var bt=function(a,b){a.s.info(b.length+" sinks added");b=pw(a,b[0].id);sn().g=new kn(b.model,null);a.g.Yf();a.g.onSinkAvailabilityUpdated(a,2);a.s.info("sinkAvailability changed to AVAILABLE")},ct=function(a,b){a.s.info(b.length+" sinks removed");Sb(2);a.G.some(function(c){return 0<c.Gg().length})||(a.g.onSinkAvailabilityUpdated(a,0),a.s.info("sinkAvailability changed to UNAVAILABLE"));a.g.Yf()};lw.prototype.Yf=function(a){this.s.info(a.length+" sinks updated");this.g.Yf()};lw.prototype.Rg=function(a){this.g.Rg(a)};
var iv=function(a,b,c,d){(void 0===d?0:d)?a.g.yj(c,b):$p(a.g.jm,new aq(c,b))},pw=function(a,b){var c=rw(a,b);c||(c=null,(b=a.F.get(b))&&(c=a.C.get(b.id)));return c},rw=function(a,b){var c=null;a.G.some(function(d){c=d.ub(b);return!!c});return c},nw=function(a,b){var c=kk(b)||lk(b);b=ik(b);if(a.u.j&&!a.u.g&&c)return a.g.onSinkAvailabilityUpdated(a,2),!0;var d=!1;a.j&&a.u.g&&(d=!0);return d&&(c||b)};k=lw.prototype;
k.searchSinks=function(a,b){var c=this;if(!nw(this,a))return Promise.reject(Error("err"));a=jt(this.l,b);a.then(function(d){bt(c,[d])});return a};k.createMediaRouteController=function(){return db()};k.provideSinks=function(){};k.fb=function(){return"CloudProvider"};k.bc=function(){return[void 0,{cloudEnabled:this.j,notifiedHangoutsPrivacy:this.m}]};k.hc=function(){var a=Tm(this);a&&(a.cloudEnabled&&(this.j=a.cloudEnabled),a.notifiedHangoutsPrivacy&&(this.m=a.notifiedHangoutsPrivacy))};k.s=hb("mr.CloudProvider");
var ow=new Om("pseudo:cloud","","meeting","","default");var sw=function(){rq.call(this,12,"ExternalMessageListener","mr.ProviderManager",chrome.runtime.onMessageExternal)};t(sw,rq);sw.prototype.Lm=function(a,b){return b.origin&&b.origin.startsWith("chrome-extension://")&&tw.includes(b.origin.substring(19))?"start"==a.type||"stop"==a.type||"subscribe_log_data"==a.type:!1};sw.prototype.cl=function(){return!0};var vw=function(){uw||(uw=new sw);return uw},uw=null,tw=["idmofbkcelhplfjnmmdolenpigiiiecc","ggedfkijiiammpnbdadhllnehapomdge","njjegkblellcjnakomndbaloifhcoccg"];var ww=function(){rq.call(this,11,"InternalMessageListener","mr.ProviderManager",chrome.runtime.onMessage)};t(ww,rq);ww.prototype.Lm=function(a,b){return"retrieve_log_data"==a.type&&b.origin=="chrome-extension://"+chrome.runtime.id&&b.url==b.origin+"/feedback.html"};ww.prototype.cl=function(){return!0};var yw=function(){xw||(xw=new ww);return xw},xw=null;function zw(a){var b=Aw,c=[];a&&c.push(new rr(b));c.push(new lw(b));return c};var Bw=function(a,b){this.routeId=a;this.message=b},Cw=function(a){return"string"!=typeof a.message};var Dw=function(a){this.D=a;this.l=this.o=null},Ew=function(a){if(null==a.l)if(null==a.o||Date.now()-a.o>=a.D)a.m();else{var b=Math.max(a.o+a.D-Date.now(),5);a.l=setTimeout(a.m.bind(a),b)}};Dw.prototype.m=function(){null!=this.l&&(clearTimeout(this.l),this.l=null);this.F();this.o=Date.now()};Dw.prototype.F=function(){};var Fw=function(a,b){Dw.call(this,20);this.g=new Map;this.h=new Set;this.u=null;this.C=this.j=0;this.G=!1;this.H=a;this.J=b;this.s=hb("mr.RouteMessageSender")};t(Fw,Dw);Fw.prototype.init=function(a){this.u=a;Vm(this)};Fw.prototype.stopListeningForRouteMessages=function(a){this.h.delete(a)};
Fw.prototype.send=function(a,b){var c=this.g.get(a);c||(c=[],this.g.set(a,c));b=new Bw(a,b);c.push(b);50<c.length&&1==c.length%50&&this.s.K(function(){return"Message queue length is excessively large ("+(c.length+") for route "+a)});this.j+=Cw(b)?0:b.message.length;Cw(b)&&this.C++;Gw(this);this.h.has(a)&&Ew(this)};Fw.prototype.zj=function(a){this.h.delete(a);var b=this.g.get(a);b&&(this.g.delete(a),Hw(this,b),Gw(this))};
var Hw=function(a,b){if(0!=b.length){b=m(b);for(var c=b.next();!c.done;c=b.next())c=c.value,a.j-=Cw(c)?0:c.message.length,Cw(c)&&a.C--}},Gw=function(a){var b=0<a.C||a.j>a.J;b!=a.G&&(a.G=b,Hr(a.H,a.fb(),b))};Fw.prototype.F=function(){if(this.u){for(var a=m(this.h),b=a.next();!b.done;b=a.next()){b=b.value;var c=this.g.get(b);c&&0!=c.length&&(this.u(b,c),Hw(this,c),this.g.set(b,[]))}Gw(this)}else this.s.error("sendMessagesCallback not set. Messages not delivered.")};Fw.prototype.fb=function(){return"mr.RouteMessageSender"};
Fw.prototype.bc=function(){var a=[].concat(q(this.g.entries())).map(function(b){return[b[0],b[1].map(function(c){return c.message})]});return[new Iw(a,Array.from(this.h),this.j)]};Fw.prototype.hc=function(){var a=Sm(this);if(a){this.g=new Map;for(var b={},c=m(a.h),d=c.next();!d.done;b={oi:b.oi},d=c.next())d=d.value,b.oi=d[0],d=d[1].map(function(e){return function(f){return new Bw(e.oi,f)}}(b)),this.g.set(b.oi,d);this.h=new Set(a.g);this.j=a.j}};var Iw=function(a,b,c){this.h=a;this.g=b;this.j=c};var aq=function(a,b){this.type="internal_message";this.routeId=a;this.message=b};var Jw=function(){this.g=[]};Jw.prototype.listen=function(a,b,c){this.g.push({type:a,Nd:b,target:c})};var Kw=function(a,b,c){var d=a.g.findIndex(function(e){return"internal_message"==e.type&&e.Nd==b&&e.target==c});-1!=d&&a.g.splice(d,1)},$p=function(a,b){a.g.forEach(function(c){c.type==b.type&&Promise.resolve().then(function(){return c.Nd.call(c.target,b)})})};var Lw=function(a,b,c){this.g=a;this.j=b;this.l=c;this.onMessage=function(){};c.listen("internal_message",this.h,this)};Lw.prototype.sendMessage=function(a,b){return this.j(this.g,a,b)};Lw.prototype.h=function(a){if(a.routeId==this.g)this.onMessage(a.message)};Lw.prototype.dispose=function(){this.onMessage=function(){};Kw(this.l,this.h,this)};
var Mw=new Lw("",function(){return Promise.resolve()},new Jw),Nw=function(a){this.g=a},Ow=function(a){var b=rj,c=b.g.Wc.get(a);return c?new Lw(a,c.sendRouteMessage.bind(c),b.g.jm):Mw};var Pw=function(a,b){this.o=null!=b?a.bind(b):a;this.m=this.C.bind(this);this.l=[];this.g=!1;this.h=null};Pw.prototype.j=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];this.l=[].concat(q(b));null==this.h?Qw(this):this.g=!0};var Qw=function(a){a.h=setTimeout(a.m,500);a.o.apply(a,q(a.l))};Pw.prototype.C=function(){this.h=null;this.g&&(this.g=!1,Qw(this))};var Rw=function(){this.config=null;this.s=hb("mr.ProviderManager");this.h=[];this.Wc=new Map;this.o=new Map;this.l=new Set;this.j=new Set;this.D=new Map;this.g=this.u=null;this.jm=new Jw;this.J=new Pw(this.ir,this);this.W=new Pw(this.H,this);this.m=new Fw(this,524288);this.G=0;this.C=new Map;this.F=[];var a=new zs(this);this.O=a.onMessage.bind(a);a=new ps(this);this.L=a.onMessage.bind(a);this.onBeforeInvokeHandler=this.onBeforeInvokeHandler;this.createRoute=this.createRoute;this.joinRoute=this.joinRoute;
this.connectRouteByRouteId=this.connectRouteByRouteId;this.terminateRoute=this.terminateRoute;this.startObservingMediaSinks=this.startObservingMediaSinks;this.stopObservingMediaSinks=this.stopObservingMediaSinks;this.sendRouteMessage=this.sendRouteMessage;this.sendRouteBinaryMessage=this.sendRouteBinaryMessage;this.startListeningForRouteMessages=this.startListeningForRouteMessages;this.stopListeningForRouteMessages=this.stopListeningForRouteMessages;this.startObservingMediaRoutes=this.startObservingMediaRoutes;
this.stopObservingMediaRoutes=this.stopObservingMediaRoutes;this.detachRoute=this.detachRoute;this.searchSinks=this.searchSinks;this.provideSinks=this.provideSinks;this.updateMediaSinks=this.updateMediaSinks;this.createMediaRouteController=this.createMediaRouteController};t(Rw,Uj);
Rw.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.runtime.onMessage)this.O.apply(this,q(c));else if(a==chrome.runtime.onMessageExternal)this.L.apply(this,q(c));else throw Error("Unhandled event");};
var Ds=function(a,b){b=a.D.get(b);return Yj(b).then(function(c){c.initialize(a,!!a.config&&a.config.use_mirroring_service);return c})},Tw=function(a,b,c){b.forEach(function(d){if(Sw(a,d.getName()))a.s.K("Provider "+d.getName()+" already registered.");else try{d.initialize(c),a.h.push(d),a.C.set(d.getName(),0)}catch(e){a.s.K("Provider "+d.getName()+" failed to initialize.",e)}})};
Rw.prototype.initialize=function(a,b,c){this.D.set("webrtc","mr.mirror.webrtc.WebRtcService");this.D.set("cast_streaming","mr.mirror.cast.Service");this.D.set("hangouts","mr.mirror.hangouts.HangoutsService");this.D.set("meetings","mr.mirror.hangouts.MeetingsService");var d=new Nw(this);rj||(rj=d);this.g=a;this.m.init(this.g.onRouteMessagesReceived.bind(this.g));Tw(this,b,c);this.config=c;Vm(this);ek("mr.ProviderManager",this)};
var Vw=function(a,b,c){return new Promise(function(d,e){var f=null;a.G++;Uw(a);f=window.setTimeout(function(){f=null;b.cancel(new ir(2,"timeout after "+c+" ms."))},c);b.promise.then(function(g){a.G--;Uw(a);null!=f&&window.clearTimeout(f);d(g)},function(g){a.G--;Uw(a);null!=f&&window.clearTimeout(f);e(g instanceof ir?g:g instanceof Error?new ir(0,g.message,g.stack):new ir(0))})})};Rw.prototype.onBeforeInvokeHandler=function(){hk(0)};
var Ww=function(a){return"string"==typeof a?a:a.unique?"":a.scheme+"://"+a.host+"\n       "+(a.port?":"+a.port:"")+"/"};k=Rw.prototype;
k.createRoute=function(a,b,c,d,e,f,g){var h=this;g=void 0===g?!1:g;var n=Xw(this,a,b);if(!n)return Promise.reject(new ir(7,"No provider supports createRoute with source: "+a+" and sink: "+b));var p=void 0;void 0!==d&&(p=Ww(d));f=f&&0<f?f:6E4;a=n.createRoute(a,b,c,g,f,p,e);return Vw(this,a,f).then(function(r){return r},function(r){h.s.error("Error creating route.",r);throw r;})};
k.connectRouteByRouteId=function(a,b,c,d,e,f){var g=this.Wc.get(b);if(!g)return Promise.reject(new ir(7,"No provider supports join "+b));a=g.connectRouteByRouteId(a,b,c,Ww(d),e);return Vw(this,a,f&&0<f?f:3E4)};k.joinRoute=function(a,b,c,d,e,f){f=void 0===f?!1:f;var g=Yw(this,a,b);if(!g)return Promise.reject(new ir(7,"No provider supports join "+b));e=e&&0<e?e:3E4;a=g.joinRoute(a,b,f,e,Ww(c),d);return Vw(this,a,e)};
k.terminateRoute=function(a){var b=this.Wc.get(a);return b?Zw(this,a).then(function(){return b.terminateRoute(a)}):Promise.reject(new ir(3,"Route not found for routeId "+a))};k.startObservingMediaSinks=function(a){Sb(1);this.l.has(a)||(this.l.add(a),this.h.forEach(function(b){b.startObservingMediaSinks(a)}));$w(this,a)};k.stopObservingMediaSinks=function(a){this.l.delete(a)?ax(this,a):this.s.info("No existing query "+a)};
var ax=function(a,b){a.h.forEach(function(c){c.stopObservingMediaSinks(b)})},$w=function(a,b){if("urn:x-org.chromium.media:source:tab:-1"==b)a.s.K("No sinks for sourceUrn: "+b);else{var c=new Map,d=[];a.h.forEach(function(e){var f=e.xp(b);0<f.sinks.length&&(d=f.origins);f.sinks.forEach(function(g){c.has(g.id)?a.s.K("Detected duplicate sink "+g.id+" from provider: "+e.getName()):c.set(g.id,g)})});bx(a,b,Array.from(c.values()),d||[])}},bx=function(a,b,c,d){a.s.info("Sending "+c.length+" sinks to MR for "+
b);a.g.onSinksReceived(b,c,d.map(qp))};k=Rw.prototype;k.sendRouteMessage=function(a,b,c){var d=this.Wc.get(a);d?(a=d.sendRouteMessage(a,b,c),a=Vw(this,Bj(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};k.sendRouteBinaryMessage=function(a,b){var c=this.Wc.get(a);c?(a=c.sendRouteBinaryMessage(a,b),a=Vw(this,Bj(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};
k.startListeningForRouteMessages=function(a){var b=this.m;b.h.has(a)||(b.h.add(a),(a=b.g.get(a))&&0<a.length&&Ew(b))};k.stopListeningForRouteMessages=function(a){this.m.stopListeningForRouteMessages(a)};k.detachRoute=function(a){var b=this.Wc.get(a);b?b.detachRoute(a):this.s.info("Route "+a+" does not exist.")};k.enableMdnsDiscovery=function(){};var Xw=function(a,b,c){return a.h.find(function(d){return d.To(b,c)})||null},Yw=function(a,b,c){return a.h.find(function(d){return d.Wk(b,c)})||null};
Rw.prototype.H=function(){var a=this;this.l.forEach(function(b){$w(a,b)})};var Uw=function(a){a.g.setKeepAlive(0<a.G||0<a.F.length)};k=Rw.prototype;k.startObservingMediaRoutes=function(a){this.j.has(a)||(this.j.add(a),this.h.forEach(function(b){b.startObservingMediaRoutes(a)}));this.J.j()};k.stopObservingMediaRoutes=function(a){this.j.delete(a)?this.h.forEach(function(b){b.stopObservingMediaRoutes(a)}):this.s.info("No existing route query "+a)};
k.ir=function(){var a=this;if(0!=this.j.size){var b=[];this.h.forEach(function(c){b=b.concat(c.mj())});this.j.forEach(function(c){var d=[];a.h.forEach(function(e){e.mj().forEach(function(f){!f.Dg&&e.Wk(c,void 0,f)&&d.push(f.id)})});a.g.onRoutesUpdated(b,c,d)})}};k.fb=function(){return"ProviderManager"};
k.bc=function(){return[new cx(this.h.map(function(a){return a.getName()}),Array.from(this.l),Array.from(this.j),Array.from(this.Wc,function(a){var b=m(a);a=b.next().value;b=b.next().value;return[a,b.getName()]}),Array.from(this.C),this.u)]};k.hc=function(){var a=Sm(this);if(a){this.l=new Set(a.m);this.j=new Set(a.j);for(var b=m(a.h),c=b.next();!c.done;c=b.next()){var d=m(c.value);c=d.next().value;d=d.next().value;d=Sw(this,d);this.Wc.set(c,d)}this.C=new Map(a.l);this.u=a.g||null}};
var vr=function(a,b,c){a.Wc.set(c.id,b);Cr(a)};Rw.prototype.zj=function(a,b){Zw(this,b.id);this.Wc.delete(b.id);this.m.zj(b.id);Cr(this)};var Cr=function(a){0<a.j.size&&a.J.j()};Rw.prototype.Qp=function(a){var b=this.Wc.get(a.id);b&&(b.Kq(a.id),0<this.j.size&&this.ir())};Rw.prototype.yj=function(a,b){this.Wc.has(a)?("string"===typeof b||b instanceof Uint8Array||(b=JSON.stringify(b)),this.m.send(a,b)):this.s.K("Got route message for closed route "+a)};
Rw.prototype.onPresentationConnectionStateChanged=function(a,b){"terminated"==b&&this.m.m();this.g.onPresentationConnectionStateChanged(a,b)};Rw.prototype.onPresentationConnectionClosed=function(a,b,c){this.m.m();this.g.onPresentationConnectionClosed(a,b,c)};var tk=function(a,b){a.o.delete(b);(a=a.Wc.get(b))&&a.terminateRoute(b)};Rw.prototype.Yf=function(){Sb(4);this.W.j()};
Rw.prototype.onSinkAvailabilityUpdated=function(a,b){var c=this;if(this.C.get(a.getName())!=b){var d=dx(this);this.C.set(a.getName(),b);a=dx(this);d!=a&&(Sb(3),0==a&&this.H(),this.g.onSinkAvailabilityUpdated(a),0==a&&(this.l.forEach(function(e){ax(c,e)}),this.l.clear()))}};var dx=function(a){return Array.from(a.C.values()).reduce(function(b,c){return Math.max(b,c)},0)};Rw.prototype.Rg=function(a){this.g.onIssue(a)};
var Zw=function(a,b){return a.o.has(b)?Ds(a,a.o.get(b)).then(function(c){a.o.delete(b);return c.C()}):Promise.resolve(!1)};Rw.prototype.Ug=function(a,b,c,d){var e=this,f=a.pl(b.sinkId);this.s.info("Starting mirroring using service: "+f);this.o.set(b.id,f);return Cj(Ds(this,f),function(g){e.u=f;return g.Ug(b,b.mediaSource,a.ql(b.sinkId),c,d).catch(function(h){if(h instanceof Ej&&3==h.reason)throw new ir(8);throw h;})})};
Rw.prototype.li=function(a,b,c,d,e,f){var g=this,h=this.o.get(b.id);return h?Cj(Ds(this,h),function(n){g.u=h;return n.li(b,c,a.ql(b.sinkId),d,e,f)}):Aj(Error("Route "+b.id+" is not mirroring"))};var Hr=function(a,b,c){var d=a.F.indexOf(b),e=0<=d;c&&!e?a.F.push(b):!c&&e&&a.F.splice(d,1);Uw(a)},Sw=function(a,b){return a.h.find(function(c){return c.getName()==b})||null};k=Rw.prototype;
k.searchSinks=function(a,b,c){var d=a.startsWith("pseudo:")?a.substring(7):null;return(d=d?Sw(this,d):null)?d.searchSinks(b,c).then(function(e){return e.id}):Promise.reject(Error("No provider supports "+a))};k.provideSinks=function(a,b){var c=Sw(this,a);c?c.provideSinks(b):this.s.info("provideSinks: Provider not found for providerName "+a)};k.updateMediaSinks=function(a){this.l.has(a)||$w(this,a)};
k.createMediaRouteController=function(a,b,c){var d=this,e=this.Wc.get(a);return e?e.createMediaRouteController(a,b,c).catch(function(f){d.s.error("createMediaRouteController failed: "+f.message);b.close();c.ptr.reset();throw f;}):(a="createMediaRouteController: Provider not found for "+a,this.s.error(a),b.close(),c.ptr.reset(),Promise.reject(Error(a)))};k.onMediaRemoterCreated=function(a,b,c){this.g.onMediaRemoterCreated(a,b,c)};k.getMediaSinkServiceStatus=function(){return this.g.getMediaSinkServiceStatus()};
var Cs=function(a){return"function"!=typeof a.g.getLogsAsString?Promise.resolve({hd:""}):a.g.getLogsAsString()};Rw.prototype.getMirroringServiceHostForTab=function(a,b){this.g.getMirroringServiceHostForTab(a,b)};Rw.prototype.getMirroringServiceHostForDesktop=function(a,b,c){this.g.getMirroringServiceHostForDesktop(a,b,c)};Rw.prototype.getMirroringServiceHostForOffscreenTab=function(a,b,c){this.g.getMirroringServiceHostForOffscreenTab(a,b,c)};
var cx=function(a,b,c,d,e,f){this.m=b;this.j=c;this.h=d;this.l=e;this.g=f};var ex=function(a){this.id=a};ex.prototype.toString=function(){return this.id};var fx=function(a,b){this.type=a instanceof ex?String(a):a;this.j=this.target=b;this.defaultPrevented=!1};fx.prototype.l=function(){this.defaultPrevented=!0};var gx=function(){if(!Ha.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{Ha.addEventListener("test",Na,b),Ha.removeEventListener("test",Na,b)}catch(c){}return a}();var hx=function(a,b){fx.call(this,a?a.type:"");this.relatedTarget=this.j=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.g=null;a&&this.init(a,b)};x(hx,fx);var ix=Dg({2:"touch",3:"pen",4:"mouse"});
hx.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.j=b;(b=a.relatedTarget)?pf&&(jf(b,"nodeName")||(b=null)):"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:
a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:ix[a.pointerType]||"";this.state=a.state;this.g=a;a.defaultPrevented&&hx.Wb.l.call(this)};
hx.prototype.l=function(){hx.Wb.l.call(this);var a=this.g;a.preventDefault?a.preventDefault():a.returnValue=!1};var jx="closure_listenable_"+(1E6*Math.random()|0),kx=function(a){return!(!a||!a[jx])};var lx=0;var mx=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Nd=e;this.key=++lx;this.removed=this.Ti=!1},nx=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.Nd=null};var ox=function(a){this.src=a;this.g={};this.h=0};ox.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);var g=px(a,b,d,e);-1<g?(b=a[g],c||(b.Ti=!1)):(b=new mx(b,this.src,f,!!d,e),b.Ti=c,a.push(b));return b};ox.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=px(e,b,c,d);return-1<b?(nx(e[b]),sc(e,b),0==e.length&&(delete this.g[a],this.h--),!0):!1};
var qx=function(a,b){var c=b.type;if(!(c in a.g))return!1;var d=rc(a.g[c],b);d&&(nx(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d};ox.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,nx(d[e]);delete this.g[c];this.h--}return b};var rx=function(a,b,c,d,e){a=a.g[b.toString()];b=-1;a&&(b=px(a,c,d,e));return-1<b?a[b]:null};
ox.prototype.hasListener=function(a,b){var c=void 0!==a,d=c?a.toString():"",e=void 0!==b;return ld(this.g,function(f){for(var g=0;g<f.length;++g)if(!(c&&f[g].type!=d||e&&f[g].capture!=b))return!0;return!1})};var px=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.Nd==d)return e}return-1};var sx="closure_lm_"+(1E6*Math.random()|0),xx={},yx=0,Ax=function(a,b,c,d,e){if(d&&d.once)return zx(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)Ax(a,b[f],c,d,e);return null}c=Bx(c);return kx(a)?a.listen(b,c,Sa(d)?!!d.capture:!!d,e):Cx(a,b,c,!1,d,e)},Cx=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=Sa(e)?!!e.capture:!!e,h=Dx(a);h||(a[sx]=h=new ox(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=Ex();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)gx||(e=g),void 0===
e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Fx(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");yx++;return c},Ex=function(){var a=Gx,b=function(c){return a.call(b.src,b.listener,c)};return b},zx=function(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)zx(a,b[f],c,d,e);return null}c=Bx(c);return kx(a)?Hx(a,b,c,Sa(d)?!!d.capture:!!d,e):Cx(a,b,c,!0,d,e)},Ix=
function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Ix(a,b[f],c,d,e);else d=Sa(d)?!!d.capture:!!d,c=Bx(c),kx(a)?a.ud.remove(String(b),c,d,e):a&&(a=Dx(a))&&(b=rx(a,b,c,d,e))&&Jx(b)},Jx=function(a){if("number"===typeof a||!a||a.removed)return!1;var b=a.src;if(kx(b))return qx(b.ud,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Fx(c),d):b.addListener&&b.removeListener&&b.removeListener(d);yx--;(c=Dx(b))?(qx(c,a),0==c.h&&
(c.src=null,b[sx]=null)):nx(a);return!0},Kx=function(a){if(a)if(kx(a))a.ud&&a.ud.removeAll(void 0);else if(a=Dx(a)){var b=0,c;for(c in a.g)for(var d=a.g[c].concat(),e=0;e<d.length;++e)Jx(d[e])&&++b}},Fx=function(a){return a in xx?xx[a]:xx[a]="on"+a},Gx=function(a,b){if(a.removed)a=!0;else{b=new hx(b,this);var c=a.listener,d=a.Nd||a.src;a.Ti&&Jx(a);a=c.call(d,b)}return a},Dx=function(a){a=a[sx];return a instanceof ox?a:null},Lx="__closure_events_fn_"+(1E9*Math.random()>>>0),Bx=function(a){if("function"===
typeof a)return a;a[Lx]||(a[Lx]=function(b){return a.handleEvent(b)});return a[Lx]};var Mx=function(){W.call(this);this.ud=new ox(this);this.Hi=this;this.C=null};x(Mx,W);Mx.prototype[jx]=!0;Mx.prototype.removeEventListener=function(a,b,c,d){Ix(this,a,b,c,d)};
Mx.prototype.g=function(a){var b,c=this.C;if(c)for(b=[];c;c=c.C)b.push(c);c=this.Hi;var d=a.type||a;if("string"===typeof a)a=new fx(a,c);else if(a instanceof fx)a.target=a.target||c;else{var e=a;a=new fx(d,c);Ad(a,e)}e=!0;if(b)for(var f=b.length-1;0<=f;f--){var g=a.j=b[f];e=g.Fg(d,!0,a)&&e}g=a.j=c;e=g.Fg(d,!0,a)&&e;e=g.Fg(d,!1,a)&&e;if(b)for(f=0;f<b.length;f++)g=a.j=b[f],e=g.Fg(d,!1,a)&&e;return e};Mx.prototype.aa=function(){Mx.Wb.aa.call(this);this.ud&&this.ud.removeAll(void 0);this.C=null};
Mx.prototype.listen=function(a,b,c,d){return this.ud.add(String(a),b,!1,c,d)};var Hx=function(a,b,c,d,e){return a.ud.add(String(b),c,!0,d,e)};Mx.prototype.Fg=function(a,b,c){a=this.ud.g[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.removed&&f.capture==b){var g=f.listener,h=f.Nd||f.src;f.Ti&&qx(this.ud,f);d=!1!==g.call(h,c)&&d}}return d&&!c.defaultPrevented};Mx.prototype.hasListener=function(a,b){return this.ud.hasListener(void 0!==a?String(a):void 0,b)};var Nx={wG:100,vQ:101,OK:200,xG:201,ACCEPTED:202,vL:203,ML:204,WN:205,qM:206,hL:207,gL:300,dL:301,FH:302,nP:303,JL:304,gS:305,FQ:307,CM:308,Zs:400,IR:401,Iu:402,EH:403,NOT_FOUND:404,TK:405,yL:406,hN:407,UN:408,kG:409,hI:410,QJ:411,ZM:412,RN:413,VN:414,RR:415,TN:416,cH:417,OR:422,YJ:423,eH:424,aN:428,lR:429,SN:431,zt:500,GL:501,eE:502,zP:503,UH:504,OI:505,fJ:507,nL:511,qN:1223};var Ox=function(){};Ox.prototype.g=null;var Qx=function(a){var b;(b=a.g)||(b={},Px(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var Rx,Sx=function(){};x(Sx,Ox);var Tx=function(a){return(a=Px(a))?new ActiveXObject(a):new XMLHttpRequest},Px=function(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h};Rx=new Sx;var Ux=function(a,b){Mx.call(this);this.l=a||1;this.j=b||Ha;this.m=Za(this.u,this);this.o=ab()};x(Ux,Mx);Ux.prototype.enabled=!1;Ux.prototype.h=null;var Vx=function(a,b){a.l=b;a.h&&a.enabled?(a.stop(),a.start()):a.h&&a.stop()};Ux.prototype.u=function(){if(this.enabled){var a=ab()-this.o;0<a&&a<.8*this.l?this.h=this.j.setTimeout(this.m,this.l-a):(this.h&&(this.j.clearTimeout(this.h),this.h=null),this.g("tick"),this.enabled&&(this.stop(),this.start()))}};
Ux.prototype.start=function(){this.enabled=!0;this.h||(this.h=this.j.setTimeout(this.m,this.l),this.o=ab())};Ux.prototype.stop=function(){this.enabled=!1;this.h&&(this.j.clearTimeout(this.h),this.h=null)};Ux.prototype.aa=function(){Ux.Wb.aa.call(this);this.stop();delete this.j};
var Wx=function(a,b,c){if("function"===typeof a)c&&(a=Za(a,c));else if(a&&"function"==typeof a.handleEvent)a=Za(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:Ha.setTimeout(a,b||0)},Xx=function(a){Ha.clearTimeout(a)},Yx=function(a,b){var c=null;return Vt(new Gt(function(d,e){c=Wx(function(){d(b)},a);-1==c&&e(Error("Failed to schedule timer."))}),function(d){Xx(c);throw d;})};var Zx=function(a){Mx.call(this);this.headers=new En;this.W=a||null;this.j=!1;this.O=this.h=null;this.ka=this.J="";this.o=0;this.l="";this.m=this.ca=this.H=this.X=!1;this.u=0;this.F=null;this.D="";this.L=this.G=!1};x(Zx,Mx);Zx.prototype.s=Wg("goog.net.XhrIo");var $x=/^https?$/i,ay=["POST","PUT"],by=[],cy=function(a,b,c,d,e,f,g){var h=new Zx;by.push(h);b&&h.listen("complete",b);Hx(h,"ready",h.ta);f&&(h.u=Math.max(0,f));g&&(h.G=g);h.send(a,c,d,e);return h};
Zx.prototype.ta=function(){this.dispose();rc(by,this)};
Zx.prototype.send=function(a,b,c,d){if(this.h)throw Error("[goog.net.XhrIo] Object is active with another request="+this.J+"; newUri="+a);b=b?b.toUpperCase():"GET";this.J=a;this.l="";this.o=0;this.ka=b;this.X=!1;this.j=!0;this.h=this.W?Tx(this.W):Tx(Rx);this.O=this.W?Qx(this.W):Qx(Rx);this.h.onreadystatechange=Za(this.pa,this);try{ah(this.s,dy(this,"Opening Xhr")),this.ca=!0,this.h.open(b,String(a),!0),this.ca=!1}catch(f){ah(this.s,dy(this,"Error opening Xhr: "+f.message));ey(this,f);return}a=c||
"";var e=this.headers.clone();d&&ro(d,function(f,g){e.set(g,f)});d=ic(e.Ac(),fy);c=Ha.FormData&&a instanceof Ha.FormData;!lc(ay,b)||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");e.forEach(function(f,g){this.h.setRequestHeader(g,f)},this);this.D&&(this.h.responseType=this.D);"withCredentials"in this.h&&this.h.withCredentials!==this.G&&(this.h.withCredentials=this.G);try{gy(this),0<this.u&&(this.L=hy(this.h),ah(this.s,dy(this,"Will abort after "+this.u+"ms if incomplete, xhr2 "+
this.L)),this.L?(this.h.timeout=this.u,this.h.ontimeout=Za(this.ji,this)):this.F=Wx(this.ji,this.u,this)),ah(this.s,dy(this,"Sending request")),this.H=!0,this.h.send(a),this.H=!1}catch(f){ah(this.s,dy(this,"Send error: "+f.message)),ey(this,f)}};var hy=function(a){return nf&&Kf(9)&&"number"===typeof a.timeout&&void 0!==a.ontimeout},fy=function(a){return Rc("Content-Type",a)};
Zx.prototype.ji=function(){"undefined"!=typeof Ga&&this.h&&(this.l="Timed out after "+this.u+"ms, aborting",this.o=8,ah(this.s,dy(this,this.l)),this.g("timeout"),this.abort(8))};var ey=function(a,b){a.j=!1;a.h&&(a.m=!0,a.h.abort(),a.m=!1);a.l=b;a.o=5;iy(a);jy(a)},iy=function(a){a.X||(a.X=!0,a.g("complete"),a.g("error"))};Zx.prototype.abort=function(a){this.h&&this.j&&(ah(this.s,dy(this,"Aborting")),this.j=!1,this.m=!0,this.h.abort(),this.m=!1,this.o=a||7,this.g("complete"),this.g("abort"),jy(this))};
Zx.prototype.aa=function(){this.h&&(this.j&&(this.j=!1,this.m=!0,this.h.abort(),this.m=!1),jy(this,!0));Zx.Wb.aa.call(this)};Zx.prototype.pa=function(){this.isDisposed()||(this.ca||this.H||this.m?ky(this):this.wa())};Zx.prototype.wa=function(){ky(this)};
var ky=function(a){if(a.j&&"undefined"!=typeof Ga)if(a.O[1]&&4==ly(a)&&2==a.za())ah(a.s,dy(a,"Local request error detected and ignored"));else if(a.H&&4==ly(a))Wx(a.pa,0,a);else if(a.g("readystatechange"),4==ly(a)){ah(a.s,dy(a,"Request complete"));a.j=!1;try{my(a)?(a.g("complete"),a.g("success")):(a.o=6,a.l=ny(a)+" ["+a.za()+"]",iy(a))}finally{jy(a)}}},jy=function(a,b){if(a.h){gy(a);var c=a.h,d=a.O[0]?Na:null;a.h=null;a.O=null;b||a.g("ready");try{c.onreadystatechange=d}catch(e){Yg(a.s,"Problem encountered resetting onreadystatechange: "+
e.message)}}},gy=function(a){a.h&&a.L&&(a.h.ontimeout=null);a.F&&(Xx(a.F),a.F=null)},my=function(a){var b=a.za();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.J).match(Ir)[1]||null,!a&&Ha.self&&Ha.self.location&&(a=Ha.self.location.protocol,a=a.substr(0,a.length-1)),b=!$x.test(a?a.toLowerCase():"");c=b}return c},ly=function(a){return a.h?a.h.readyState:0};
Zx.prototype.za=function(){try{return 2<ly(this)?this.h.status:-1}catch(a){return-1}};
var ny=function(a){try{return 2<ly(a)?a.h.statusText:""}catch(b){return ah(a.s,"Can not get status: "+b.message),""}},oy=function(a){try{return a.h?a.h.responseText:""}catch(b){return ah(a.s,"Can not get responseText: "+b.message),""}},py=function(a){try{if(!a.h)return null;if("response"in a.h)return a.h.response;switch(a.D){case "":case "text":return a.h.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.h)return a.h.mozResponseArrayBuffer}Yg(a.s,"Response type "+a.D+" is not supported on this browser");
return null}catch(b){return ah(a.s,"Can not get response: "+b.message),null}};Zx.prototype.getResponseHeader=function(a){if(this.h&&4==ly(this))return a=this.h.getResponseHeader(a),null===a?void 0:a};
var qy=function(a){var b={};a=(a.h&&4==ly(a)?a.h.getAllResponseHeaders()||"":"").split("\r\n");for(var c=0;c<a.length;c++)if(!Sc(a[c])){var d=bf(a[c],":",1),e=d[0];d=d[1];if("string"===typeof d){d=d.trim();var f=b[e]||[];b[e]=f;f.push(d)}}return kd(b,function(g){return g.join(", ")})},dy=function(a,b){return b+" ["+a.ka+" "+a.J+" "+a.za()+"]"};
