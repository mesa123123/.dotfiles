"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.startServer = void 0;
const vscode_languageserver_1 = require("vscode-languageserver");
const node_1 = require("vscode-languageserver/node");
const vscode_languageserver_textdocument_1 = require("vscode-languageserver-textdocument");
const CucumberLanguageServer_js_1 = require("./CucumberLanguageServer.js");
const version_js_1 = require("./version.js");
function startServer(adapter, makeFiles) {
    const connection = (0, node_1.createConnection)(node_1.ProposedFeatures.all);
    const documents = new vscode_languageserver_1.TextDocuments(vscode_languageserver_textdocument_1.TextDocument);
    new CucumberLanguageServer_js_1.CucumberLanguageServer(connection, documents, adapter, makeFiles);
    connection.listen();
    // Don't die on unhandled Promise rejections
    process.on('unhandledRejection', (reason, p) => {
        connection.console.error(`Cucumber Language Server ${version_js_1.version}: Unhandled Rejection at promise: ${p}, reason: ${reason}`);
    });
}
exports.startServer = startServer;
//# sourceMappingURL=startServer.js.map