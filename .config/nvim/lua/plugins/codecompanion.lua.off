-- return {
--   "olimorris/codecompanion.nvim",
--   enabled = true,
--   event = "VeryLazy",
--   dependencies = {
--     "nvim-lua/plenary.nvim",
--     "nvim-treesitter/nvim-treesitter",
--     "echasnovski/mini.diff",
--     {
--       "stevearc/dressing.nvim", -- Optional: Improves the default Neovim UI
--       opts = {},
--     },
--   },
--   config = function()
--     local lk = require("config.keymaps").lk
--     require("mini.diff").setup()
--     require("codecompanion").setup({
--       strategies = {
--         chat = {
--           adapter = "ollama",
--           keymaps = {
--             send = {
--               modes = {
--                 n = { "<CR>" },
--                 i = { "<C-CR>" },
--               },
--             },
--             close = {
--               modes = {
--                 n = "q",
--               },
--             },
--             stop = {
--               modes = {
--                 n = "<c-x>",
--               },
--             },
--           },
--           edit = true,
--         },
--         inline = {
--           adapter = "ollama",
--           edit = true,
--           keymaps = {
--             accept_change = {
--               modes = { n = lk.ai.key .. "y" },
--               description = "Accept the suggested change",
--             },
--             reject_change = {
--               modes = { n = lk.ai.key .. "n" },
--               description = "Reject the suggested change",
--             },
--           },
--         },
--         agent = {
--           adapter = "ollama",
--           edit = true,
--         },
--       },
--       adapters = {
--         ollama = function()
--           return require("codecompanion.adapters").extend("ollama", {
--             schema = {
--               model = {
--                 default = "deepseek-coder-v2:16b",
--               },
--             },
--             allow_edit = true,
--           })
--         end,
--       },
--       display = {
--         diff = {
--           enabled = true,
--           layout = "vertical",
--           opts = { "internal", "filler", "closeoff", "algorithm:patience", "followwrap", "linematch:120" },
--           provider = "default",
--         },
--       },
--     })
--     local descMap = require("config.utils").desc_keymap
--     descMap({ "n" }, lk.ai, "a", "<cmd>CodeCompanionChat Toggle<cr>", "Toggle CodeCompanion")
--     descMap({ "v" }, lk.ai, "a", ":CodeCompanion ", "CodeCompanion Inline Prompt")
--   end,
-- }
